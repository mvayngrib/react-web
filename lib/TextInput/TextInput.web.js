







'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _react=require('react');var _react2=_interopRequireDefault(_react);
var _reactDom=require('react-dom');var _reactDom2=_interopRequireDefault(_reactDom);
var _ReactView=require('../View/View.web');var _ReactView2=_interopRequireDefault(_ReactView);
var _autobindDecorator=require('autobind-decorator');var _autobindDecorator2=_interopRequireDefault(_autobindDecorator);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var typeMap={
'default':'text',
'ascii-capable':'text',
'numbers-and-punctuation':'number',
'url':'url',
'number-pad':'number',
'phone-pad':'tel',
'name-phone-pad':'text',
'email-address':'email',
'decimal-pad':'number',
'twitter':'text',
'web-search':'search',
'numeric':'number'};var


TextInput=function(_Component){_inherits(TextInput,_Component);function TextInput(){_classCallCheck(this,TextInput);return _possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).apply(this,arguments));}_createClass(TextInput,[{key:'_onBlur',value:function _onBlur(









e){var
onBlur=this.props.onBlur;
if(onBlur){
e.nativeEvent.text=e.target.value;
onBlur(e);
}
}},{key:'_onChange',value:function _onChange(

e){var _props=
this.props;var onChange=_props.onChange;var onChangeText=_props.onChangeText;
if(onChangeText)onChangeText(e.target.value);
if(onChange){
e.nativeEvent.text=e.target.value;
onChange(e);
}
}},{key:'_onFocus',value:function _onFocus(

e){var _props2=
this.props;var clearTextOnFocus=_props2.clearTextOnFocus;var onFocus=_props2.onFocus;var selectTextOnFocus=_props2.selectTextOnFocus;
var node=_reactDom2.default.findDOMNode(this);
if(clearTextOnFocus)node.value='';
if(selectTextOnFocus)node.select();
if(onFocus){
e.nativeEvent.text=e.target.value;
onFocus(e);
}
}},{key:'_onSelectionChange',value:function _onSelectionChange(

e){var
onSelectionChange=this.props.onSelectionChange;

if(onSelectionChange){var _e$target=
e.target;var selectionDirection=_e$target.selectionDirection;var selectionEnd=_e$target.selectionEnd;var selectionStart=_e$target.selectionStart;
e.nativeEvent.text=e.target.value;
var event={
selectionDirection:selectionDirection,
selectionEnd:selectionEnd,
selectionStart:selectionStart,
nativeEvent:e.nativeEvent};

onSelectionChange(event);
}
}},{key:'componentDidMount',value:function componentDidMount()

{
if(this.props.autoFocus){
_reactDom2.default.findDOMNode(this.refs.input).focus();
}
}},{key:'render',value:function render()

{var _props3=

























this.props;var accessibilityLabel=_props3.accessibilityLabel;var autoComplete=_props3.autoComplete;var autoFocus=_props3.autoFocus;var defaultValue=_props3.defaultValue;var editable=_props3.editable;var keyboardType=_props3.keyboardType;var maxLength=_props3.maxLength;var maxNumberOfLines=_props3.maxNumberOfLines;var multiline=_props3.multiline;var numberOfLines=_props3.numberOfLines;var onBlur=_props3.onBlur;var onChange=_props3.onChange;var onKeyDown=_props3.onKeyDown;var onKeyUp=_props3.onKeyUp;var onKeyPress=_props3.onKeyPress;var onChangeText=_props3.onChangeText;var onSelectionChange=_props3.onSelectionChange;var placeholder=_props3.placeholder;var password=_props3.password;var secureTextEntry=_props3.secureTextEntry;var style=_props3.style;var testID=_props3.testID;var value=_props3.value;

var propsCommon={
ref:'input',
'aria-label':accessibilityLabel,
autoComplete:autoComplete&&'on',
autoFocus:autoFocus,
defaultValue:defaultValue,
maxLength:maxLength,
onBlur:onBlur&&this._onBlur,
onChange:(onChange||onChangeText)&&this._onChange,
onFocus:this._onFocus,
onSelect:onSelectionChange&&this._onSelectionChange,
placeholder:placeholder,
readOnly:!editable,
style:_extends({},
styles.initial,
style),

testID:testID,
value:value,
onKeyDown:onKeyDown,
onKeyUp:onKeyUp,
onKeyPress:onKeyPress};


var input=void 0;
if(multiline){
var propsMultiline=_extends({},
propsCommon,{
maxRows:maxNumberOfLines||numberOfLines,
minRows:numberOfLines});


input=_react2.default.createElement('textarea',propsMultiline);

}else{

var type=typeMap[keyboardType];

if(password||secureTextEntry){
type='password';
}

var propsSingleline=_extends({},
propsCommon,{
type:type});


input=_react2.default.createElement('input',propsSingleline);
}

if(this.props.children){
return(
_react2.default.createElement(_ReactView2.default,null,
input,
this.props.children));


}else{
return input;
}
}}]);return TextInput;}(_react.Component);TextInput.defaultProps={editable:true,multiline:false,secureTextEntry:false,keyboardType:'default',autoFocus:false};
;

var styles={
initial:{
appearance:'none',
backgroundColor:'transparent',
borderColor:'black',
borderWidth:0,
boxSizing:'border-box',
color:'inherit',
font:'inherit',
padding:0,
height:30}};



(0,_autobindDecorator2.default)(TextInput);

TextInput.isReactNativeComponent=true;exports.default=

TextInput;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHRJbnB1dC53ZWIuanMiXSwibmFtZXMiOlsidHlwZU1hcCIsIlRleHRJbnB1dCIsImUiLCJvbkJsdXIiLCJwcm9wcyIsIm5hdGl2ZUV2ZW50IiwidGV4dCIsInRhcmdldCIsInZhbHVlIiwib25DaGFuZ2UiLCJvbkNoYW5nZVRleHQiLCJjbGVhclRleHRPbkZvY3VzIiwib25Gb2N1cyIsInNlbGVjdFRleHRPbkZvY3VzIiwibm9kZSIsImZpbmRET01Ob2RlIiwic2VsZWN0Iiwib25TZWxlY3Rpb25DaGFuZ2UiLCJzZWxlY3Rpb25EaXJlY3Rpb24iLCJzZWxlY3Rpb25FbmQiLCJzZWxlY3Rpb25TdGFydCIsImV2ZW50IiwiYXV0b0ZvY3VzIiwicmVmcyIsImlucHV0IiwiZm9jdXMiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhdXRvQ29tcGxldGUiLCJkZWZhdWx0VmFsdWUiLCJlZGl0YWJsZSIsImtleWJvYXJkVHlwZSIsIm1heExlbmd0aCIsIm1heE51bWJlck9mTGluZXMiLCJtdWx0aWxpbmUiLCJudW1iZXJPZkxpbmVzIiwib25LZXlEb3duIiwib25LZXlVcCIsIm9uS2V5UHJlc3MiLCJwbGFjZWhvbGRlciIsInBhc3N3b3JkIiwic2VjdXJlVGV4dEVudHJ5Iiwic3R5bGUiLCJ0ZXN0SUQiLCJwcm9wc0NvbW1vbiIsInJlZiIsIl9vbkJsdXIiLCJfb25DaGFuZ2UiLCJfb25Gb2N1cyIsIm9uU2VsZWN0IiwiX29uU2VsZWN0aW9uQ2hhbmdlIiwicmVhZE9ubHkiLCJzdHlsZXMiLCJpbml0aWFsIiwicHJvcHNNdWx0aWxpbmUiLCJtYXhSb3dzIiwibWluUm93cyIsInR5cGUiLCJwcm9wc1NpbmdsZWxpbmUiLCJjaGlsZHJlbiIsImRlZmF1bHRQcm9wcyIsImFwcGVhcmFuY2UiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwiYm94U2l6aW5nIiwiY29sb3IiLCJmb250IiwicGFkZGluZyIsImhlaWdodCIsImlzUmVh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RCxDQVRELElBU087O0FBRUwsR0FBSUcsTUFBT3hELFFBQVE4QixZQUFSLENBQVg7O0FBRUEsR0FBSVMsVUFBWUMsZUFBaEIsQ0FBaUM7QUFDL0JnQixLQUFPLFVBQVA7QUFDRDs7QUFFRCxHQUFNQztBQUNEZCxXQURDO0FBRUphLFNBRkksRUFBTjs7O0FBS0FoQyxNQUFRLHNDQUFXaUMsZUFBWCxDQUFSO0FBQ0Q7O0FBRUQsR0FBSSxLQUFLckQsS0FBTCxDQUFXc0QsUUFBZixDQUF5QjtBQUN2QjtBQUNFO0FBQ0dsQyxLQURIO0FBRUcsS0FBS3BCLEtBQUwsQ0FBV3NELFFBRmQsQ0FERjs7O0FBTUQsQ0FQRCxJQU9PO0FBQ0wsTUFBT2xDLE1BQVA7QUFDRDtBQUNGLEMseUNBcEpHdkIsUyxDQUVHMEQsWSxDQUFlLENBQ3BCOUIsU0FBVSxJQURVLENBRXBCSSxVQUFXLEtBRlMsQ0FHcEJPLGdCQUFpQixLQUhHLENBSXBCVixhQUFjLFNBSk0sQ0FLcEJSLFVBQVcsS0FMUyxDO0FBbUp2Qjs7QUFFRCxHQUFNNkIsUUFBUztBQUNiQyxRQUFTO0FBQ1BRLFdBQVksTUFETDtBQUVQQyxnQkFBaUIsYUFGVjtBQUdQQyxZQUFhLE9BSE47QUFJUEMsWUFBYSxDQUpOO0FBS1BDLFVBQVcsWUFMSjtBQU1QQyxNQUFPLFNBTkE7QUFPUEMsS0FBTSxTQVBDO0FBUVBDLFFBQVMsQ0FSRjtBQVNQQyxPQUFRLEVBVEQsQ0FESSxDQUFmOzs7O0FBY0EsZ0NBQVNuRSxTQUFUOztBQUVBQSxVQUFVb0Usc0JBQVYsQ0FBbUMsSUFBbkMsQzs7QUFFZXBFLFMiLCJmaWxlIjoiVGV4dElucHV0LndlYi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUsIEZhY2Vib29rLCBJbmMuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFRleHRJbnB1dFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFZpZXcgZnJvbSAnUmVhY3RWaWV3JztcbmltcG9ydCBhdXRvYmluZCBmcm9tICdhdXRvYmluZC1kZWNvcmF0b3InO1xuXG5sZXQgdHlwZU1hcCA9IHtcbiAgJ2RlZmF1bHQnOiAndGV4dCcsXG4gICdhc2NpaS1jYXBhYmxlJzogJ3RleHQnLFxuICAnbnVtYmVycy1hbmQtcHVuY3R1YXRpb24nOiAnbnVtYmVyJyxcbiAgJ3VybCc6ICd1cmwnLFxuICAnbnVtYmVyLXBhZCc6ICdudW1iZXInLFxuICAncGhvbmUtcGFkJzogJ3RlbCcsXG4gICduYW1lLXBob25lLXBhZCc6ICd0ZXh0JyxcbiAgJ2VtYWlsLWFkZHJlc3MnOiAnZW1haWwnLFxuICAnZGVjaW1hbC1wYWQnOiAnbnVtYmVyJyxcbiAgJ3R3aXR0ZXInOiAndGV4dCcsXG4gICd3ZWItc2VhcmNoJzogJ3NlYXJjaCcsXG4gICdudW1lcmljJzogJ251bWJlcidcbn07XG5cbmNsYXNzIFRleHRJbnB1dCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICBtdWx0aWxpbmU6IGZhbHNlLFxuICAgIHNlY3VyZVRleHRFbnRyeTogZmFsc2UsXG4gICAga2V5Ym9hcmRUeXBlOiAnZGVmYXVsdCcsXG4gICAgYXV0b0ZvY3VzOiBmYWxzZVxuICB9XG5cbiAgX29uQmx1cihlKSB7XG4gICAgY29uc3QgeyBvbkJsdXIgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKG9uQmx1cikge1xuICAgICAgZS5uYXRpdmVFdmVudC50ZXh0ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICBvbkJsdXIoZSk7XG4gICAgfVxuICB9XG5cbiAgX29uQ2hhbmdlKGUpIHtcbiAgICBjb25zdCB7IG9uQ2hhbmdlLCBvbkNoYW5nZVRleHQgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKG9uQ2hhbmdlVGV4dCkgb25DaGFuZ2VUZXh0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgIGUubmF0aXZlRXZlbnQudGV4dCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgb25DaGFuZ2UoZSk7XG4gICAgfVxuICB9XG5cbiAgX29uRm9jdXMoZSkge1xuICAgIGNvbnN0IHsgY2xlYXJUZXh0T25Gb2N1cywgb25Gb2N1cywgc2VsZWN0VGV4dE9uRm9jdXMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgbm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIGlmIChjbGVhclRleHRPbkZvY3VzKSBub2RlLnZhbHVlID0gJyc7XG4gICAgaWYgKHNlbGVjdFRleHRPbkZvY3VzKSBub2RlLnNlbGVjdCgpO1xuICAgIGlmIChvbkZvY3VzKSB7XG4gICAgICBlLm5hdGl2ZUV2ZW50LnRleHQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIG9uRm9jdXMoZSk7XG4gICAgfVxuICB9XG5cbiAgX29uU2VsZWN0aW9uQ2hhbmdlKGUpIHtcbiAgICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKG9uU2VsZWN0aW9uQ2hhbmdlKSB7XG4gICAgICBjb25zdCB7IHNlbGVjdGlvbkRpcmVjdGlvbiwgc2VsZWN0aW9uRW5kLCBzZWxlY3Rpb25TdGFydCB9ID0gZS50YXJnZXQ7XG4gICAgICBlLm5hdGl2ZUV2ZW50LnRleHQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICBzZWxlY3Rpb25EaXJlY3Rpb24sXG4gICAgICAgIHNlbGVjdGlvbkVuZCxcbiAgICAgICAgc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgIG5hdGl2ZUV2ZW50OiBlLm5hdGl2ZUV2ZW50XG4gICAgICB9O1xuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLmF1dG9Gb2N1cykge1xuICAgICAgUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLmlucHV0KS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcblxuICAgIGNvbnN0IHtcbiAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbCxcbiAgICAgIGF1dG9Db21wbGV0ZSxcbiAgICAgIGF1dG9Gb2N1cyxcbiAgICAgIGRlZmF1bHRWYWx1ZSxcbiAgICAgIGVkaXRhYmxlLFxuICAgICAga2V5Ym9hcmRUeXBlLFxuICAgICAgbWF4TGVuZ3RoLFxuICAgICAgbWF4TnVtYmVyT2ZMaW5lcyxcbiAgICAgIG11bHRpbGluZSxcbiAgICAgIG51bWJlck9mTGluZXMsXG4gICAgICBvbkJsdXIsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9uS2V5RG93bixcbiAgICAgIG9uS2V5VXAsXG4gICAgICBvbktleVByZXNzLFxuICAgICAgb25DaGFuZ2VUZXh0LFxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UsXG4gICAgICBwbGFjZWhvbGRlcixcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgc2VjdXJlVGV4dEVudHJ5LFxuICAgICAgc3R5bGUsXG4gICAgICB0ZXN0SUQsXG4gICAgICB2YWx1ZVxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgcHJvcHNDb21tb24gPSB7XG4gICAgICByZWY6ICdpbnB1dCcsXG4gICAgICAnYXJpYS1sYWJlbCc6IGFjY2Vzc2liaWxpdHlMYWJlbCxcbiAgICAgIGF1dG9Db21wbGV0ZTogYXV0b0NvbXBsZXRlICYmICdvbicsXG4gICAgICBhdXRvRm9jdXMsXG4gICAgICBkZWZhdWx0VmFsdWUsXG4gICAgICBtYXhMZW5ndGgsXG4gICAgICBvbkJsdXI6IG9uQmx1ciAmJiB0aGlzLl9vbkJsdXIsXG4gICAgICBvbkNoYW5nZTogKG9uQ2hhbmdlIHx8IG9uQ2hhbmdlVGV4dCkgJiYgdGhpcy5fb25DaGFuZ2UsXG4gICAgICBvbkZvY3VzOiB0aGlzLl9vbkZvY3VzLFxuICAgICAgb25TZWxlY3Q6IG9uU2VsZWN0aW9uQ2hhbmdlICYmIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLFxuICAgICAgcGxhY2Vob2xkZXIsXG4gICAgICByZWFkT25seTogIWVkaXRhYmxlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgLi4uc3R5bGVzLmluaXRpYWwsXG4gICAgICAgIC4uLnN0eWxlXG4gICAgICB9LFxuICAgICAgdGVzdElELFxuICAgICAgdmFsdWUsXG4gICAgICBvbktleURvd24sXG4gICAgICBvbktleVVwLFxuICAgICAgb25LZXlQcmVzc1xuICAgIH07XG5cbiAgICBsZXQgaW5wdXQ7XG4gICAgaWYgKG11bHRpbGluZSkge1xuICAgICAgY29uc3QgcHJvcHNNdWx0aWxpbmUgPSB7XG4gICAgICAgIC4uLnByb3BzQ29tbW9uLFxuICAgICAgICBtYXhSb3dzOiBtYXhOdW1iZXJPZkxpbmVzIHx8IG51bWJlck9mTGluZXMsXG4gICAgICAgIG1pblJvd3M6IG51bWJlck9mTGluZXNcbiAgICAgIH07XG5cbiAgICAgIGlucHV0ID0gPHRleHRhcmVhIHsuLi5wcm9wc011bHRpbGluZX0gLz47XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBsZXQgdHlwZSA9IHR5cGVNYXBba2V5Ym9hcmRUeXBlXTtcblxuICAgICAgaWYgKHBhc3N3b3JkIHx8IHNlY3VyZVRleHRFbnRyeSkge1xuICAgICAgICB0eXBlID0gJ3Bhc3N3b3JkJztcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHNTaW5nbGVsaW5lID0ge1xuICAgICAgICAuLi5wcm9wc0NvbW1vbixcbiAgICAgICAgdHlwZVxuICAgICAgfTtcblxuICAgICAgaW5wdXQgPSA8aW5wdXQgey4uLnByb3BzU2luZ2xlbGluZX0gLz47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxWaWV3PlxuICAgICAgICAgIHtpbnB1dH1cbiAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgPC9WaWV3PlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgfVxufTtcblxuY29uc3Qgc3R5bGVzID0ge1xuICBpbml0aWFsOiB7XG4gICAgYXBwZWFyYW5jZTogJ25vbmUnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICBib3JkZXJDb2xvcjogJ2JsYWNrJyxcbiAgICBib3JkZXJXaWR0aDogMCxcbiAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcbiAgICBjb2xvcjogJ2luaGVyaXQnLFxuICAgIGZvbnQ6ICdpbmhlcml0JyxcbiAgICBwYWRkaW5nOiAwLFxuICAgIGhlaWdodDogMzAsIC8vIGRlZmF1bHQgaGVpZ2h0XG4gIH1cbn07XG5cbmF1dG9iaW5kKFRleHRJbnB1dCk7XG5cblRleHRJbnB1dC5pc1JlYWN0TmF0aXZlQ29tcG9uZW50ID0gdHJ1ZTtcblxuZXhwb3J0IGRlZmF1bHQgVGV4dElucHV0O1xuIl19