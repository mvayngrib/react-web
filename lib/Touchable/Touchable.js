







'use strict';

var _TouchEventUtils=require('fbjs/lib/TouchEventUtils');var _TouchEventUtils2=_interopRequireDefault(_TouchEventUtils);
var _keyMirror=require('fbjs/lib/keyMirror');var _keyMirror2=_interopRequireDefault(_keyMirror);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

























































































var States=(0,_keyMirror2.default)({
NOT_RESPONDER:null,
RESPONDER_INACTIVE_PRESS_IN:null,
RESPONDER_INACTIVE_PRESS_OUT:null,
RESPONDER_ACTIVE_PRESS_IN:null,
RESPONDER_ACTIVE_PRESS_OUT:null,
RESPONDER_ACTIVE_LONG_PRESS_IN:null,
RESPONDER_ACTIVE_LONG_PRESS_OUT:null,
ERROR:null});





var IsActive={
RESPONDER_ACTIVE_PRESS_OUT:true,
RESPONDER_ACTIVE_PRESS_IN:true};






var IsPressingIn={
RESPONDER_INACTIVE_PRESS_IN:true,
RESPONDER_ACTIVE_PRESS_IN:true,
RESPONDER_ACTIVE_LONG_PRESS_IN:true};


var IsLongPressingIn={
RESPONDER_ACTIVE_LONG_PRESS_IN:true};





var Signals=(0,_keyMirror2.default)({
DELAY:null,
RESPONDER_GRANT:null,
RESPONDER_RELEASE:null,
RESPONDER_TERMINATED:null,
ENTER_PRESS_RECT:null,
LEAVE_PRESS_RECT:null,
LONG_PRESS_DETECTED:null});




var Transitions={
NOT_RESPONDER:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.RESPONDER_INACTIVE_PRESS_IN,
RESPONDER_RELEASE:States.ERROR,
RESPONDER_TERMINATED:States.ERROR,
ENTER_PRESS_RECT:States.ERROR,
LEAVE_PRESS_RECT:States.ERROR,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_INACTIVE_PRESS_IN:{
DELAY:States.RESPONDER_ACTIVE_PRESS_IN,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_INACTIVE_PRESS_OUT:{
DELAY:States.RESPONDER_ACTIVE_PRESS_OUT,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_ACTIVE_PRESS_IN:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.RESPONDER_ACTIVE_LONG_PRESS_IN},

RESPONDER_ACTIVE_PRESS_OUT:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_ACTIVE_LONG_PRESS_IN:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
LONG_PRESS_DETECTED:States.RESPONDER_ACTIVE_LONG_PRESS_IN},

RESPONDER_ACTIVE_LONG_PRESS_OUT:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

error:{
DELAY:States.NOT_RESPONDER,
RESPONDER_GRANT:States.RESPONDER_INACTIVE_PRESS_IN,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.NOT_RESPONDER,
LEAVE_PRESS_RECT:States.NOT_RESPONDER,
LONG_PRESS_DETECTED:States.NOT_RESPONDER}};






var HIGHLIGHT_DELAY_MS=130;

var PRESS_EXPAND_PX=20;

var LONG_PRESS_THRESHOLD=500;

var LONG_PRESS_DELAY_MS=LONG_PRESS_THRESHOLD-HIGHLIGHT_DELAY_MS;

var LONG_PRESS_ALLOWED_MOVEMENT=10;



































































var TouchableMixin={







touchableGetInitialState:function touchableGetInitialState(){
return{
touchable:{
touchState:undefined,
responderID:null}};


},





touchableHandleResponderTerminationRequest:function touchableHandleResponderTerminationRequest(){
return!this.props.rejectResponderTermination;
},




touchableHandleStartShouldSetResponder:function touchableHandleStartShouldSetResponder(){
return true;
},




touchableLongPressCancelsPress:function touchableLongPressCancelsPress(){
return true;
},







touchableHandleResponderGrant:function touchableHandleResponderGrant(e,dispatchID){



e.persist();

this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout);
this.pressOutDelayTimeout=null;

this.state.touchable.touchState=States.NOT_RESPONDER;
this.state.touchable.responderID=dispatchID;
this._receiveSignal(Signals.RESPONDER_GRANT,e);
var delayMS=
this.touchableGetHighlightDelayMS!==undefined?
Math.max(this.touchableGetHighlightDelayMS(),0):HIGHLIGHT_DELAY_MS;
delayMS=isNaN(delayMS)?HIGHLIGHT_DELAY_MS:delayMS;
if(delayMS!==0){
this.touchableDelayTimeout=setTimeout(
this._handleDelay.bind(this,e),
delayMS);

}else{
this._handleDelay(e);
}

var longDelayMS=
this.touchableGetLongPressDelayMS!==undefined?
Math.max(this.touchableGetLongPressDelayMS(),10):
LONG_PRESS_DELAY_MS;
longDelayMS=isNaN(longDelayMS)?LONG_PRESS_DELAY_MS:longDelayMS;
this.longPressDelayTimeout=setTimeout(
this._handleLongDelay.bind(this,e),
longDelayMS+delayMS);

},




touchableHandleResponderRelease:function touchableHandleResponderRelease(e){
this._receiveSignal(Signals.RESPONDER_RELEASE,e);
},




touchableHandleResponderTerminate:function touchableHandleResponderTerminate(e){
this._receiveSignal(Signals.RESPONDER_TERMINATED,e);
},




touchableHandleResponderMove:function touchableHandleResponderMove(e){


if(this.state.touchable.touchState===States.RESPONDER_INACTIVE_PRESS_IN){
return;
}


if(!this.state.touchable.positionOnActivate){
return;
}

var positionOnActivate=this.state.touchable.positionOnActivate;
var dimensionsOnActivate=this.state.touchable.dimensionsOnActivate;
var pressRectOffset=this.touchableGetPressRectOffset?
this.touchableGetPressRectOffset():null;
var pressExpandLeft=
pressRectOffset.left!=null?pressRectOffset.left:PRESS_EXPAND_PX;
var pressExpandTop=
pressRectOffset.top!=null?pressRectOffset.top:PRESS_EXPAND_PX;
var pressExpandRight=
pressRectOffset.right!=null?pressRectOffset.right:
PRESS_EXPAND_PX;
var pressExpandBottom=
pressRectOffset.bottom!=null?pressRectOffset.bottom:
PRESS_EXPAND_PX;

var touch=_TouchEventUtils2.default.extractSingleTouch(e.nativeEvent);
var pageX=touch&&touch.pageX;
var pageY=touch&&touch.pageY;

if(this.pressInLocation){
var movedDistance=this._getDistanceBetweenPoints(pageX,pageY,this.
pressInLocation.pageX,this.pressInLocation.pageY);
if(movedDistance>LONG_PRESS_ALLOWED_MOVEMENT){
this._cancelLongPressDelayTimeout();
}
}

var isTouchWithinActive=
pageX>positionOnActivate.left-pressExpandLeft&&
pageY>positionOnActivate.top-pressExpandTop&&
pageX<
positionOnActivate.left+
dimensionsOnActivate.width+
pressExpandRight&&
pageY<
positionOnActivate.top+
dimensionsOnActivate.height+
pressExpandBottom;
if(isTouchWithinActive){
this._receiveSignal(Signals.ENTER_PRESS_RECT,e);
}else{
this._cancelLongPressDelayTimeout();
this._receiveSignal(Signals.LEAVE_PRESS_RECT,e);
}
},















































































_remeasureMetricsOnActivation:function _remeasureMetricsOnActivation(e){





var target=e.nativeEvent.target;
this._handleQueryLayout(target.clientLeft,target.clientTop,target.clientWidth,
target.clientHeight,target.offsetLeft,target.offsetTop);
},

_handleQueryLayout:function _handleQueryLayout(l,t,w,h,globalX,globalY){
if(this.state.touchable.positionOnActivate){
this.state.touchable.positionOnActivate=null;
}

if(this.state.touchable.dimensionsOnActivate){
this.state.touchable.dimensionsOnActivate=null;
}

this.state.touchable.positionOnActivate={
left:globalX,
top:globalY};

this.state.touchable.dimensionsOnActivate={
width:w,
height:h};

},

_handleDelay:function _handleDelay(e){
this.touchableDelayTimeout=null;
this._receiveSignal(Signals.DELAY,e);
},

_handleLongDelay:function _handleLongDelay(e){
this.longPressDelayTimeout=null;
this._receiveSignal(Signals.LONG_PRESS_DETECTED,e);
},









_receiveSignal:function _receiveSignal(signal,e){
var curState=this.state.touchable.touchState;
if(!(Transitions[curState]&&Transitions[curState][signal])){
throw new Error(
'Unrecognized signal `'+signal+'` or state `'+curState+
'` for Touchable responder `'+this.state.touchable.responderID+
'`');

}
var nextState=Transitions[curState][signal];
if(nextState===States.ERROR){
throw new Error(
'Touchable cannot transition from `'+curState+'` to `'+
signal+
'` for responder `'+this.state.touchable.responderID+'`');

}
if(curState!==nextState){
this._performSideEffectsForTransition(curState,nextState,signal,e);
this.state.touchable.touchState=nextState;
}
},

_cancelLongPressDelayTimeout:function _cancelLongPressDelayTimeout(){
this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout);
this.longPressDelayTimeout=null;
},

_isHighlight:function _isHighlight(state){
return state===States.RESPONDER_ACTIVE_PRESS_IN||
state===States.RESPONDER_ACTIVE_LONG_PRESS_IN;
},

_savePressInLocation:function _savePressInLocation(e){
var touch=_TouchEventUtils2.default.extractSingleTouch(e.nativeEvent);
var pageX=touch&&touch.pageX;
var pageY=touch&&touch.pageY;
this.pressInLocation={
pageX:pageX,
pageY:pageY};

},

_getDistanceBetweenPoints:function _getDistanceBetweenPoints(aX,aY,bX,bY){
var deltaX=aX-bX;
var deltaY=aY-bY;
return Math.sqrt(deltaX*deltaX+deltaY*deltaY);
},












_performSideEffectsForTransition:function _performSideEffectsForTransition(curState,nextState,signal,e){
var curIsHighlight=this._isHighlight(curState);
var newIsHighlight=this._isHighlight(nextState);

var isFinalSignal=
signal===Signals.RESPONDER_TERMINATED||
signal===Signals.RESPONDER_RELEASE;

if(isFinalSignal){
this._cancelLongPressDelayTimeout();
}

if(!IsActive[curState]&&IsActive[nextState]){
this._remeasureMetricsOnActivation(e);
}

if(IsPressingIn[curState]&&signal===Signals.LONG_PRESS_DETECTED){
this.touchableHandleLongPress&&this.touchableHandleLongPress(e);
}

if(newIsHighlight&&!curIsHighlight){
this._savePressInLocation(e);
this.touchableHandleActivePressIn&&this.touchableHandleActivePressIn(
e);
}else if(!newIsHighlight&&curIsHighlight&&this.touchableHandleActivePressOut){
if(this.touchableGetPressOutDelayMS&&this.touchableGetPressOutDelayMS()){
this.pressOutDelayTimeout=this.setTimeout(function(){
this.touchableHandleActivePressOut(e);
},this.touchableGetPressOutDelayMS());
}else{
this.touchableHandleActivePressOut(e);
}
}

if(IsPressingIn[curState]&&signal===Signals.RESPONDER_RELEASE){
var hasLongPressHandler=!!this.props.onLongPress;
var pressIsLongButStillCallOnPress=
IsLongPressingIn[curState]&&(
!hasLongPressHandler||
!this.touchableLongPressCancelsPress());


var shouldInvokePress=!IsLongPressingIn[curState]||
pressIsLongButStillCallOnPress;
if(shouldInvokePress&&this.touchableHandlePress){
this.touchableHandlePress(e);
}
}

this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout);
this.touchableDelayTimeout=null;
}};



var Touchable={
Mixin:TouchableMixin};


module.exports=Touchable;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJTdGF0ZXMiLCJOT1RfUkVTUE9OREVSIiwiUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOIiwiUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCIsIlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQiLCJFUlJPUiIsIklzQWN0aXZlIiwiSXNQcmVzc2luZ0luIiwiSXNMb25nUHJlc3NpbmdJbiIsIlNpZ25hbHMiLCJERUxBWSIsIlJFU1BPTkRFUl9HUkFOVCIsIlJFU1BPTkRFUl9SRUxFQVNFIiwiUkVTUE9OREVSX1RFUk1JTkFURUQiLCJFTlRFUl9QUkVTU19SRUNUIiwiTEVBVkVfUFJFU1NfUkVDVCIsIkxPTkdfUFJFU1NfREVURUNURUQiLCJUcmFuc2l0aW9ucyIsImVycm9yIiwiSElHSExJR0hUX0RFTEFZX01TIiwiUFJFU1NfRVhQQU5EX1BYIiwiTE9OR19QUkVTU19USFJFU0hPTEQiLCJMT05HX1BSRVNTX0RFTEFZX01TIiwiTE9OR19QUkVTU19BTExPV0VEX01PVkVNRU5UIiwiVG91Y2hhYmxlTWl4aW4iLCJ0b3VjaGFibGVHZXRJbml0aWFsU3RhdGUiLCJ0b3VjaGFibGUiLCJ0b3VjaFN0YXRlIiwidW5kZWZpbmVkIiwicmVzcG9uZGVySUQiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJwcm9wcyIsInJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uIiwidG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3MiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCIsImUiLCJkaXNwYXRjaElEIiwicGVyc2lzdCIsInByZXNzT3V0RGVsYXlUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic3RhdGUiLCJfcmVjZWl2ZVNpZ25hbCIsImRlbGF5TVMiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwiTWF0aCIsIm1heCIsImlzTmFOIiwidG91Y2hhYmxlRGVsYXlUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9oYW5kbGVEZWxheSIsImJpbmQiLCJsb25nRGVsYXlNUyIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJsb25nUHJlc3NEZWxheVRpbWVvdXQiLCJfaGFuZGxlTG9uZ0RlbGF5IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJwb3NpdGlvbk9uQWN0aXZhdGUiLCJkaW1lbnNpb25zT25BY3RpdmF0ZSIsInByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInByZXNzRXhwYW5kTGVmdCIsImxlZnQiLCJwcmVzc0V4cGFuZFRvcCIsInRvcCIsInByZXNzRXhwYW5kUmlnaHQiLCJyaWdodCIsInByZXNzRXhwYW5kQm90dG9tIiwiYm90dG9tIiwidG91Y2giLCJleHRyYWN0U2luZ2xlVG91Y2giLCJuYXRpdmVFdmVudCIsInBhZ2VYIiwicGFnZVkiLCJwcmVzc0luTG9jYXRpb24iLCJtb3ZlZERpc3RhbmNlIiwiX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyIsIl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQiLCJpc1RvdWNoV2l0aGluQWN0aXZlIiwid2lkdGgiLCJoZWlnaHQiLCJfcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbiIsInRhcmdldCIsIl9oYW5kbGVRdWVyeUxheW91dCIsImNsaWVudExlZnQiLCJjbGllbnRUb3AiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJsIiwidCIsInciLCJoIiwiZ2xvYmFsWCIsImdsb2JhbFkiLCJzaWduYWwiLCJjdXJTdGF0ZSIsIkVycm9yIiwibmV4dFN0YXRlIiwiX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb24iLCJfaXNIaWdobGlnaHQiLCJfc2F2ZVByZXNzSW5Mb2NhdGlvbiIsImFYIiwiYVkiLCJiWCIsImJZIiwiZGVsdGFYIiwiZGVsdGFZIiwic3FydCIsImN1cklzSGlnaGxpZ2h0IiwibmV3SXNIaWdobGlnaHQiLCJpc0ZpbmFsU2lnbmFsIiwidG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0IiwidG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TIiwiaGFzTG9uZ1ByZXNzSGFuZGxlciIsIm9uTG9uZ1ByZXNzIiwicHJlc3NJc0xvbmdCdXRTdGlsbENhbGxPblByZXNzIiwic2hvdWxkSW52b2tlUHJlc3MiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsIlRvdWNoYWJsZSIsIk1peGluIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFRQTs7QUFFQSx5RDtBQUNBLDZDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwRkEsR0FBSUEsUUFBUyx3QkFBVTtBQUNyQkMsY0FBZSxJQURNO0FBRXJCQyw0QkFBNkIsSUFGUjtBQUdyQkMsNkJBQThCLElBSFQ7QUFJckJDLDBCQUEyQixJQUpOO0FBS3JCQywyQkFBNEIsSUFMUDtBQU1yQkMsK0JBQWdDLElBTlg7QUFPckJDLGdDQUFpQyxJQVBaO0FBUXJCQyxNQUFPLElBUmMsQ0FBVixDQUFiOzs7Ozs7QUFjQSxHQUFJQyxVQUFXO0FBQ2JKLDJCQUE0QixJQURmO0FBRWJELDBCQUEyQixJQUZkLENBQWY7Ozs7Ozs7QUFTQSxH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LENBQWlCSCxTQUFqQiIsImZpbGUiOiJUb3VjaGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCBGYWNlYm9vaywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RUb3VjaGFibGVcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgVG91Y2hFdmVudFV0aWxzIGZyb20gJ2ZianMvbGliL1RvdWNoRXZlbnRVdGlscyc7XG5pbXBvcnQga2V5TWlycm9yIGZyb20gJ2ZianMvbGliL2tleU1pcnJvcic7XG5cbi8qKlxuICogYFRvdWNoYWJsZWA6IFRhcHMgZG9uZSByaWdodC5cbiAqXG4gKiBZb3UgaG9vayB5b3VyIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgZXZlbnRzIGludG8gYFRvdWNoYWJsZWAuIGBUb3VjaGFibGVgXG4gKiB3aWxsIG1lYXN1cmUgdGltZS9nZW9tZXRyeSBhbmQgdGVsbHMgeW91IHdoZW4gdG8gZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci5cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09IFRvdWNoYWJsZSBUdXRvcmlhbCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBUaGUgYFRvdWNoYWJsZWAgbWl4aW4gaGVscHMgeW91IGhhbmRsZSB0aGUgXCJwcmVzc1wiIGludGVyYWN0aW9uLiBJdCBhbmFseXplc1xuICogdGhlIGdlb21ldHJ5IG9mIGVsZW1lbnRzLCBhbmQgb2JzZXJ2ZXMgd2hlbiBhbm90aGVyIHJlc3BvbmRlciAoc2Nyb2xsIHZpZXdcbiAqIGV0YykgaGFzIHN0b2xlbiB0aGUgdG91Y2ggbG9jay4gSXQgbm90aWZpZXMgeW91ciBjb21wb25lbnQgd2hlbiBpdCBzaG91bGRcbiAqIGdpdmUgZmVlZGJhY2sgdG8gdGhlIHVzZXIuIChib3VuY2luZy9oaWdobGlnaHRpbmcvdW5oaWdobGlnaHRpbmcpLlxuICpcbiAqIC0gV2hlbiBhIHRvdWNoIHdhcyBhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGRlYWN0aXZhdGVkICh0eXBpY2FsbHkgeW91IHVuaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIFwicHJlc3NlZFwiIC0gYSB0b3VjaCBlbmRlZCB3aGlsZSBzdGlsbCB3aXRoaW4gdGhlIGdlb21ldHJ5XG4gKiAgIG9mIHRoZSBlbGVtZW50LCBhbmQgbm8gb3RoZXIgZWxlbWVudCAobGlrZSBzY3JvbGxlcikgaGFzIFwic3RvbGVuXCIgdG91Y2hcbiAqICAgbG9jayAoXCJyZXNwb25kZXJcIikgKFR5cGljYWxseSB5b3UgYm91bmNlIHRoZSBlbGVtZW50KS5cbiAqXG4gKiBBIGdvb2QgdGFwIGludGVyYWN0aW9uIGlzbid0IGFzIHNpbXBsZSBhcyB5b3UgbWlnaHQgdGhpbmsuIFRoZXJlIHNob3VsZCBiZSBhXG4gKiBzbGlnaHQgZGVsYXkgYmVmb3JlIHNob3dpbmcgYSBoaWdobGlnaHQgd2hlbiBzdGFydGluZyBhIHRvdWNoLiBJZiBhXG4gKiBzdWJzZXF1ZW50IHRvdWNoIG1vdmUgZXhjZWVkcyB0aGUgYm91bmRhcnkgb2YgdGhlIGVsZW1lbWVudCwgaXQgc2hvdWxkXG4gKiB1bmhpZ2hsaWdodCwgYnV0IGlmIHRoYXQgc2FtZSB0b3VjaCBpcyBicm91Z2h0IGJhY2sgd2l0aGluIHRoZSBib3VuZGFyeSwgaXRcbiAqIHNob3VsZCByZWhpZ2hsaWdodCBhZ2Fpbi4gQSB0b3VjaCBjYW4gbW92ZSBpbiBhbmQgb3V0IG9mIHRoYXQgYm91bmRhcnlcbiAqIHNldmVyYWwgdGltZXMsIGVhY2ggdGltZSB0b2dnbGluZyBoaWdobGlnaHRpbmcsIGJ1dCBhIFwicHJlc3NcIiBpcyBvbmx5XG4gKiB0cmlnZ2VyZWQgaWYgdGhhdCB0b3VjaCBlbmRzIHdoaWxlIHdpdGhpbiB0aGUgZWxlbWVudCdzIGJvdW5kYXJ5IGFuZCBub1xuICogc2Nyb2xsZXIgKG9yIGFueXRoaW5nIGVsc2UpIGhhcyBzdG9sZW4gdGhlIGxvY2sgb24gdG91Y2hlcy5cbiAqXG4gKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBjb21wb25lbnQgdGhhdCBoYW5kbGVzIGludGVyYWN0aW9uIHVzaW5nIHRoZVxuICogYFRvdWNoYWJsZWAgbWl4aW4sIGRvIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogLSBJbml0aWFsaXplIHRoZSBgVG91Y2hhYmxlYCBzdGF0ZS5cbiAqXG4gKiAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIG1lcmdlKHRoaXMudG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlKCksIHlvdXJDb21wb25lbnRTdGF0ZSk7XG4gKiAgIH1cbiAqXG4gKiAtIENob29zZSB0aGUgcmVuZGVyZWQgY29tcG9uZW50IHdobydzIHRvdWNoZXMgc2hvdWxkIHN0YXJ0IHRoZSBpbnRlcmFjdGl2ZVxuICogICBzZXF1ZW5jZS4gT24gdGhhdCByZW5kZXJlZCBub2RlLCBmb3J3YXJkIGFsbCBgVG91Y2hhYmxlYCByZXNwb25kZXJcbiAqICAgaGFuZGxlcnMuIFlvdSBjYW4gY2hvb3NlIGFueSByZW5kZXJlZCBub2RlIHlvdSBsaWtlLiBDaG9vc2UgYSBub2RlIHdobydzXG4gKiAgIGhpdCB0YXJnZXQgeW91J2QgbGlrZSB0byBpbnN0aWdhdGUgdGhlIGludGVyYWN0aW9uIHNlcXVlbmNlOlxuICpcbiAqICAgLy8gSW4gcmVuZGVyIGZ1bmN0aW9uOlxuICogICByZXR1cm4gKFxuICogICAgIDxkaXZcbiAqICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXI9e3RoaXMudG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXJ9XG4gKiAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3R9XG4gKiAgICAgICBvblJlc3BvbmRlckdyYW50PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50fVxuICogICAgICAgb25SZXNwb25kZXJNb3ZlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmV9XG4gKiAgICAgICBvblJlc3BvbmRlclJlbGVhc2U9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZX1cbiAqICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZX0+XG4gKiAgICAgICA8ZGl2PlxuICogICAgICAgICBFdmVuIHRob3VnaCB0aGUgaGl0IGRldGVjdGlvbi9pbnRlcmFjdGlvbnMgYXJlIHRyaWdnZXJlZCBieSB0aGVcbiAqICAgICAgICAgd3JhcHBpbmcgKHR5cGljYWxseSBsYXJnZXIpIG5vZGUsIHdlIHVzdWFsbHkgZW5kIHVwIGltcGxlbWVudGluZ1xuICogICAgICAgICBjdXN0b20gbG9naWMgdGhhdCBoaWdobGlnaHRzIHRoaXMgaW5uZXIgb25lLlxuICogICAgICAgPC9kaXY+XG4gKiAgICAgPC9kaXY+XG4gKiAgICk7XG4gKlxuICogLSBZb3UgbWF5IHNldCB1cCB5b3VyIG93biBoYW5kbGVycyBmb3IgZWFjaCBvZiB0aGVzZSBldmVudHMsIHNvIGxvbmcgYXMgeW91XG4gKiAgIGFsc28gaW52b2tlIHRoZSBgdG91Y2hhYmxlKmAgaGFuZGxlcnMgaW5zaWRlIG9mIHlvdXIgY3VzdG9tIGhhbmRsZXIuXG4gKlxuICogLSBJbXBsZW1lbnQgdGhlIGhhbmRsZXJzIG9uIHlvdXIgY29tcG9uZW50IGNsYXNzIGluIG9yZGVyIHRvIHByb3ZpZGVcbiAqICAgZmVlZGJhY2sgdG8gdGhlIHVzZXIuIFNlZSBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9mIHRoZXNlIGNsYXNzIG1ldGhvZHNcbiAqICAgdGhhdCB5b3Ugc2hvdWxkIGltcGxlbWVudC5cbiAqXG4gKiAgIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbigpIHtcbiAqICAgICAgdGhpcy5wZXJmb3JtQm91bmNlQW5pbWF0aW9uKCk7ICAvLyBvciB3aGF0ZXZlciB5b3Ugd2FudCB0byBkby5cbiAqICAgfSxcbiAqICAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbjogZnVuY3Rpb24oKSB7XG4gKiAgICAgdGhpcy5iZWdpbkhpZ2hsaWdodGluZyguLi4pOyAgLy8gV2hhdGV2ZXIgeW91IGxpa2UgdG8gY29udmV5IGFjdGl2YXRpb25cbiAqICAgfSxcbiAqICAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHRoaXMuZW5kSGlnaGxpZ2h0aW5nKC4uLik7ICAvLyBXaGF0ZXZlciB5b3UgbGlrZSB0byBjb252ZXkgZGVhY3RpdmF0aW9uXG4gKiAgIH0sXG4gKlxuICogLSBUaGVyZSBhcmUgbW9yZSBhZHZhbmNlZCBtZXRob2RzIHlvdSBjYW4gaW1wbGVtZW50IChzZWUgZG9jdW1lbnRhdGlvbiBiZWxvdyk6XG4gKiAgIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiAyMDtcbiAqICAgfVxuICogICAvLyBJbiBwcmFjdGljZSwgKmFsd2F5cyogdXNlIGEgcHJlZGVjbGFyZWQgY29uc3RhbnQgKGNvbnNlcnZlIG1lbW9yeSkuXG4gKiAgIHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldDogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHt0b3A6IDIwLCBsZWZ0OiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDEwMH07XG4gKiAgIH1cbiAqL1xuXG4vKipcbiAqIFRvdWNoYWJsZSBzdGF0ZXMuXG4gKi9cbnZhciBTdGF0ZXMgPSBrZXlNaXJyb3Ioe1xuICBOT1RfUkVTUE9OREVSOiBudWxsLCAvLyBOb3QgdGhlIHJlc3BvbmRlclxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgaW5hY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUOiBudWxsLCAvLyBSZXNwb25kZXIsIGluYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBpbiB0aGUgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIEVSUk9SOiBudWxsXG59KTtcblxuLyoqXG4gKiBRdWljayBsb29rdXAgbWFwIGZvciBzdGF0ZXMgdGhhdCBhcmUgY29uc2lkZXJlZCB0byBiZSBcImFjdGl2ZVwiXG4gKi9cbnZhciBJc0FjdGl2ZSA9IHtcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQ6IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHRydWVcbn07XG5cbi8qKlxuICogUXVpY2sgbG9va3VwIGZvciBzdGF0ZXMgdGhhdCBhcmUgY29uc2lkZXJlZCB0byBiZSBcInByZXNzaW5nXCIgYW5kIGFyZVxuICogdGhlcmVmb3JlIGVsaWdpYmxlIHRvIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgaWYgdGhlIHByZXNzIHN0b3BzLlxuICovXG52YXIgSXNQcmVzc2luZ0luID0ge1xuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogdHJ1ZSxcbn07XG5cbnZhciBJc0xvbmdQcmVzc2luZ0luID0ge1xuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHRydWUsXG59O1xuXG4vKipcbiAqIElucHV0cyB0byB0aGUgc3RhdGUgbWFjaGluZS5cbiAqL1xudmFyIFNpZ25hbHMgPSBrZXlNaXJyb3Ioe1xuICBERUxBWTogbnVsbCxcbiAgUkVTUE9OREVSX0dSQU5UOiBudWxsLFxuICBSRVNQT05ERVJfUkVMRUFTRTogbnVsbCxcbiAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IG51bGwsXG4gIEVOVEVSX1BSRVNTX1JFQ1Q6IG51bGwsXG4gIExFQVZFX1BSRVNTX1JFQ1Q6IG51bGwsXG4gIExPTkdfUFJFU1NfREVURUNURUQ6IG51bGwsXG59KTtcbi8qKlxuICogTWFwcGluZyBmcm9tIFN0YXRlcyB4IFNpZ25hbHMgPT4gU3RhdGVzXG4gKi9cbnZhciBUcmFuc2l0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5FUlJPUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuRVJST1IsXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLkVSUk9SLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIGVycm9yOiB7XG4gICAgREVMQVk6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICB9XG59O1xuXG4vLyA9PT09IFR5cGljYWwgQ29uc3RhbnRzIGZvciBpbnRlZ3JhdGluZyBpbnRvIFVJIGNvbXBvbmVudHMgPT09PVxuLy8gdmFyIEhJVF9FWFBBTkRfUFggPSAyMDtcbi8vIHZhciBISVRfVkVSVF9PRkZTRVRfUFggPSAxMDtcbnZhciBISUdITElHSFRfREVMQVlfTVMgPSAxMzA7XG5cbnZhciBQUkVTU19FWFBBTkRfUFggPSAyMDtcblxudmFyIExPTkdfUFJFU1NfVEhSRVNIT0xEID0gNTAwO1xuXG52YXIgTE9OR19QUkVTU19ERUxBWV9NUyA9IExPTkdfUFJFU1NfVEhSRVNIT0xEIC0gSElHSExJR0hUX0RFTEFZX01TO1xuXG52YXIgTE9OR19QUkVTU19BTExPV0VEX01PVkVNRU5UID0gMTA7XG5cbi8vIERlZmF1bHQgYW1vdW50IFwiYWN0aXZlXCIgcmVnaW9uIHByb3RydWRlcyBiZXlvbmQgYm94XG5cbi8qKlxuICogQnkgY29udmVudGlvbiwgbWV0aG9kcyBwcmVmaXhlZCB3aXRoIHVuZGVyc2NvcmVzIGFyZSBtZWFudCB0byBiZSBAcHJpdmF0ZSxcbiAqIGFuZCBub3QgQHByb3RlY3RlZC4gTWl4ZXJzIHNob3VsZG4ndCBhY2Nlc3MgdGhlbSAtIG5vdCBldmVuIHRvIHByb3ZpZGUgdGhlbVxuICogYXMgY2FsbGJhY2sgaGFuZGxlcnMuXG4gKlxuICpcbiAqID09PT09PT09PT0gR2VvbWV0cnkgPT09PT09PT09XG4gKiBgVG91Y2hhYmxlYCBvbmx5IGFzc3VtZXMgdGhhdCB0aGVyZSBleGlzdHMgYSBgSGl0UmVjdGAgbm9kZS4gVGhlIGBQcmVzc1JlY3RgXG4gKiBpcyBhbiBhYnN0cmFjdCBib3ggdGhhdCBpcyBleHRlbmRlZCBiZXlvbmQgdGhlIGBIaXRSZWN0YC5cbiAqXG4gKiAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogIHwgICAgICAgICAgICAgICAgICAgICAgICAgIHwgLSBcIlN0YXJ0XCIgZXZlbnRzIGluIGBIaXRSZWN0YCBjYXVzZSBgSGl0UmVjdGBcbiAqICB8ICArLS0tLS0tLS0tLS0tLS0tLS0tLS0rICB8ICAgdG8gYmVjb21lIHRoZSByZXNwb25kZXIuXG4gKiAgfCAgfCAgKy0tLS0tLS0tLS0tLS0tKyAgfCAgfCAtIGBIaXRSZWN0YCBpcyB0eXBpY2FsbHkgZXhwYW5kZWQgYXJvdW5kXG4gKiAgfCAgfCAgfCAgICAgICAgICAgICAgfCAgfCAgfCAgIHRoZSBgVmlzdWFsUmVjdGAsIGJ1dCBzaGlmdGVkIGRvd253YXJkLlxuICogIHwgIHwgIHwgIFZpc3VhbFJlY3QgIHwgIHwgIHwgLSBBZnRlciBwcmVzc2luZyBkb3duLCBhZnRlciBzb21lIGRlbGF5LFxuICogIHwgIHwgIHwgICAgICAgICAgICAgIHwgIHwgIHwgICBhbmQgYmVmb3JlIGxldHRpbmcgdXAsIHRoZSBWaXN1YWwgUmVhY3RcbiAqICB8ICB8ICArLS0tLS0tLS0tLS0tLS0rICB8ICB8ICAgd2lsbCBiZWNvbWUgXCJhY3RpdmVcIi4gVGhpcyBtYWtlcyBpdCBlbGlnaWJsZVxuICogIHwgIHwgICAgIEhpdFJlY3QgICAgICAgIHwgIHwgICBmb3IgYmVpbmcgaGlnaGxpZ2h0ZWQgKHNvIGxvbmcgYXMgdGhlXG4gKiAgfCAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgfCAgIHByZXNzIHJlbWFpbnMgaW4gdGhlIGBQcmVzc1JlY3RgKS5cbiAqICB8ICAgICAgICBQcmVzc1JlY3QgICAgIG8gICB8XG4gKiAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tK1xuICogICAgICAgICAgIE91dCBSZWdpb24gICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tKyBUaGlzIGdhcCBiZXR3ZWVuIHRoZSBgSGl0UmVjdGAgYW5kXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBQcmVzc1JlY3RgIGFsbG93cyBhIHRvdWNoIHRvIG1vdmUgZmFyIGF3YXlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSB0aGUgb3JpZ2luYWwgaGl0IHJlY3QsIGFuZCByZW1haW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWQsIGFuZCBlbGlnaWJsZSBmb3IgYSBcIlByZXNzXCIuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEN1c3RvbWl6ZSB0aGlzIHZpYVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0KClgLlxuICpcbiAqXG4gKlxuICogPT09PT09PSBTdGF0ZSBNYWNoaW5lID09PT09PT1cbiAqXG4gKiArLS0tLS0tLS0tLS0tLSsgPC0tLSsgUkVTUE9OREVSX1JFTEVBU0VcbiAqIHxOT1RfUkVTUE9OREVSfFxuICogKy0tLS0tLS0tLS0tLS0rIDwtLS0rIFJFU1BPTkRFUl9URVJNSU5BVEVEXG4gKiAgICAgK1xuICogICAgIHwgUkVTUE9OREVSX0dSQU5UIChIaXRSZWN0KVxuICogICAgIHZcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICBERUxBWSAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgVCArIERFTEFZICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogfFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTnwrLS0tLS0tLS0+fFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU58ICstLS0tLS0tLS0tLS0+IHxSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU58XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqICAgICArICAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgICAgICAgICAgXlxuICogICAgIHxMRUFWRV8gICAgICB8RU5URVJfICAgICAgICAgICAgICAgICAgIHxMRUFWRV8gICAgIHxFTlRFUl8gICAgICAgICAgICAgICAgICAgICAgICAgICB8TEVBVkVfICAgICB8RU5URVJfXG4gKiAgICAgfFBSRVNTX1JFQ1QgIHxQUkVTU19SRUNUICAgICAgICAgICAgICAgfFBSRVNTX1JFQ1QgfFBSRVNTX1JFQ1QgICAgICAgICAgICAgICAgICAgICAgIHxQUkVTU19SRUNUIHxQUkVTU19SRUNUXG4gKiAgICAgfCAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgIHxcbiAqICAgICB2ICAgICAgICAgICAgKyAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAgICAgICAgICAgK1xuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICBERUxBWSAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogfFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVR8Ky0tLS0tLS0+fFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUfCAgICAgICAgICAgICAgIHxSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUfFxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICpcbiAqIFQgKyBERUxBWSA9PiBMT05HX1BSRVNTX0RFTEFZX01TICsgREVMQVlcbiAqXG4gKiBOb3QgZHJhd24gYXJlIHRoZSBzaWRlIGVmZmVjdHMgb2YgZWFjaCB0cmFuc2l0aW9uLiBUaGUgbW9zdCBpbXBvcnRhbnQgc2lkZVxuICogZWZmZWN0IGlzIHRoZSBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIGFic3RyYWN0IG1ldGhvZCBpbnZvY2F0aW9uIHRoYXQgb2NjdXJzXG4gKiB3aGVuIGEgcmVzcG9uZGVyIGlzIHJlbGVhc2VkIHdoaWxlIGluIGVpdGhlciBvZiB0aGUgXCJQcmVzc1wiIHN0YXRlcy5cbiAqXG4gKiBUaGUgb3RoZXIgaW1wb3J0YW50IHNpZGUgZWZmZWN0cyBhcmUgdGhlIGhpZ2hsaWdodCBhYnN0cmFjdCBtZXRob2RcbiAqIGludm9jYXRpb25zIChpbnRlcm5hbCBjYWxsYmFja3MpIHRvIGJlIGltcGxlbWVudGVkIGJ5IHRoZSBtaXhlci5cbiAqXG4gKlxuICogQGxlbmRzIFRvdWNoYWJsZS5wcm90b3R5cGVcbiAqL1xudmFyIFRvdWNoYWJsZU1peGluID0ge1xuICAvKipcbiAgICogSXQncyBwcmVmZXIgdGhhdCBtaXhpbnMgZGV0ZXJtaW5lIHN0YXRlIGluIHRoaXMgd2F5LCBoYXZpbmcgdGhlIGNsYXNzXG4gICAqIGV4cGxpY2l0bHkgbWl4IHRoZSBzdGF0ZSBpbiB0aGUgb25lIGFuZCBvbmx5IGBnZXRJbml0aWFsU3RhdGVgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fSBTdGF0ZSBvYmplY3QgdG8gYmUgcGxhY2VkIGluc2lkZSBvZlxuICAgKiBgdGhpcy5zdGF0ZS50b3VjaGFibGVgLlxuICAgKi9cbiAgdG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG91Y2hhYmxlOiB7XG4gICAgICAgIHRvdWNoU3RhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVzcG9uZGVySUQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIC8vID09PT0gSG9va3MgdG8gR2VzdHVyZSBSZXNwb25kZXIgc3lzdGVtID09PT1cbiAgLyoqXG4gICAqIE11c3QgcmV0dXJuIHRydWUgaWYgZW1iZWRkZWQgaW4gYSBuYXRpdmUgcGxhdGZvcm0gc2Nyb2xsIHZpZXcuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogTXVzdCByZXR1cm4gdHJ1ZSB0byBzdGFydCB0aGUgcHJvY2VzcyBvZiBgVG91Y2hhYmxlYC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRydWUgdG8gY2FuY2VsIHByZXNzIG9uIGxvbmcgcHJlc3MuXG4gICAqL1xuICB0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3M6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlckdyYW50YCBldmVudC5cbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZSBTeW50aGV0aWMgZXZlbnQgZnJvbSBldmVudCBzeXN0ZW0uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaElEIElEIG9mIG5vZGUgdGhhdCBlIHdhcyBkaXNwYXRjaGVkIHRvLlxuICAgKlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQ6IGZ1bmN0aW9uKGUsIGRpc3BhdGNoSUQpIHtcbiAgICAvLyBTaW5jZSBlIGlzIHVzZWQgaW4gYSBjYWxsYmFjayBpbnZva2VkIG9uIGFub3RoZXIgZXZlbnQgbG9vcFxuICAgIC8vIChhcyBpbiBzZXRUaW1lb3V0IGV0YyksIHdlIG5lZWQgdG8gY2FsbCBlLnBlcnNpc3QoKSBvbiB0aGVcbiAgICAvLyBldmVudCB0byBtYWtlIHN1cmUgaXQgZG9lc24ndCBnZXQgcmV1c2VkIGluIHRoZSBldmVudCBvYmplY3QgcG9vbC5cbiAgICBlLnBlcnNpc3QoKTtcblxuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQpO1xuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBudWxsO1xuXG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IFN0YXRlcy5OT1RfUkVTUE9OREVSO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEID0gZGlzcGF0Y2hJRDtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX0dSQU5ULCBlKTtcbiAgICB2YXIgZGVsYXlNUyA9XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMgIT09IHVuZGVmaW5lZCA/XG4gICAgICBNYXRoLm1heCh0aGlzLnRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMoKSwgMCkgOiBISUdITElHSFRfREVMQVlfTVM7XG4gICAgZGVsYXlNUyA9IGlzTmFOKGRlbGF5TVMpID8gSElHSExJR0hUX0RFTEFZX01TIDogZGVsYXlNUztcbiAgICBpZiAoZGVsYXlNUyAhPT0gMCkge1xuICAgICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxheS5iaW5kKHRoaXMsIGUpLFxuICAgICAgICBkZWxheU1TXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxheShlKTtcbiAgICB9XG5cbiAgICB2YXIgbG9uZ0RlbGF5TVMgPVxuICAgICAgdGhpcy50b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TICE9PSB1bmRlZmluZWQgP1xuICAgICAgTWF0aC5tYXgodGhpcy50b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TKCksIDEwKSA6XG4gICAgICBMT05HX1BSRVNTX0RFTEFZX01TO1xuICAgIGxvbmdEZWxheU1TID0gaXNOYU4obG9uZ0RlbGF5TVMpID8gTE9OR19QUkVTU19ERUxBWV9NUyA6IGxvbmdEZWxheU1TO1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgIHRoaXMuX2hhbmRsZUxvbmdEZWxheS5iaW5kKHRoaXMsIGUpLFxuICAgICAgbG9uZ0RlbGF5TVMgKyBkZWxheU1TXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUGxhY2UgYXMgY2FsbGJhY2sgZm9yIGEgRE9NIGVsZW1lbnQncyBgb25SZXNwb25kZXJSZWxlYXNlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2U6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0UsIGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlclRlcm1pbmF0ZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGU6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURUQsIGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlck1vdmVgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZTogZnVuY3Rpb24oZSkge1xuICAgIC8vIE5vdCBlbm91Z2ggdGltZSBlbGFwc2VkIHlldCwgd2FpdCBmb3IgaGlnaGxpZ2h0IC1cbiAgICAvLyB0aGlzIGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbi5cbiAgICBpZiAodGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1lYXN1cmVtZW50IG1heSBub3QgaGF2ZSByZXR1cm5lZCB5ZXQuXG4gICAgaWYgKCF0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb25PbkFjdGl2YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlO1xuICAgIHZhciBkaW1lbnNpb25zT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlO1xuICAgIHZhciBwcmVzc1JlY3RPZmZzZXQgPSB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCA/XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCgpIDogbnVsbDtcbiAgICB2YXIgcHJlc3NFeHBhbmRMZWZ0ID1cbiAgICAgIHByZXNzUmVjdE9mZnNldC5sZWZ0ICE9IG51bGwgPyBwcmVzc1JlY3RPZmZzZXQubGVmdCA6IFBSRVNTX0VYUEFORF9QWDtcbiAgICB2YXIgcHJlc3NFeHBhbmRUb3AgPVxuICAgICAgcHJlc3NSZWN0T2Zmc2V0LnRvcCAhPSBudWxsID8gcHJlc3NSZWN0T2Zmc2V0LnRvcCA6IFBSRVNTX0VYUEFORF9QWDtcbiAgICB2YXIgcHJlc3NFeHBhbmRSaWdodCA9XG4gICAgICBwcmVzc1JlY3RPZmZzZXQucmlnaHQgIT0gbnVsbCA/IHByZXNzUmVjdE9mZnNldC5yaWdodCA6XG4gICAgICBQUkVTU19FWFBBTkRfUFg7XG4gICAgdmFyIHByZXNzRXhwYW5kQm90dG9tID1cbiAgICAgIHByZXNzUmVjdE9mZnNldC5ib3R0b20gIT0gbnVsbCA/IHByZXNzUmVjdE9mZnNldC5ib3R0b20gOlxuICAgICAgUFJFU1NfRVhQQU5EX1BYO1xuXG4gICAgdmFyIHRvdWNoID0gVG91Y2hFdmVudFV0aWxzLmV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICB2YXIgcGFnZVggPSB0b3VjaCAmJiB0b3VjaC5wYWdlWDtcbiAgICB2YXIgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcblxuICAgIGlmICh0aGlzLnByZXNzSW5Mb2NhdGlvbikge1xuICAgICAgdmFyIG1vdmVkRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHMocGFnZVgsIHBhZ2VZLCB0aGlzXG4gICAgICAgIC5wcmVzc0luTG9jYXRpb24ucGFnZVgsIHRoaXMucHJlc3NJbkxvY2F0aW9uLnBhZ2VZKTtcbiAgICAgIGlmIChtb3ZlZERpc3RhbmNlID4gTE9OR19QUkVTU19BTExPV0VEX01PVkVNRU5UKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpc1RvdWNoV2l0aGluQWN0aXZlID1cbiAgICAgIHBhZ2VYID4gcG9zaXRpb25PbkFjdGl2YXRlLmxlZnQgLSBwcmVzc0V4cGFuZExlZnQgJiZcbiAgICAgIHBhZ2VZID4gcG9zaXRpb25PbkFjdGl2YXRlLnRvcCAtIHByZXNzRXhwYW5kVG9wICYmXG4gICAgICBwYWdlWCA8XG4gICAgICBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCArXG4gICAgICBkaW1lbnNpb25zT25BY3RpdmF0ZS53aWR0aCArXG4gICAgICBwcmVzc0V4cGFuZFJpZ2h0ICYmXG4gICAgICBwYWdlWSA8XG4gICAgICBwb3NpdGlvbk9uQWN0aXZhdGUudG9wICtcbiAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLmhlaWdodCArXG4gICAgICBwcmVzc0V4cGFuZEJvdHRvbTtcbiAgICBpZiAoaXNUb3VjaFdpdGhpbkFjdGl2ZSkge1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkVOVEVSX1BSRVNTX1JFQ1QsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5MRUFWRV9QUkVTU19SRUNULCBlKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gPT09PSBBYnN0cmFjdCBBcHBsaWNhdGlvbiBDYWxsYmFja3MgPT09PVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gc2hvdWxkIGJlIGhpZ2hsaWdodGVkLiBNaXhlcnMgc2hvdWxkIGltcGxlbWVudCB0aGlzXG4gICAqIHRvIHZpc3VhbGx5IGRpc3Rpbmd1aXNoIHRoZSBgVmlzdWFsUmVjdGAgc28gdGhhdCB0aGUgdXNlciBrbm93cyB0aGF0XG4gICAqIHJlbGVhc2luZyBhIHRvdWNoIHdpbGwgcmVzdWx0IGluIGEgXCJzZWxlY3Rpb25cIiAoYW5hbG9nIHRvIGNsaWNrKS5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uLFxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIFwiYWN0aXZlXCIgKGluIHRoYXQgaXQgaXMgc3RpbGwgZWxpZ2libGUgdG8gYmVjb21lXG4gICAqIGEgXCJzZWxlY3RcIikgYnV0IHRoZSB0b3VjaCBoYXMgbGVmdCB0aGUgYFByZXNzUmVjdGAuIFVzdWFsbHkgdGhlIG1peGVyIHdpbGxcbiAgICogd2FudCB0byB1bmhpZ2hsaWdodCB0aGUgYFZpc3VhbFJlY3RgLiBJZiB0aGUgdXNlciAod2hpbGUgcHJlc3NpbmcpIG1vdmVzXG4gICAqIGJhY2sgaW50byB0aGUgYFByZXNzUmVjdGAgYHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW5gIHdpbGwgYmUgaW52b2tlZFxuICAgKiBhZ2FpbiBhbmQgdGhlIG1peGVyIHNob3VsZCBwcm9iYWJseSBoaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YCBhZ2Fpbi4gVGhpc1xuICAgKiBldmVudCB3aWxsIG5vdCBmaXJlIG9uIGFuIGB0b3VjaEVuZC9tb3VzZVVwYCBldmVudCwgb25seSBtb3ZlIGV2ZW50cyB3aGlsZVxuICAgKiB0aGUgdXNlciBpcyBkZXByZXNzaW5nIHRoZSBtb3VzZS90b3VjaC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIFwic2VsZWN0ZWRcIiAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGVpdGhlciBpbiB0aGUgc3RhdGVcbiAgICogYFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU5gIG9yIGBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU5gLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gaXMgbG9uZyBwcmVzc2VkIC0gbWVhbmluZyB0aGUgaW50ZXJhY3Rpb24gZW5kZWQgYnlcbiAgICogbGV0dGluZyB1cCB3aGlsZSB0aGUgaXRlbSB3YXMgaW4gYFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTmAuIElmXG4gICAqIGB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3NgIGlzICpub3QqIHByb3ZpZGVkLCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGxcbiAgICogYmUgY2FsbGVkIGFzIGl0IG5vcm1hbGx5IGlzLiBJZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyBwcm92aWRlZCwgYnlcbiAgICogZGVmYXVsdCBhbnkgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCBjYWxsYmFjayB3aWxsIG5vdCBiZSBpbnZva2VkLiBUb1xuICAgKiBvdmVycmlkZSB0aGlzIGRlZmF1bHQgYmVoYXZpb3IsIG92ZXJyaWRlIGB0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3NgXG4gICAqIHRvIHJldHVybiBmYWxzZS4gQXMgYSByZXN1bHQsIGB0b3VjaGFibGVIYW5kbGVQcmVzc2Agd2lsbCBiZSBjYWxsZWQgd2hlblxuICAgKiBsaWZ0aW5nIHVwLCBldmVuIGlmIGB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3NgIGhhcyBhbHNvIGJlZW4gY2FsbGVkLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIG1pbGxpcyB0byB3YWl0IGJlZm9yZSB0cmlnZ2VyaW5nIGEgaGlnaGxpZ2h0LlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFtb3VudCB0byBleHRlbmQgdGhlIGBIaXRSZWN0YCBpbnRvIHRoZSBgUHJlc3NSZWN0YC4gUG9zaXRpdmVcbiAgICogbnVtYmVycyBtZWFuIHRoZSBzaXplIGV4cGFuZHMgb3V0d2FyZHMuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uXG4gICAqL1xuXG5cblxuICAvLyA9PT09IEludGVybmFsIExvZ2ljID09PT1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIGBIaXRSZWN0YCBub2RlIG9uIGFjdGl2YXRpb24uIFRoZSBCb3VuZGluZyByZWN0YW5nbGUgaXMgd2l0aFxuICAgKiByZXNwZWN0IHRvIHZpZXdwb3J0IC0gbm90IHBhZ2UsIHNvIGFkZGluZyB0aGUgYHBhZ2VYT2Zmc2V0L3BhZ2VZT2Zmc2V0YFxuICAgKiBzaG91bGQgcmVzdWx0IGluIHBvaW50cyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSBhcyBhblxuICAgKiBldmVudCdzIGBnbG9iYWxYL2dsb2JhbFlgIGRhdGEgdmFsdWVzLlxuICAgKlxuICAgKiAtIENvbnNpZGVyIGNhY2hpbmcgdGhpcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb21wb25lbnQsIG9yIHBvc3NpYmx5XG4gICAqICAgYmVpbmcgYWJsZSB0byBzaGFyZSB0aGlzIGNhY2hlIGJldHdlZW4gYW55IGBTY3JvbGxNYXBgIHZpZXcuXG4gICAqXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAvLyBxdWVyeUxheW91dEJ5SUQoXG4gICAgLy8gICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRCxcbiAgICAvLyAgIG51bGwsXG4gICAgLy8gICB0aGlzLl9oYW5kbGVRdWVyeUxheW91dFxuICAgIC8vICk7XG4gICAgdmFyIHRhcmdldCA9IGUubmF0aXZlRXZlbnQudGFyZ2V0O1xuICAgIHRoaXMuX2hhbmRsZVF1ZXJ5TGF5b3V0KHRhcmdldC5jbGllbnRMZWZ0LCB0YXJnZXQuY2xpZW50VG9wLCB0YXJnZXQuY2xpZW50V2lkdGgsXG4gICAgICB0YXJnZXQuY2xpZW50SGVpZ2h0LCB0YXJnZXQub2Zmc2V0TGVmdCwgdGFyZ2V0Lm9mZnNldFRvcCk7XG4gIH0sXG5cbiAgX2hhbmRsZVF1ZXJ5TGF5b3V0OiBmdW5jdGlvbihsLCB0LCB3LCBoLCBnbG9iYWxYLCBnbG9iYWxZKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSkge1xuICAgICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUpIHtcbiAgICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUgPSB7XG4gICAgICBsZWZ0OiBnbG9iYWxYLFxuICAgICAgdG9wOiBnbG9iYWxZXG4gICAgfTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5kaW1lbnNpb25zT25BY3RpdmF0ZSA9IHtcbiAgICAgIHdpZHRoOiB3LFxuICAgICAgaGVpZ2h0OiBoXG4gICAgfTtcbiAgfSxcblxuICBfaGFuZGxlRGVsYXk6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkRFTEFZLCBlKTtcbiAgfSxcblxuICBfaGFuZGxlTG9uZ0RlbGF5OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5MT05HX1BSRVNTX0RFVEVDVEVELCBlKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBzdGF0ZSBtYWNoaW5lIHNpZ25hbCwgcGVyZm9ybXMgc2lkZSBlZmZlY3RzIG9mIHRoZSB0cmFuc2l0aW9uXG4gICAqIGFuZCBzdG9yZXMgdGhlIG5ldyBzdGF0ZS4gVmFsaWRhdGVzIHRoZSB0cmFuc2l0aW9uIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7U2lnbmFsc30gc2lnbmFsIFN0YXRlIG1hY2hpbmUgc2lnbmFsLlxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBvciB1bnJlY29nbml6ZWQgc2lnbmFsLlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9yZWNlaXZlU2lnbmFsOiBmdW5jdGlvbihzaWduYWwsIGUpIHtcbiAgICB2YXIgY3VyU3RhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlO1xuICAgIGlmICghKFRyYW5zaXRpb25zW2N1clN0YXRlXSAmJiBUcmFuc2l0aW9uc1tjdXJTdGF0ZV1bc2lnbmFsXSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VucmVjb2duaXplZCBzaWduYWwgYCcgKyBzaWduYWwgKyAnYCBvciBzdGF0ZSBgJyArIGN1clN0YXRlICtcbiAgICAgICAgJ2AgZm9yIFRvdWNoYWJsZSByZXNwb25kZXIgYCcgKyB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRCArXG4gICAgICAgICdgJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdmFyIG5leHRTdGF0ZSA9IFRyYW5zaXRpb25zW2N1clN0YXRlXVtzaWduYWxdO1xuICAgIGlmIChuZXh0U3RhdGUgPT09IFN0YXRlcy5FUlJPUikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlIGNhbm5vdCB0cmFuc2l0aW9uIGZyb20gYCcgKyBjdXJTdGF0ZSArICdgIHRvIGAnICtcbiAgICAgICAgc2lnbmFsICtcbiAgICAgICAgJ2AgZm9yIHJlc3BvbmRlciBgJyArIHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEICsgJ2AnXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY3VyU3RhdGUgIT09IG5leHRTdGF0ZSkge1xuICAgICAgdGhpcy5fcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbihjdXJTdGF0ZSwgbmV4dFN0YXRlLCBzaWduYWwsIGUpO1xuICAgICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB9XG4gIH0sXG5cbiAgX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCA9IG51bGw7XG4gIH0sXG5cbiAgX2lzSGlnaGxpZ2h0OiBmdW5jdGlvbihzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4gfHxcbiAgICAgIHN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOO1xuICB9LFxuXG4gIF9zYXZlUHJlc3NJbkxvY2F0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRvdWNoID0gVG91Y2hFdmVudFV0aWxzLmV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICB2YXIgcGFnZVggPSB0b3VjaCAmJiB0b3VjaC5wYWdlWDtcbiAgICB2YXIgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcbiAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbiA9IHtcbiAgICAgIHBhZ2VYOiBwYWdlWCxcbiAgICAgIHBhZ2VZOiBwYWdlWVxuICAgIH07XG4gIH0sXG5cbiAgX2dldERpc3RhbmNlQmV0d2VlblBvaW50czogZnVuY3Rpb24oYVgsIGFZLCBiWCwgYlkpIHtcbiAgICB2YXIgZGVsdGFYID0gYVggLSBiWDtcbiAgICB2YXIgZGVsdGFZID0gYVkgLSBiWTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdpbGwgcGVyZm9ybSBhIHRyYW5zaXRpb24gYmV0d2VlbiB0b3VjaGFibGUgc3RhdGVzLCBhbmQgaWRlbnRpZnkgYW55XG4gICAqIGhpZ2hsaWdodGluZyBvciB1bmhpZ2hsaWdodGluZyB0aGF0IG11c3QgYmUgcGVyZm9ybWVkIGZvciB0aGlzIHBhcnRpY3VsYXJcbiAgICogdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdGF0ZXN9IGN1clN0YXRlIEN1cnJlbnQgVG91Y2hhYmxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge1N0YXRlc30gbmV4dFN0YXRlIE5leHQgVG91Y2hhYmxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge1NpZ25hbH0gc2lnbmFsIFNpZ25hbCB0aGF0IHRyaWdnZXJlZCB0aGUgdHJhbnNpdGlvbi5cbiAgICogQHBhcmFtIHtFdmVudH0gZSBOYXRpdmUgZXZlbnQuXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKi9cbiAgX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb246IGZ1bmN0aW9uKGN1clN0YXRlLCBuZXh0U3RhdGUsIHNpZ25hbCwgZSkge1xuICAgIHZhciBjdXJJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KGN1clN0YXRlKTtcbiAgICB2YXIgbmV3SXNIaWdobGlnaHQgPSB0aGlzLl9pc0hpZ2hsaWdodChuZXh0U3RhdGUpO1xuXG4gICAgdmFyIGlzRmluYWxTaWduYWwgPVxuICAgICAgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9URVJNSU5BVEVEIHx8XG4gICAgICBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0U7XG5cbiAgICBpZiAoaXNGaW5hbFNpZ25hbCkge1xuICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgfVxuXG4gICAgaWYgKCFJc0FjdGl2ZVtjdXJTdGF0ZV0gJiYgSXNBY3RpdmVbbmV4dFN0YXRlXSkge1xuICAgICAgdGhpcy5fcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbihlKTtcbiAgICB9XG5cbiAgICBpZiAoSXNQcmVzc2luZ0luW2N1clN0YXRlXSAmJiBzaWduYWwgPT09IFNpZ25hbHMuTE9OR19QUkVTU19ERVRFQ1RFRCkge1xuICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MgJiYgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MoZSk7XG4gICAgfVxuXG4gICAgaWYgKG5ld0lzSGlnaGxpZ2h0ICYmICFjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgdGhpcy5fc2F2ZVByZXNzSW5Mb2NhdGlvbihlKTtcbiAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4oXG4gICAgICAgIGUpO1xuICAgIH0gZWxzZSBpZiAoIW5ld0lzSGlnaGxpZ2h0ICYmIGN1cklzSGlnaGxpZ2h0ICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQpIHtcbiAgICAgIGlmICh0aGlzLnRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyAmJiB0aGlzLnRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUygpKSB7XG4gICAgICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dChlKTtcbiAgICAgICAgfSwgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChJc1ByZXNzaW5nSW5bY3VyU3RhdGVdICYmIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSkge1xuICAgICAgdmFyIGhhc0xvbmdQcmVzc0hhbmRsZXIgPSAhIXRoaXMucHJvcHMub25Mb25nUHJlc3M7XG4gICAgICB2YXIgcHJlc3NJc0xvbmdCdXRTdGlsbENhbGxPblByZXNzID1cbiAgICAgICAgSXNMb25nUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgKCAvLyBXZSAqYXJlKiBsb25nIHByZXNzaW5nLi5cbiAgICAgICAgICAhaGFzTG9uZ1ByZXNzSGFuZGxlciB8fCAvLyBCdXQgZWl0aGVyIGhhcyBubyBsb25nIGhhbmRsZXJcbiAgICAgICAgICAhdGhpcy50b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3MoKSAvLyBvciB3ZSdyZSB0b2xkIHRvIGlnbm9yZSBpdC5cbiAgICAgICAgKTtcblxuICAgICAgdmFyIHNob3VsZEludm9rZVByZXNzID0gIUlzTG9uZ1ByZXNzaW5nSW5bY3VyU3RhdGVdIHx8XG4gICAgICAgIHByZXNzSXNMb25nQnV0U3RpbGxDYWxsT25QcmVzcztcbiAgICAgIGlmIChzaG91bGRJbnZva2VQcmVzcyAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzKSB7XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUHJlc3MoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gIH1cblxufTtcblxudmFyIFRvdWNoYWJsZSA9IHtcbiAgTWl4aW46IFRvdWNoYWJsZU1peGluXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoYWJsZTtcbiJdfQ==