







'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _react=require('react');var _react2=_interopRequireDefault(_react);
var _reactDom=require('react-dom');var _reactDom2=_interopRequireDefault(_reactDom);
var _ReactScrollResponder=require('../ListView/ScrollResponder.web');var _ReactScrollResponder2=_interopRequireDefault(_ReactScrollResponder);
var _ReactStyleSheet=require('../StyleSheet/StyleSheet.web');var _ReactStyleSheet2=_interopRequireDefault(_ReactStyleSheet);
var _ReactView=require('../View/View.web');var _ReactView2=_interopRequireDefault(_ReactView);
var _throttle=require('domkit/throttle');var _throttle2=_interopRequireDefault(_throttle);
var _reactMixin=require('react-mixin');var _reactMixin2=_interopRequireDefault(_reactMixin);
var _autobindDecorator=require('autobind-decorator');var _autobindDecorator2=_interopRequireDefault(_autobindDecorator);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var SCROLLVIEW='ScrollView';
var INNERVIEW='InnerScrollView';
var CONTENT_EXT_STYLE=['padding','paddingTop','paddingBottom','paddingLeft','paddingRight'];var
















ScrollView=function(_Component){_inherits(ScrollView,_Component);function ScrollView(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ScrollView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).call.apply(_ref,[this].concat(args))),_this),_this.

state=_this.scrollResponderMixinGetInitialState(),_temp),_possibleConstructorReturn(_this,_ret);}_createClass(ScrollView,[{key:'getScrollResponder',value:function getScrollResponder()







{
return this;
}},{key:'getInnerViewNode',value:function getInnerViewNode()

{
return this.refs[INNERVIEW];
}},{key:'scrollTo',value:function scrollTo(

opts){


if(typeof opts==='number'){
opts={y:opts,x:arguments[1]};
}

this.scrollWithoutAnimationTo(opts.y,opts.x);
}},{key:'scrollWithoutAnimationTo',value:function scrollWithoutAnimationTo(

destY,destX){






var scrollView=_reactDom2.default.findDOMNode(this.refs[SCROLLVIEW]);
scrollView.scrollTop=destY||0;
scrollView.scrollLeft=destX||0;
}},{key:'handleScroll',value:function handleScroll(

e){

















this.props.onScroll&&this.props.onScroll(e);
}},{key:'render',value:function render()

{var _props=



this.props;var style=_props.style;var otherProps=_objectWithoutProperties(_props,['style']);

var contentContainerExtStyle={};

if(style){
for(var i=0;i<CONTENT_EXT_STYLE.length;i++){
if(typeof style[CONTENT_EXT_STYLE[i]]==='number'){
contentContainerExtStyle[CONTENT_EXT_STYLE[i]]=style[CONTENT_EXT_STYLE[i]];
}
}
}

var contentContainerStyle=[
styles.contentContainer,
this.props.horizontal&&styles.contentContainerHorizontal,
this.props.contentContainerStyle,
contentContainerExtStyle];












var contentContainer=
_react2.default.createElement(_ReactView2.default,{
ref:INNERVIEW,
style:contentContainerStyle,
removeClippedSubviews:this.props.removeClippedSubviews,
collapsable:false},
this.props.children);


var alwaysBounceHorizontal=
this.props.alwaysBounceHorizontal!==undefined?
this.props.alwaysBounceHorizontal:
this.props.horizontal;

var alwaysBounceVertical=
this.props.alwaysBounceVertical!==undefined?
this.props.alwaysBounceVertical:
!this.props.horizontal;

var handleScroll=function handleScroll(){};
if(this.props.scrollEventThrottle&&this.props.onScroll){
handleScroll=(0,_throttle2.default)(this.handleScroll,this.props.scrollEventThrottle);
}

var orientationStyle=this.props.horizontal?styles.horizontal:styles.vertical;

var props=_extends({},
otherProps,{
alwaysBounceHorizontal:alwaysBounceHorizontal,
alwaysBounceVertical:alwaysBounceVertical,
style:[styles.base,orientationStyle,this.props.style],
onTouchStart:this.scrollResponderHandleTouchStart,
onTouchMove:this.scrollResponderHandleTouchMove,
onTouchEnd:this.scrollResponderHandleTouchEnd,
onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,
onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,
onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,
onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,
onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,
onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,


onScrollShouldSetResponder:handleScroll,

onScroll:function onScroll(){},
onResponderGrant:this.scrollResponderHandleResponderGrant,
onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,
onResponderTerminate:this.scrollResponderHandleTerminate,
onResponderRelease:this.scrollResponderHandleResponderRelease,
onResponderReject:this.scrollResponderHandleResponderReject});


return(
_react2.default.createElement(_ReactView2.default,_extends({},props,{ref:SCROLLVIEW}),
contentContainer));


}}]);return ScrollView;}(_react.Component);
;

var styles=_ReactStyleSheet2.default.create({
base:{
WebkitOverflowScrolling:'touch',
flex:1},

horizontal:{
overflowX:'scroll',
overflowY:'hidden'},

vertical:{
overflowX:'hidden',
overflowY:'scroll'},

contentContainer:{
position:'absolute',
minWidth:'100%'},

contentContainerHorizontal:{
alignSelf:'flex-start',
flexDirection:'row'}});



_reactMixin2.default.onClass(ScrollView,_ReactScrollResponder2.default.Mixin);
(0,_autobindDecorator2.default)(ScrollView);

ScrollView.isReactNativeComponent=true;exports.default=

ScrollView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcm9sbFZpZXcud2ViLmpzIl0sIm5hbWVzIjpbIlNDUk9MTFZJRVciLCJJTk5FUlZJRVciLCJDT05URU5UX0VYVF9TVFlMRSIsIlNjcm9sbFZpZXciLCJzdGF0ZSIsInNjcm9sbFJlc3BvbmRlck1peGluR2V0SW5pdGlhbFN0YXRlIiwicmVmcyIsIm9wdHMiLCJ5IiwieCIsImFyZ3VtZW50cyIsInNjcm9sbFdpdGhvdXRBbmltYXRpb25UbyIsImRlc3RZIiwiZGVzdFgiLCJzY3JvbGxWaWV3IiwiZmluZERPTU5vZGUiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiZSIsInByb3BzIiwib25TY3JvbGwiLCJzdHlsZSIsIm90aGVyUHJvcHMiLCJjb250ZW50Q29udGFpbmVyRXh0U3R5bGUiLCJpIiwibGVuZ3RoIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwic3R5bGVzIiwiY29udGVudENvbnRhaW5lciIsImhvcml6b250YWwiLCJjb250ZW50Q29udGFpbmVySG9yaXpvbnRhbCIsInJlbW92ZUNsaXBwZWRTdWJ2aWV3cyIsImNoaWxkcmVuIiwiYWx3YXlzQm91bmNlSG9yaXpvbnRhbCIsInVuZGVmaW5lZCIsImFsd2F5c0JvdW5jZVZlcnRpY2FsIiwiaGFuZGxlU2Nyb2xsIiwic2Nyb2xsRXZlbnRUaHJvdHRsZSIsIm9yaWVudGF0aW9uU3R5bGUiLCJ2ZXJ0aWNhbCIsImJhc2UiLCJvblRvdWNoU3RhcnQiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaFN0YXJ0Iiwib25Ub3VjaE1vdmUiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaE1vdmUiLCJvblRvdWNoRW5kIiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlVG91Y2hFbmQiLCJvblNjcm9sbEJlZ2luRHJhZyIsInNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbEJlZ2luRHJhZyIsIm9uU2Nyb2xsRW5kRHJhZyIsInNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbEVuZERyYWciLCJvbk1vbWVudHVtU2Nyb2xsQmVnaW4iLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVNb21lbnR1bVNjcm9sbEJlZ2luIiwib25Nb21lbnR1bVNjcm9sbEVuZCIsInNjcm9sbFJlc3BvbmRlckhhbmRsZU1vbWVudHVtU2Nyb2xsRW5kIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInNjcm9sbFJlc3BvbmRlckhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJvblNjcm9sbFNob3VsZFNldFJlc3BvbmRlciIsIm9uUmVzcG9uZGVyR3JhbnQiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJHcmFudCIsIm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0Iiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlVGVybWluYXRpb25SZXF1ZXN0Iiwib25SZXNwb25kZXJUZXJtaW5hdGUiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUZXJtaW5hdGUiLCJvblJlc3BvbmRlclJlbGVhc2UiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJSZWplY3QiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJSZWplY3QiLCJjcmVhdGUiLCJXZWJraXRPdmVyZmxvd1Njcm9sbGluZyIsImZsZXgiLCJvdmVyZmxvd1giLCJvdmVyZmxvd1kiLCJwb3NpdGlvbiIsIm1pbldpZHRoIiwiYWxpZ25TZWxmIiwiZmxleERpcmVjdGlvbiIsIm9uQ2xhc3MiLCJNaXhpbiIsImlzUmVhY3ROYXRpdmVDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBUUEsYTs7QUFFQSw0QjtBQUNBLG1DO0FBQ0EscUU7QUFDQSw2RDtBQUNBLDJDO0FBQ0EseUM7QUFDQSx1QztBQUNBLHFEOztBQUVBLEdBQU1BLFlBQWEsWUFBbkI7QUFDQSxH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Vzs7QUFpQjdCOUMsMkJBQTRCO0FBQzFCK0MsVUFBVyxZQURlO0FBRTFCQyxjQUFlLEtBRlcsQ0FqQkMsQ0FBbEIsQ0FBYjs7OztBQXVCQSxxQkFBTUMsT0FBTixDQUFjNUUsVUFBZCxDQUEwQiwrQkFBZ0I2RSxLQUExQztBQUNBLGdDQUFTN0UsVUFBVDs7QUFFQUEsV0FBVzhFLHNCQUFYLENBQW9DLElBQXBDLEM7O0FBRWU5RSxVIiwiZmlsZSI6IlNjcm9sbFZpZXcud2ViLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNSwgRmFjZWJvb2ssIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0U2Nyb2xsVmlld1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMsIENvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgU2Nyb2xsUmVzcG9uZGVyIGZyb20gJ1JlYWN0U2Nyb2xsUmVzcG9uZGVyJztcbmltcG9ydCBTdHlsZVNoZWV0IGZyb20gJ1JlYWN0U3R5bGVTaGVldCc7XG5pbXBvcnQgVmlldyBmcm9tICdSZWFjdFZpZXcnO1xuaW1wb3J0IHRocm90dGxlIGZyb20gJ2RvbWtpdC90aHJvdHRsZSc7XG5pbXBvcnQgbWl4aW4gZnJvbSAncmVhY3QtbWl4aW4nO1xuaW1wb3J0IGF1dG9iaW5kIGZyb20gJ2F1dG9iaW5kLWRlY29yYXRvcic7XG5cbmNvbnN0IFNDUk9MTFZJRVcgPSAnU2Nyb2xsVmlldyc7XG5jb25zdCBJTk5FUlZJRVcgPSAnSW5uZXJTY3JvbGxWaWV3JztcbmNvbnN0IENPTlRFTlRfRVhUX1NUWUxFID0gWydwYWRkaW5nJywgJ3BhZGRpbmdUb3AnLCAncGFkZGluZ0JvdHRvbScsICdwYWRkaW5nTGVmdCcsICdwYWRkaW5nUmlnaHQnXTtcblxuLyoqXG4gKiBDb21wb25lbnQgdGhhdCB3cmFwcyBwbGF0Zm9ybSBTY3JvbGxWaWV3IHdoaWxlIHByb3ZpZGluZ1xuICogaW50ZWdyYXRpb24gd2l0aCB0b3VjaCBsb2NraW5nIFwicmVzcG9uZGVyXCIgc3lzdGVtLlxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IFNjcm9sbFZpZXdzIG11c3QgaGF2ZSBhIGJvdW5kZWQgaGVpZ2h0IGluIG9yZGVyIHRvIHdvcmssXG4gKiBzaW5jZSB0aGV5IGNvbnRhaW4gdW5ib3VuZGVkLWhlaWdodCBjaGlsZHJlbiBpbnRvIGEgYm91bmRlZCBjb250YWluZXIgKHZpYVxuICogYSBzY3JvbGwgaW50ZXJhY3Rpb24pLiBJbiBvcmRlciB0byBib3VuZCB0aGUgaGVpZ2h0IG9mIGEgU2Nyb2xsVmlldywgZWl0aGVyXG4gKiBzZXQgdGhlIGhlaWdodCBvZiB0aGUgdmlldyBkaXJlY3RseSAoZGlzY291cmFnZWQpIG9yIG1ha2Ugc3VyZSBhbGwgcGFyZW50XG4gKiB2aWV3cyBoYXZlIGJvdW5kZWQgaGVpZ2h0LiBGb3JnZXR0aW5nIHRvIHRyYW5zZmVyIGB7ZmxleDogMX1gIGRvd24gdGhlXG4gKiB2aWV3IHN0YWNrIGNhbiBsZWFkIHRvIGVycm9ycyBoZXJlLCB3aGljaCB0aGUgZWxlbWVudCBpbnNwZWN0b3IgbWFrZXNcbiAqIGVhc3kgdG8gZGVidWcuXG4gKlxuICogRG9lc24ndCB5ZXQgc3VwcG9ydCBvdGhlciBjb250YWluZWQgcmVzcG9uZGVycyBmcm9tIGJsb2NraW5nIHRoaXMgc2Nyb2xsXG4gKiB2aWV3IGZyb20gYmVjb21pbmcgdGhlIHJlc3BvbmRlci5cbiAqL1xuY2xhc3MgU2Nyb2xsVmlldyBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgc3RhdGUgPSB0aGlzLnNjcm9sbFJlc3BvbmRlck1peGluR2V0SW5pdGlhbFN0YXRlKCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgc2Nyb2xsIHJlc3BvbmRlciwgd2hpY2ggc3VwcG9ydHNcbiAgICogb3BlcmF0aW9ucyBsaWtlIGBzY3JvbGxUb2AuIEFsbCBTY3JvbGxWaWV3LWxpa2UgY29tcG9uZW50cyBzaG91bGRcbiAgICogaW1wbGVtZW50IHRoaXMgbWV0aG9kIHNvIHRoYXQgdGhleSBjYW4gYmUgY29tcG9zZWQgd2hpbGUgcHJvdmlkaW5nIGFjY2Vzc1xuICAgKiB0byB0aGUgdW5kZXJseWluZyBzY3JvbGwgcmVzcG9uZGVyJ3MgbWV0aG9kcy5cbiAgICovXG4gIGdldFNjcm9sbFJlc3BvbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldElubmVyVmlld05vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmc1tJTk5FUlZJRVddO1xuICB9XG5cbiAgc2Nyb2xsVG8ob3B0cykge1xuICAgIC8vICRGbG93Rml4TWUgLSBEb24ndCBrbm93IGhvdyB0byBwYXNzIE1peGluIGNvcnJlY3RseS4gUG9zdHBvbmUgZm9yIG5vd1xuICAgIC8vIHRoaXMuZ2V0U2Nyb2xsUmVzcG9uZGVyKCkuc2Nyb2xsUmVzcG9uZGVyU2Nyb2xsVG8oZGVzdFggfHwgMCwgZGVzdFkgfHwgMCk7XG4gICAgaWYgKHR5cGVvZiBvcHRzID09PSAnbnVtYmVyJykge1xuICAgICAgb3B0cyA9IHsgeTogb3B0cywgeDogYXJndW1lbnRzWzFdIH07XG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGxXaXRob3V0QW5pbWF0aW9uVG8ob3B0cy55LCBvcHRzLngpO1xuICB9XG5cbiAgc2Nyb2xsV2l0aG91dEFuaW1hdGlvblRvKGRlc3RZPzogbnVtYmVyLCBkZXN0WD86IG51bWJlcikge1xuICAgIC8vICRGbG93Rml4TWUgLSBEb24ndCBrbm93IGhvdyB0byBwYXNzIE1peGluIGNvcnJlY3RseS4gUG9zdHBvbmUgZm9yIG5vd1xuICAgIC8vIHRoaXMuZ2V0U2Nyb2xsUmVzcG9uZGVyKCkuc2Nyb2xsUmVzcG9uZGVyU2Nyb2xsV2l0aG91dGhBbmltYXRpb25UbyhcbiAgICAvLyAgIGRlc3RYIHx8IDAsXG4gICAgLy8gICBkZXN0WSB8fCAwLFxuICAgIC8vICk7XG5cbiAgICBsZXQgc2Nyb2xsVmlldyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1tTQ1JPTExWSUVXXSk7XG4gICAgc2Nyb2xsVmlldy5zY3JvbGxUb3AgPSBkZXN0WSB8fCAwO1xuICAgIHNjcm9sbFZpZXcuc2Nyb2xsTGVmdCA9IGRlc3RYIHx8IDA7XG4gIH1cblxuICBoYW5kbGVTY3JvbGwoZTogRXZlbnQpIHtcbiAgICAvLyBpZiAoX19ERVZfXykge1xuICAgIC8vICAgaWYgKHRoaXMucHJvcHMub25TY3JvbGwgJiYgIXRoaXMucHJvcHMuc2Nyb2xsRXZlbnRUaHJvdHRsZSkge1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcbiAgICAvLyAgICAgICAnWW91IHNwZWNpZmllZCBgb25TY3JvbGxgIG9uIGEgPFNjcm9sbFZpZXc+IGJ1dCBub3QgJyArXG4gICAgLy8gICAgICAgJ2BzY3JvbGxFdmVudFRocm90dGxlYC4gWW91IHdpbGwgb25seSByZWNlaXZlIG9uZSBldmVudC4gJyArXG4gICAgLy8gICAgICAgJ1VzaW5nIGAxNmAgeW91IGdldCBhbGwgdGhlIGV2ZW50cyBidXQgYmUgYXdhcmUgdGhhdCBpdCBtYXkgJyArXG4gICAgLy8gICAgICAgJ2NhdXNlIGZyYW1lIGRyb3BzLCB1c2UgYSBiaWdnZXIgbnVtYmVyIGlmIHlvdSBkb25cXCd0IG5lZWQgYXMgJyArXG4gICAgLy8gICAgICAgJ211Y2ggcHJlY2lzaW9uLidcbiAgICAvLyAgICAgKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9XG4gICAgLy8gaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAvLyAgIGlmICh0aGlzLnByb3BzLmtleWJvYXJkRGlzbWlzc01vZGUgPT09ICdvbi1kcmFnJykge1xuICAgIC8vICAgICBkaXNtaXNzS2V5Ym9hcmQoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9XG5cbiAgICB0aGlzLnByb3BzLm9uU2Nyb2xsICYmIHRoaXMucHJvcHMub25TY3JvbGwoZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHtcbiAgICAgIHN0eWxlLFxuICAgICAgLi4ub3RoZXJQcm9wc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgbGV0IGNvbnRlbnRDb250YWluZXJFeHRTdHlsZSA9IHt9O1xuXG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENPTlRFTlRfRVhUX1NUWUxFLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3R5bGVbQ09OVEVOVF9FWFRfU1RZTEVbaV1dID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIGNvbnRlbnRDb250YWluZXJFeHRTdHlsZVtDT05URU5UX0VYVF9TVFlMRVtpXV0gPSBzdHlsZVtDT05URU5UX0VYVF9TVFlMRVtpXV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY29udGVudENvbnRhaW5lclN0eWxlID0gW1xuICAgICAgc3R5bGVzLmNvbnRlbnRDb250YWluZXIsXG4gICAgICB0aGlzLnByb3BzLmhvcml6b250YWwgJiYgc3R5bGVzLmNvbnRlbnRDb250YWluZXJIb3Jpem9udGFsLFxuICAgICAgdGhpcy5wcm9wcy5jb250ZW50Q29udGFpbmVyU3R5bGUsXG4gICAgICBjb250ZW50Q29udGFpbmVyRXh0U3R5bGUsXG4gICAgXTtcbiAgICAvLyBpZiAoX19ERVZfXyAmJiB0aGlzLnByb3BzLnN0eWxlKSB7XG4gICAgLy8gICBsZXQgc3R5bGUgPSBmbGF0dGVuU3R5bGUodGhpcy5wcm9wcy5zdHlsZSk7XG4gICAgLy8gICBsZXQgY2hpbGRMYXlvdXRQcm9wcyA9IFsnYWxpZ25JdGVtcycsICdqdXN0aWZ5Q29udGVudCddXG4gICAgLy8gICAgIC5maWx0ZXIoKHByb3ApID0+IHN0eWxlICYmIHN0eWxlW3Byb3BdICE9PSB1bmRlZmluZWQpO1xuICAgIC8vICAgaW52YXJpYW50KFxuICAgIC8vICAgICBjaGlsZExheW91dFByb3BzLmxlbmd0aCA9PT0gMCxcbiAgICAvLyAgICAgJ1Njcm9sbFZpZXcgY2hpbGQgbGF5b3V0ICgnICsgSlNPTi5zdHJpbmdpZnkoY2hpbGRMYXlvdXRQcm9wcykgK1xuICAgIC8vICAgICAgICcpIG11c3QgYnkgYXBwbGllZCB0aHJvdWdoIHRoZSBjb250ZW50Q29udGFpbmVyU3R5bGUgcHJvcC4nXG4gICAgLy8gICApO1xuICAgIC8vIH1cblxuICAgIGxldCBjb250ZW50Q29udGFpbmVyID1cbiAgICAgIDxWaWV3XG4gICAgICAgIHJlZj17SU5ORVJWSUVXfVxuICAgICAgICBzdHlsZT17Y29udGVudENvbnRhaW5lclN0eWxlfVxuICAgICAgICByZW1vdmVDbGlwcGVkU3Vidmlld3M9e3RoaXMucHJvcHMucmVtb3ZlQ2xpcHBlZFN1YnZpZXdzfVxuICAgICAgICBjb2xsYXBzYWJsZT17ZmFsc2V9PlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvVmlldz47XG5cbiAgICBsZXQgYWx3YXlzQm91bmNlSG9yaXpvbnRhbCA9XG4gICAgICB0aGlzLnByb3BzLmFsd2F5c0JvdW5jZUhvcml6b250YWwgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIHRoaXMucHJvcHMuYWx3YXlzQm91bmNlSG9yaXpvbnRhbCA6XG4gICAgICAgIHRoaXMucHJvcHMuaG9yaXpvbnRhbDtcblxuICAgIGxldCBhbHdheXNCb3VuY2VWZXJ0aWNhbCA9XG4gICAgICB0aGlzLnByb3BzLmFsd2F5c0JvdW5jZVZlcnRpY2FsICE9PSB1bmRlZmluZWQgP1xuICAgICAgICB0aGlzLnByb3BzLmFsd2F5c0JvdW5jZVZlcnRpY2FsIDpcbiAgICAgICAgIXRoaXMucHJvcHMuaG9yaXpvbnRhbDtcblxuICAgIGxldCBoYW5kbGVTY3JvbGwgPSAoKSA9PiB7fTtcbiAgICBpZiAodGhpcy5wcm9wcy5zY3JvbGxFdmVudFRocm90dGxlICYmIHRoaXMucHJvcHMub25TY3JvbGwpIHtcbiAgICAgIGhhbmRsZVNjcm9sbCA9IHRocm90dGxlKHRoaXMuaGFuZGxlU2Nyb2xsLCB0aGlzLnByb3BzLnNjcm9sbEV2ZW50VGhyb3R0bGUpO1xuICAgIH1cblxuICAgIGxldCBvcmllbnRhdGlvblN0eWxlID0gdGhpcy5wcm9wcy5ob3Jpem9udGFsID8gc3R5bGVzLmhvcml6b250YWwgOiBzdHlsZXMudmVydGljYWxcblxuICAgIGxldCBwcm9wcyA9IHtcbiAgICAgIC4uLm90aGVyUHJvcHMsXG4gICAgICBhbHdheXNCb3VuY2VIb3Jpem9udGFsLFxuICAgICAgYWx3YXlzQm91bmNlVmVydGljYWwsXG4gICAgICBzdHlsZTogKFtzdHlsZXMuYmFzZSwgb3JpZW50YXRpb25TdHlsZSwgdGhpcy5wcm9wcy5zdHlsZV06ID9BcnJheTxhbnk+KSxcbiAgICAgIG9uVG91Y2hTdGFydDogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaFN0YXJ0LFxuICAgICAgb25Ub3VjaE1vdmU6IHRoaXMuc2Nyb2xsUmVzcG9uZGVySGFuZGxlVG91Y2hNb3ZlLFxuICAgICAgb25Ub3VjaEVuZDogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaEVuZCxcbiAgICAgIG9uU2Nyb2xsQmVnaW5EcmFnOiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbEJlZ2luRHJhZyxcbiAgICAgIG9uU2Nyb2xsRW5kRHJhZzogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVTY3JvbGxFbmREcmFnLFxuICAgICAgb25Nb21lbnR1bVNjcm9sbEJlZ2luOiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZU1vbWVudHVtU2Nyb2xsQmVnaW4sXG4gICAgICBvbk1vbWVudHVtU2Nyb2xsRW5kOiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZU1vbWVudHVtU2Nyb2xsRW5kLFxuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcixcbiAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXJDYXB0dXJlOiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyQ2FwdHVyZSxcbiAgICAgIC8vIG9uU2Nyb2xsU2hvdWxkU2V0UmVzcG9uZGVyOiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbFNob3VsZFNldFJlc3BvbmRlcixcbiAgICAgIC8vIG9uU2Nyb2xsOiBoYW5kbGVTY3JvbGwsXG4gICAgICBvblNjcm9sbFNob3VsZFNldFJlc3BvbmRlcjogaGFuZGxlU2Nyb2xsLFxuICAgICAgLy8gcmVwbGFjZSBvblNjcm9sbCBpbiB0aGUgcHJvcHNcbiAgICAgIG9uU2Nyb2xsOiAoKSA9PiB7fSxcbiAgICAgIG9uUmVzcG9uZGVyR3JhbnQ6IHRoaXMuc2Nyb2xsUmVzcG9uZGVySGFuZGxlUmVzcG9uZGVyR3JhbnQsXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVUZXJtaW5hdGlvblJlcXVlc3QsXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZTogdGhpcy5zY3JvbGxSZXNwb25kZXJIYW5kbGVUZXJtaW5hdGUsXG4gICAgICBvblJlc3BvbmRlclJlbGVhc2U6IHRoaXMuc2Nyb2xsUmVzcG9uZGVySGFuZGxlUmVzcG9uZGVyUmVsZWFzZSxcbiAgICAgIG9uUmVzcG9uZGVyUmVqZWN0OiB0aGlzLnNjcm9sbFJlc3BvbmRlckhhbmRsZVJlc3BvbmRlclJlamVjdCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHsuLi5wcm9wc30gcmVmPXtTQ1JPTExWSUVXfT5cbiAgICAgICAge2NvbnRlbnRDb250YWluZXJ9XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfVxufTtcblxubGV0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgYmFzZToge1xuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnLFxuICAgIGZsZXg6IDEsXG4gIH0sXG4gIGhvcml6b250YWw6IHtcbiAgICBvdmVyZmxvd1g6ICdzY3JvbGwnLFxuICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgfSxcbiAgdmVydGljYWw6IHtcbiAgICBvdmVyZmxvd1g6ICdoaWRkZW4nLFxuICAgIG92ZXJmbG93WTogJ3Njcm9sbCdcbiAgfSxcbiAgY29udGVudENvbnRhaW5lcjoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIG1pbldpZHRoOiAnMTAwJScsXG4gIH0sXG4gIGNvbnRlbnRDb250YWluZXJIb3Jpem9udGFsOiB7XG4gICAgYWxpZ25TZWxmOiAnZmxleC1zdGFydCcsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gIH0sXG59KTtcblxubWl4aW4ub25DbGFzcyhTY3JvbGxWaWV3LCBTY3JvbGxSZXNwb25kZXIuTWl4aW4pO1xuYXV0b2JpbmQoU2Nyb2xsVmlldyk7XG5cblNjcm9sbFZpZXcuaXNSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHRydWU7XG5cbmV4cG9ydCBkZWZhdWx0IFNjcm9sbFZpZXc7XG4iXX0=