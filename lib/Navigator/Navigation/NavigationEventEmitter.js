









'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _EventEmitter2=require('../../vendor/emitter/EventEmitter');var _EventEmitter3=_interopRequireDefault(_EventEmitter2);
var _ReactNavigationEvent=require('./NavigationEvent');var _ReactNavigationEvent2=_interopRequireDefault(_ReactNavigationEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var








NavigationEventEmitter=function(_EventEmitter){_inherits(NavigationEventEmitter,_EventEmitter);




function NavigationEventEmitter(target){_classCallCheck(this,NavigationEventEmitter);var _this=_possibleConstructorReturn(this,(NavigationEventEmitter.__proto__||Object.getPrototypeOf(NavigationEventEmitter)).call(this));

_this._emitting=false;
_this._emitQueue=[];
_this._target=target;return _this;
}_createClass(NavigationEventEmitter,[{key:'emit',value:function emit(


eventType,
data,
didEmitCallback,
extraInfo)
{
if(this._emitting){


var args=Array.prototype.slice.call(arguments);
this._emitQueue.unshift(args);
return;
}

this._emitting=true;

var event=_ReactNavigationEvent2.default.pool(eventType,this._target,data);

if(extraInfo){
if(extraInfo.target){
event.target=extraInfo.target;
}

if(extraInfo.eventPhase){
event.eventPhase=extraInfo.eventPhase;
}

if(extraInfo.defaultPrevented){
event.preventDefault();
}

if(extraInfo.propagationStopped){
event.stopPropagation();
}
}



_get(NavigationEventEmitter.prototype.__proto__||Object.getPrototypeOf(NavigationEventEmitter.prototype),'emit',this).call(this,String(eventType),event);

if(typeof didEmitCallback==='function'){
didEmitCallback.call(this._target,event);
}
event.dispose();

this._emitting=false;

while(this._emitQueue.length){
var args=this._emitQueue.shift();
this.emit.apply(this,args);
}
}}]);return NavigationEventEmitter;}(_EventEmitter3.default);


module.exports=NavigationEventEmitter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdmlnYXRpb25FdmVudEVtaXR0ZXIuanMiXSwibmFtZXMiOlsiTmF2aWdhdGlvbkV2ZW50RW1pdHRlciIsInRhcmdldCIsIl9lbWl0dGluZyIsIl9lbWl0UXVldWUiLCJfdGFyZ2V0IiwiZXZlbnRUeXBlIiwiZGF0YSIsImRpZEVtaXRDYWxsYmFjayIsImV4dHJhSW5mbyIsImFyZ3MiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsInVuc2hpZnQiLCJldmVudCIsInBvb2wiLCJldmVudFBoYXNlIiwiZGVmYXVsdFByZXZlbnRlZCIsInByZXZlbnREZWZhdWx0IiwicHJvcGFnYXRpb25TdG9wcGVkIiwic3RvcFByb3BhZ2F0aW9uIiwiU3RyaW5nIiwiZGlzcG9zZSIsImxlbmd0aCIsInNoaWZ0IiwiZW1pdCIsImFwcGx5IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQVVBLGE7O0FBRUEsZ0U7QUFDQSx1RDs7Ozs7Ozs7O0FBU01BLHNCOzs7OztBQUtKLGdDQUFZQyxNQUFaLENBQTRCOztBQUUxQixNQUFLQyxTQUFMLENBQWlCLEtBQWpCO0FBQ0EsTUFBS0MsVUFBTCxDQUFrQixFQUFsQjtBQUNBLE1BQUtDLE9BQUwsQ0FBZUgsTUFBZixDQUowQjtBQUszQixDOzs7QUFHQ0ksUztBQUNBQyxJO0FBQ0FDLGU7QUFDQUMsUztBQUNNO0FBQ04sR0FBSSxLQUFLTixTQUFULENBQW9COzs7QUFHbEIsR0FBSU8sTUFBWUMsTUFBTUMsU0FBTixDQUFnQkMsS0FBaEIsQ0FBc0JDLElBQXRCLENBQTJCQyxTQUEzQixDQUFoQjtBQUNBLEtBQUtYLFVBQUwsQ0FBZ0JZLE9BQWhCLENBQXdCTixJQUF4QjtBQUNBO0FBQ0Q7O0FBRUQsS0FBS1AsU0FBTCxDQUFpQixJQUFqQjs7QUFFQSxHQUFJYyxPQUFRLCtCQUFnQkMsSUFBaEIsQ0FBcUJaLFNBQXJCLENBQWdDLEtBQUtELE9BQXJDLENBQThDRSxJQUE5QyxDQUFaOztBQUVBLEdBQUlFLFNBQUosQ0FBZTtBQUNiLEdBQUlBLFVBQVVQLE1BQWQsQ0FBc0I7QUFDcEJlLE1BQU1mLE1BQU4sQ0FBZU8sVUFBVVAsTUFBekI7QUFDRDs7QUFFRCxHQUFJTyxVQUFVVSxVQUFkLENBQTBCO0FBQ3hCRixNQUFNRSxVQUFOLENBQW1CVixVQUFVVSxVQUE3QjtBQUNEOztBQUVELEdBQUlWLFVBQVVXLGdCQUFkLENBQWdDO0FBQzlCSCxNQUFNSSxjQUFOO0FBQ0Q7O0FBRUQsR0FBSVosVUFBVWEsa0JBQWQsQ0FBa0M7QUFDaENMLE1BQU1NLGVBQU47QUFDRDtBQUNGOzs7O0FBSUQsZ0lBQVdDLE9BQU9sQixTQUFQLENBQVgsQ0FBOEJXLEtBQTlCOztBQUVBLEdBQUksTUFBT1QsZ0JBQVAsR0FBMkIsVUFBL0IsQ0FBMkM7QUFDekNBLGdCQUFnQk0sSUFBaEIsQ0FBcUIsS0FBS1QsT0FBMUIsQ0FBbUNZLEtBQW5DO0FBQ0Q7QUFDREEsTUFBTVEsT0FBTjs7QUFFQSxLQUFLdEIsU0FBTCxDQUFpQixLQUFqQjs7QUFFQSxNQUFPLEtBQUtDLFVBQUwsQ0FBZ0JzQixNQUF2QixDQUErQjtBQUM3QixHQUFJaEIsTUFBWSxLQUFLTixVQUFMLENBQWdCdUIsS0FBaEIsRUFBaEI7QUFDQSxLQUFLQyxJQUFMLENBQVVDLEtBQVYsQ0FBZ0IsSUFBaEIsQ0FBc0JuQixJQUF0QjtBQUNEO0FBQ0YsQzs7O0FBR0hvQixPQUFPQyxPQUFQLENBQWlCOUIsc0JBQWpCIiwiZmlsZSI6Ik5hdmlnYXRpb25FdmVudEVtaXR0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE5hdmlnYXRpb25FdmVudEVtaXR0ZXJcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdFdmVudEVtaXR0ZXInO1xuaW1wb3J0IE5hdmlnYXRpb25FdmVudCBmcm9tICdSZWFjdE5hdmlnYXRpb25FdmVudCc7XG5cbnR5cGUgRXh0cmFJbmZvID0ge1xuICBkZWZhdWx0UHJldmVudGVkOiA/Ym9vbGVhbixcbiAgZXZlbnRQaGFzZTogP251bWJlcixcbiAgcHJvcGFnYXRpb25TdG9wcGVkOiA/Ym9vbGVhbixcbiAgdGFyZ2V0OiA/T2JqZWN0LFxufTtcblxuY2xhc3MgTmF2aWdhdGlvbkV2ZW50RW1pdHRlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIF9lbWl0UXVldWU6IEFycmF5PGFueT47XG4gIF9lbWl0dGluZzogYm9vbGVhbjtcbiAgX3RhcmdldDogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKHRhcmdldDogT2JqZWN0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9lbWl0dGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2VtaXRRdWV1ZSA9IFtdO1xuICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgfVxuXG4gIGVtaXQoXG4gICAgZXZlbnRUeXBlOiBzdHJpbmcsXG4gICAgZGF0YTogYW55LFxuICAgIGRpZEVtaXRDYWxsYmFjazogP0Z1bmN0aW9uLFxuICAgIGV4dHJhSW5mbzogP0V4dHJhSW5mb1xuICApOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZW1pdHRpbmcpIHtcbiAgICAgIC8vIEFuIGV2ZW50IGN5Y2xlIHRoYXQgd2FzIHByZXZpb3VzbHkgY3JlYXRlZCBoYXNuJ3QgZmluaXNoZWQgeWV0LlxuICAgICAgLy8gUHV0IHRoaXMgZXZlbnQgY3ljbGUgaW50byB0aGUgcXVldWUgYW5kIHdpbGwgZmluaXNoIHRoZW0gbGF0ZXIuXG4gICAgICB2YXIgYXJnczogYW55ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIHRoaXMuX2VtaXRRdWV1ZS51bnNoaWZ0KGFyZ3MpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2VtaXR0aW5nID0gdHJ1ZTtcblxuICAgIHZhciBldmVudCA9IE5hdmlnYXRpb25FdmVudC5wb29sKGV2ZW50VHlwZSwgdGhpcy5fdGFyZ2V0LCBkYXRhKTtcblxuICAgIGlmIChleHRyYUluZm8pIHtcbiAgICAgIGlmIChleHRyYUluZm8udGFyZ2V0KSB7XG4gICAgICAgIGV2ZW50LnRhcmdldCA9IGV4dHJhSW5mby50YXJnZXQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHRyYUluZm8uZXZlbnRQaGFzZSkge1xuICAgICAgICBldmVudC5ldmVudFBoYXNlID0gZXh0cmFJbmZvLmV2ZW50UGhhc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHRyYUluZm8uZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXh0cmFJbmZvLnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFdmVudEVtaXR0ZXIjZW1pdCBvbmx5IHRha2VzIGBldmVudFR5cGVgIGFzIGBTdHJpbmdgLiBDYXN0aW5nIGBldmVudFR5cGVgXG4gICAgLy8gdG8gYFN0cmluZ2AgdG8gbWFrZSBAZmxvdyBoYXBweS5cbiAgICBzdXBlci5lbWl0KFN0cmluZyhldmVudFR5cGUpLCBldmVudCk7XG5cbiAgICBpZiAodHlwZW9mIGRpZEVtaXRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZGlkRW1pdENhbGxiYWNrLmNhbGwodGhpcy5fdGFyZ2V0LCBldmVudCk7XG4gICAgfVxuICAgIGV2ZW50LmRpc3Bvc2UoKTtcblxuICAgIHRoaXMuX2VtaXR0aW5nID0gZmFsc2U7XG5cbiAgICB3aGlsZSAodGhpcy5fZW1pdFF1ZXVlLmxlbmd0aCkge1xuICAgICAgdmFyIGFyZ3M6IGFueSA9IHRoaXMuX2VtaXRRdWV1ZS5zaGlmdCgpO1xuICAgICAgdGhpcy5lbWl0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE5hdmlnYXRpb25FdmVudEVtaXR0ZXI7XG4iXX0=