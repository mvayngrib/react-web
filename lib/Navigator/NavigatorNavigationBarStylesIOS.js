








'use strict';

var _ReactDimensions=require('../Dimensions/Dimensions.web');var _ReactDimensions2=_interopRequireDefault(_ReactDimensions);
var _buildStyleInterpolator=require('./polyfills/buildStyleInterpolator');var _buildStyleInterpolator2=_interopRequireDefault(_buildStyleInterpolator);
var _merge=require('./polyfills/merge');var _merge2=_interopRequireDefault(_merge);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

var NAV_BAR_HEIGHT=44;
var STATUS_BAR_HEIGHT=20;
var NAV_HEIGHT=NAV_BAR_HEIGHT+STATUS_BAR_HEIGHT;

var BASE_STYLES={
Title:{
position:'absolute',
top:STATUS_BAR_HEIGHT,
left:0,
right:0,
alignItems:'center',
height:NAV_BAR_HEIGHT,
backgroundColor:'transparent'},

LeftButton:{
position:'absolute',
top:STATUS_BAR_HEIGHT,
left:0,
overflow:'hidden',
opacity:1,
height:NAV_BAR_HEIGHT,
backgroundColor:'transparent'},

RightButton:{
position:'absolute',
top:STATUS_BAR_HEIGHT,
right:0,
overflow:'hidden',
opacity:1,
alignItems:'flex-end',
height:NAV_BAR_HEIGHT,
backgroundColor:'transparent'}};



var opacityRatio=100;








function calcStyles(screenWidth){
var Stages={
Left:{
Title:(0,_merge2.default)(BASE_STYLES.Title,{left:-screenWidth/2,opacity:0}),
LeftButton:(0,_merge2.default)(BASE_STYLES.LeftButton,{left:-screenWidth/3,opacity:1}),
RightButton:(0,_merge2.default)(BASE_STYLES.RightButton,{left:screenWidth/3,opacity:0})},

Center:{
Title:(0,_merge2.default)(BASE_STYLES.Title,{left:0,opacity:1}),
LeftButton:(0,_merge2.default)(BASE_STYLES.LeftButton,{left:0,opacity:1}),
RightButton:(0,_merge2.default)(BASE_STYLES.RightButton,{left:2*screenWidth/3-0,opacity:1})},

Right:{
Title:(0,_merge2.default)(BASE_STYLES.Title,{left:screenWidth/2,opacity:0}),
LeftButton:(0,_merge2.default)(BASE_STYLES.LeftButton,{left:0,opacity:0}),
RightButton:(0,_merge2.default)(BASE_STYLES.RightButton,{left:screenWidth,opacity:0})}};



var Interpolators={

RightToCenter:buildSceneInterpolators(Stages.Right,Stages.Center),

CenterToLeft:buildSceneInterpolators(Stages.Center,Stages.Left),

RightToLeft:buildSceneInterpolators(Stages.Right,Stages.Left)};


return{
Stages:Stages,
Interpolators:Interpolators};

};

function buildSceneInterpolators(startStyles,endStyles){
return{
Title:(0,_buildStyleInterpolator2.default)({
opacity:{
type:'linear',
from:startStyles.Title.opacity,
to:endStyles.Title.opacity,
min:0,
max:1},

left:{
type:'linear',
from:startStyles.Title.left,
to:endStyles.Title.left,
min:0,
max:1,
extrapolate:true}}),


LeftButton:(0,_buildStyleInterpolator2.default)({
opacity:{
type:'linear',
from:startStyles.LeftButton.opacity,
to:endStyles.LeftButton.opacity,
min:0,
max:1,
round:opacityRatio},

left:{
type:'linear',
from:startStyles.LeftButton.left,
to:endStyles.LeftButton.left,
min:0,
max:1}}),


RightButton:(0,_buildStyleInterpolator2.default)({
opacity:{
type:'linear',
from:startStyles.RightButton.opacity,
to:endStyles.RightButton.opacity,
min:0,
max:1,
round:opacityRatio},

left:{
type:'linear',
from:startStyles.RightButton.left,
to:endStyles.RightButton.left,
min:0,
max:1,
extrapolate:true}})};



}

function getStyles(){
var screenWidth=_ReactDimensions2.default.get('window').width;
if(!caches[screenWidth]){
caches[screenWidth]=calcStyles(screenWidth);
}

return caches[screenWidth];
}

module.exports={
General:{
NavBarHeight:NAV_BAR_HEIGHT,
StatusBarHeight:STATUS_BAR_HEIGHT,
TotalNavHeight:NAV_HEIGHT},

get Interpolators(){
return getStyles().Interpolators;
},
get Stages(){
return getStyles().Stages;
}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdmlnYXRvck5hdmlnYXRpb25CYXJTdHlsZXNJT1MuanMiXSwibmFtZXMiOlsiTkFWX0JBUl9IRUlHSFQiLCJTVEFUVVNfQkFSX0hFSUdIVCIsIk5BVl9IRUlHSFQiLCJCQVNFX1NUWUxFUyIsIlRpdGxlIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJhbGlnbkl0ZW1zIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwiTGVmdEJ1dHRvbiIsIm92ZXJmbG93Iiwib3BhY2l0eSIsIlJpZ2h0QnV0dG9uIiwib3BhY2l0eVJhdGlvIiwiY2FsY1N0eWxlcyIsInNjcmVlbldpZHRoIiwiU3RhZ2VzIiwiTGVmdCIsIkNlbnRlciIsIlJpZ2h0IiwiSW50ZXJwb2xhdG9ycyIsIlJpZ2h0VG9DZW50ZXIiLCJidWlsZFNjZW5lSW50ZXJwb2xhdG9ycyIsIkNlbnRlclRvTGVmdCIsIlJpZ2h0VG9MZWZ0Iiwic3RhcnRTdHlsZXMiLCJlbmRTdHlsZXMiLCJ0eXBlIiwiZnJvbSIsInRvIiwibWluIiwibWF4IiwiZXh0cmFwb2xhdGUiLCJyb3VuZCIsImdldFN0eWxlcyIsImdldCIsIndpZHRoIiwiY2FjaGVzIiwibW9kdWxlIiwiZXhwb3J0cyIsIkdlbmVyYWwiLCJOYXZCYXJIZWlnaHQiLCJTdGF0dXNCYXJIZWlnaHQiLCJUb3RhbE5hdkhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBU0E7O0FBRUEsNkQ7QUFDQSwwRTtBQUNBLHdDOztBQUVBLEdBQUlBLGdCQUFpQixFQUFyQjtBQUNBLEdBQUlDLG1CQUFvQixFQUF4QjtBQUNBLEdBQUlDLFlBQWFGLGVBQWlCQyxpQkFBbEM7O0FBRUEsR0FBSUUsYUFBYztBQUNoQkMsTUFBTztBQUNMQyxTQUFVLFVBREw7QUFFTEMsSUFBS0wsaUJBRkE7QUFHTE0sS0FBTSxDQUhEO0FBSUxDLE1BQU8sQ0FKRjtBQUtMQyxXQUFZLFFBTFA7QUFNTEMsT0FBUVYsY0FOSDtBQU9MVyxnQkFBaUIsYUFQWixDQURT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LENBQTBCO0FBQ3hCc0IsT0FBT3RCLFdBQVAsRUFBc0JELFdBQVdDLFdBQVgsQ0FBdEI7QUFDRDs7QUFFRCxNQUFPc0IsUUFBT3RCLFdBQVAsQ0FBUDtBQUNEOztBQUVEdUIsT0FBT0MsT0FBUCxDQUFpQjtBQUNmQyxRQUFTO0FBQ1BDLGFBQWM1QyxjQURQO0FBRVA2QyxnQkFBaUI1QyxpQkFGVjtBQUdQNkMsZUFBZ0I1QyxVQUhULENBRE07O0FBTWYsR0FBSXFCLGNBQUosRUFBb0I7QUFDbEIsTUFBT2MsYUFBWWQsYUFBbkI7QUFDRCxDQVJjO0FBU2YsR0FBSUosT0FBSixFQUFhO0FBQ1gsTUFBT2tCLGFBQVlsQixNQUFuQjtBQUNELENBWGMsQ0FBakIiLCJmaWxlIjoiTmF2aWdhdG9yTmF2aWdhdGlvbkJhclN0eWxlc0lPUy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TmF2aWdhdG9yTmF2aWdhdGlvbkJhclN0eWxlc0lPU1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBEaW1lbnNpb25zIGZyb20gJ1JlYWN0RGltZW5zaW9ucyc7XG5pbXBvcnQgYnVpbGRTdHlsZUludGVycG9sYXRvciBmcm9tICcuL3BvbHlmaWxscy9idWlsZFN0eWxlSW50ZXJwb2xhdG9yJztcbmltcG9ydCBtZXJnZSBmcm9tICcuL3BvbHlmaWxscy9tZXJnZSc7XG5cbnZhciBOQVZfQkFSX0hFSUdIVCA9IDQ0O1xudmFyIFNUQVRVU19CQVJfSEVJR0hUID0gMjA7XG52YXIgTkFWX0hFSUdIVCA9IE5BVl9CQVJfSEVJR0hUICsgU1RBVFVTX0JBUl9IRUlHSFQ7XG5cbnZhciBCQVNFX1NUWUxFUyA9IHtcbiAgVGl0bGU6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IFNUQVRVU19CQVJfSEVJR0hULFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgaGVpZ2h0OiBOQVZfQkFSX0hFSUdIVCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gIH0sXG4gIExlZnRCdXR0b246IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IFNUQVRVU19CQVJfSEVJR0hULFxuICAgIGxlZnQ6IDAsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIG9wYWNpdHk6IDEsXG4gICAgaGVpZ2h0OiBOQVZfQkFSX0hFSUdIVCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gIH0sXG4gIFJpZ2h0QnV0dG9uOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiBTVEFUVVNfQkFSX0hFSUdIVCxcbiAgICByaWdodDogMCxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgb3BhY2l0eTogMSxcbiAgICBhbGlnbkl0ZW1zOiAnZmxleC1lbmQnLFxuICAgIGhlaWdodDogTkFWX0JBUl9IRUlHSFQsXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICB9LFxufTtcblxudmFyIG9wYWNpdHlSYXRpbyA9IDEwMDtcblxuLy8gVGhlcmUgYXJlIDMgc3RhZ2VzOiBsZWZ0LCBjZW50ZXIsIHJpZ2h0LiBBbGwgcHJldmlvdXMgbmF2aWdhdGlvblxuLy8gaXRlbXMgYXJlIGluIHRoZSBsZWZ0IHN0YWdlLiBUaGUgY3VycmVudCBuYXZpZ2F0aW9uIGl0ZW0gaXMgaW4gdGhlXG4vLyBjZW50ZXIgc3RhZ2UuIEFsbCB1cGNvbWluZyBuYXZpZ2F0aW9uIGl0ZW1zIGFyZSBpbiB0aGUgcmlnaHQgc3RhZ2UuXG4vLyBBbm90aGVyIHdheSB0byB0aGluayBvZiB0aGUgc3RhZ2VzIGlzIGluIHRlcm1zIG9mIHRyYW5zaXRpb25zLiBXaGVuXG4vLyB3ZSBtb3ZlIGZvcndhcmQgaW4gdGhlIG5hdmlnYXRpb24gc3RhY2ssIHdlIHBlcmZvcm0gYVxuLy8gcmlnaHQtdG8tY2VudGVyIHRyYW5zaXRpb24gb24gdGhlIG5ldyBuYXZpZ2F0aW9uIGl0ZW0gYW5kIGFcbi8vIGNlbnRlci10by1sZWZ0IHRyYW5zaXRpb24gb24gdGhlIGN1cnJlbnQgbmF2aWdhdGlvbiBpdGVtLlxuZnVuY3Rpb24gY2FsY1N0eWxlcyAoc2NyZWVuV2lkdGgpIHtcbiAgY29uc3QgU3RhZ2VzID0ge1xuICAgIExlZnQ6IHtcbiAgICAgIFRpdGxlOiBtZXJnZShCQVNFX1NUWUxFUy5UaXRsZSwgeyBsZWZ0OiAtIHNjcmVlbldpZHRoIC8gMiwgb3BhY2l0eTogMCB9KSxcbiAgICAgIExlZnRCdXR0b246IG1lcmdlKEJBU0VfU1RZTEVTLkxlZnRCdXR0b24sIHsgbGVmdDogLSBzY3JlZW5XaWR0aCAvIDMsIG9wYWNpdHk6IDEgfSksXG4gICAgICBSaWdodEJ1dHRvbjogbWVyZ2UoQkFTRV9TVFlMRVMuUmlnaHRCdXR0b24sIHsgbGVmdDogc2NyZWVuV2lkdGggLyAzLCBvcGFjaXR5OiAwIH0pLFxuICAgIH0sXG4gICAgQ2VudGVyOiB7XG4gICAgICBUaXRsZTogbWVyZ2UoQkFTRV9TVFlMRVMuVGl0bGUsIHsgbGVmdDogMCwgb3BhY2l0eTogMSB9KSxcbiAgICAgIExlZnRCdXR0b246IG1lcmdlKEJBU0VfU1RZTEVTLkxlZnRCdXR0b24sIHsgbGVmdDogMCwgb3BhY2l0eTogMSB9KSxcbiAgICAgIFJpZ2h0QnV0dG9uOiBtZXJnZShCQVNFX1NUWUxFUy5SaWdodEJ1dHRvbiwgeyBsZWZ0OiAyICogc2NyZWVuV2lkdGggLyAzIC0gMCwgb3BhY2l0eTogMSB9KSxcbiAgICB9LFxuICAgIFJpZ2h0OiB7XG4gICAgICBUaXRsZTogbWVyZ2UoQkFTRV9TVFlMRVMuVGl0bGUsIHsgbGVmdDogc2NyZWVuV2lkdGggLyAyLCBvcGFjaXR5OiAwIH0pLFxuICAgICAgTGVmdEJ1dHRvbjogbWVyZ2UoQkFTRV9TVFlMRVMuTGVmdEJ1dHRvbiwgeyBsZWZ0OiAwLCBvcGFjaXR5OiAwIH0pLFxuICAgICAgUmlnaHRCdXR0b246IG1lcmdlKEJBU0VfU1RZTEVTLlJpZ2h0QnV0dG9uLCB7IGxlZnQ6IHNjcmVlbldpZHRoLCBvcGFjaXR5OiAwIH0pLFxuICAgIH0sXG4gIH1cblxuICBjb25zdCBJbnRlcnBvbGF0b3JzID0ge1xuICAgIC8vIEFuaW1hdGluZyAqaW50byogdGhlIGNlbnRlciBzdGFnZSBmcm9tIHRoZSByaWdodFxuICAgIFJpZ2h0VG9DZW50ZXI6IGJ1aWxkU2NlbmVJbnRlcnBvbGF0b3JzKFN0YWdlcy5SaWdodCwgU3RhZ2VzLkNlbnRlciksXG4gICAgLy8gQW5pbWF0aW5nIG91dCBvZiB0aGUgY2VudGVyIHN0YWdlLCB0byB0aGUgbGVmdFxuICAgIENlbnRlclRvTGVmdDogYnVpbGRTY2VuZUludGVycG9sYXRvcnMoU3RhZ2VzLkNlbnRlciwgU3RhZ2VzLkxlZnQpLFxuICAgIC8vIEJvdGggc3RhZ2VzIChhbmltYXRpbmcgKnBhc3QqIHRoZSBjZW50ZXIgc3RhZ2UpXG4gICAgUmlnaHRUb0xlZnQ6IGJ1aWxkU2NlbmVJbnRlcnBvbGF0b3JzKFN0YWdlcy5SaWdodCwgU3RhZ2VzLkxlZnQpLFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBTdGFnZXMsXG4gICAgSW50ZXJwb2xhdG9yc1xuICB9XG59O1xuXG5mdW5jdGlvbiBidWlsZFNjZW5lSW50ZXJwb2xhdG9ycyhzdGFydFN0eWxlcywgZW5kU3R5bGVzKSB7XG4gIHJldHVybiB7XG4gICAgVGl0bGU6IGJ1aWxkU3R5bGVJbnRlcnBvbGF0b3Ioe1xuICAgICAgb3BhY2l0eToge1xuICAgICAgICB0eXBlOiAnbGluZWFyJyxcbiAgICAgICAgZnJvbTogc3RhcnRTdHlsZXMuVGl0bGUub3BhY2l0eSxcbiAgICAgICAgdG86IGVuZFN0eWxlcy5UaXRsZS5vcGFjaXR5LFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMSxcbiAgICAgIH0sXG4gICAgICBsZWZ0OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICBmcm9tOiBzdGFydFN0eWxlcy5UaXRsZS5sZWZ0LFxuICAgICAgICB0bzogZW5kU3R5bGVzLlRpdGxlLmxlZnQsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAxLFxuICAgICAgICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgTGVmdEJ1dHRvbjogYnVpbGRTdHlsZUludGVycG9sYXRvcih7XG4gICAgICBvcGFjaXR5OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICBmcm9tOiBzdGFydFN0eWxlcy5MZWZ0QnV0dG9uLm9wYWNpdHksXG4gICAgICAgIHRvOiBlbmRTdHlsZXMuTGVmdEJ1dHRvbi5vcGFjaXR5LFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMSxcbiAgICAgICAgcm91bmQ6IG9wYWNpdHlSYXRpbyxcbiAgICAgIH0sXG4gICAgICBsZWZ0OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICBmcm9tOiBzdGFydFN0eWxlcy5MZWZ0QnV0dG9uLmxlZnQsXG4gICAgICAgIHRvOiBlbmRTdHlsZXMuTGVmdEJ1dHRvbi5sZWZ0LFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgUmlnaHRCdXR0b246IGJ1aWxkU3R5bGVJbnRlcnBvbGF0b3Ioe1xuICAgICAgb3BhY2l0eToge1xuICAgICAgICB0eXBlOiAnbGluZWFyJyxcbiAgICAgICAgZnJvbTogc3RhcnRTdHlsZXMuUmlnaHRCdXR0b24ub3BhY2l0eSxcbiAgICAgICAgdG86IGVuZFN0eWxlcy5SaWdodEJ1dHRvbi5vcGFjaXR5LFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMSxcbiAgICAgICAgcm91bmQ6IG9wYWNpdHlSYXRpbyxcbiAgICAgIH0sXG4gICAgICBsZWZ0OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICBmcm9tOiBzdGFydFN0eWxlcy5SaWdodEJ1dHRvbi5sZWZ0LFxuICAgICAgICB0bzogZW5kU3R5bGVzLlJpZ2h0QnV0dG9uLmxlZnQsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAxLFxuICAgICAgICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlcyAoKSB7XG4gIGNvbnN0IHNjcmVlbldpZHRoID0gRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLndpZHRoXG4gIGlmICghY2FjaGVzW3NjcmVlbldpZHRoXSkge1xuICAgIGNhY2hlc1tzY3JlZW5XaWR0aF0gPSBjYWxjU3R5bGVzKHNjcmVlbldpZHRoKVxuICB9XG5cbiAgcmV0dXJuIGNhY2hlc1tzY3JlZW5XaWR0aF1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEdlbmVyYWw6IHtcbiAgICBOYXZCYXJIZWlnaHQ6IE5BVl9CQVJfSEVJR0hULFxuICAgIFN0YXR1c0JhckhlaWdodDogU1RBVFVTX0JBUl9IRUlHSFQsXG4gICAgVG90YWxOYXZIZWlnaHQ6IE5BVl9IRUlHSFQsXG4gIH0sXG4gIGdldCBJbnRlcnBvbGF0b3JzKCkge1xuICAgIHJldHVybiBnZXRTdHlsZXMoKS5JbnRlcnBvbGF0b3JzXG4gIH0sXG4gIGdldCBTdGFnZXMoKSB7XG4gICAgcmV0dXJuIGdldFN0eWxlcygpLlN0YWdlc1xuICB9LFxufTtcbiJdfQ==