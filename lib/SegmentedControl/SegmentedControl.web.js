







'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _react=require('react');var _react2=_interopRequireDefault(_react);
var _ReactView=require('../View/View.web');var _ReactView2=_interopRequireDefault(_ReactView);
var _ReactText=require('../Text/Text.web');var _ReactText2=_interopRequireDefault(_ReactText);
var _ReactStyleSheet=require('../StyleSheet/StyleSheet.web');var _ReactStyleSheet2=_interopRequireDefault(_ReactStyleSheet);
var _NativeMethodsMixin=require('../Utilties/NativeMethodsMixin.web');
var _reactMixin=require('react-mixin');var _reactMixin2=_interopRequireDefault(_reactMixin);
var _autobindDecorator=require('autobind-decorator');var _autobindDecorator2=_interopRequireDefault(_autobindDecorator);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var

SegmentedControl=function(_Component){_inherits(SegmentedControl,_Component);function SegmentedControl(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SegmentedControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SegmentedControl.__proto__||Object.getPrototypeOf(SegmentedControl)).call.apply(_ref,[this].concat(args))),_this),_this.















































state={
selectedIndex:_this.props.selectedIndex,
momentary:false},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(SegmentedControl,[{key:'_onChange',value:function _onChange(


value,index,event){var _this2=this;

if(this.state.selectedIndex==index)return;

this.setState({
selectedIndex:index});


if(!event){
event={
nativeEvent:{}};

}

event.nativeEvent.value=value;
event.nativeEvent.selectedSegmentIndex=index;
this.props.onChange&&this.props.onChange(event);
this.props.onValueChange&&this.props.onValueChange(event.nativeEvent.
value);

if(this.props.momentary){
setTimeout(function(){return _this2.setState({
selectedIndex:null});},
300);
}
}},{key:'render',value:function render()

{var _this3=this;
var props=this.props;

var items=props.values.map(function(value,index){
return _react2.default.createElement(_ReactView2.default,{key:index,style:[
styles.segmentedControlItem,
props.tintColor?{borderColor:props.tintColor}:null,
_this3.state.selectedIndex===index?[styles.segmentedControlItemSelected,props.tintColor?{backgroundColor:props.tintColor}:null]:null,
index===0?styles.firstChild:styles.otherChild,
index===props.values.length-1?styles.lastChild:null]},

_react2.default.createElement(_ReactText2.default,{style:[
styles.segmentedControlText,
props.tintColor?{
color:props.tintColor}:
null,_this3.state.selectedIndex===index?styles.
segmentedControlTextSelected:null],

onPress:props.enabled?_this3._onChange.bind(_this3,value,index):null},' ',value,' '));
});

return _react2.default.createElement(_ReactView2.default,_extends({},this.props,{style:[styles.segmentedControl,props.enabled?null:styles.disable,this.props.style]}),
items);

}}]);return SegmentedControl;}(_react.Component);SegmentedControl.propTypes={values:_react.PropTypes.arrayOf(_react.PropTypes.string),selectedIndex:_react.PropTypes.number,onValueChange:_react.PropTypes.func,onChange:_react.PropTypes.func,enabled:_react.PropTypes.bool,tintColor:_react.PropTypes.string,momentary:_react.PropTypes.bool};SegmentedControl.defaultProps={values:[],enabled:true};
;

var defaultColor='#007AFF';

var styles=_ReactStyleSheet2.default.create({
segmentedControl:{
height:28,
justifyContent:'center',
flexDirection:'row'},

segmentedControlItem:{
flex:1,
backgroundColor:'white',
borderColor:defaultColor,
borderStyle:'solid',
borderTopWidth:1,
borderBottomWidth:1,
borderRightWidth:1,
borderLeftWidth:1},

segmentedControlItemSelected:{
backgroundColor:defaultColor},

segmentedControlText:{
color:defaultColor,
fontSize:12,
lineHeight:12,
padding:'7 0',
textAlign:'center'},

segmentedControlTextSelected:{
color:'white'},

disable:{
opacity:0.5},

firstChild:{
borderTopLeftRadius:3,
borderBottomLeftRadius:3,
borderRightWidth:0},

otherChild:{
borderRightWidth:0},

lastChild:{
borderTopRightRadius:3,
borderBottomRightRadius:3,
borderRightWidth:1}});



_reactMixin2.default.onClass(SegmentedControl,_NativeMethodsMixin.Mixin);
(0,_autobindDecorator2.default)(SegmentedControl);

SegmentedControl.isReactNativeComponent=true;exports.default=

SegmentedControl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlZ21lbnRlZENvbnRyb2wud2ViLmpzIl0sIm5hbWVzIjpbIlNlZ21lbnRlZENvbnRyb2wiLCJzdGF0ZSIsInNlbGVjdGVkSW5kZXgiLCJwcm9wcyIsIm1vbWVudGFyeSIsInZhbHVlIiwiaW5kZXgiLCJldmVudCIsInNldFN0YXRlIiwibmF0aXZlRXZlbnQiLCJzZWxlY3RlZFNlZ21lbnRJbmRleCIsIm9uQ2hhbmdlIiwib25WYWx1ZUNoYW5nZSIsInNldFRpbWVvdXQiLCJpdGVtcyIsInZhbHVlcyIsIm1hcCIsInN0eWxlcyIsInNlZ21lbnRlZENvbnRyb2xJdGVtIiwidGludENvbG9yIiwiYm9yZGVyQ29sb3IiLCJzZWdtZW50ZWRDb250cm9sSXRlbVNlbGVjdGVkIiwiYmFja2dyb3VuZENvbG9yIiwiZmlyc3RDaGlsZCIsIm90aGVyQ2hpbGQiLCJsZW5ndGgiLCJsYXN0Q2hpbGQiLCJzZWdtZW50ZWRDb250cm9sVGV4dCIsImNvbG9yIiwic2VnbWVudGVkQ29udHJvbFRleHRTZWxlY3RlZCIsImVuYWJsZWQiLCJfb25DaGFuZ2UiLCJiaW5kIiwic2VnbWVudGVkQ29udHJvbCIsImRpc2FibGUiLCJzdHlsZSIsInByb3BUeXBlcyIsImFycmF5T2YiLCJzdHJpbmciLCJudW1iZXIiLCJmdW5jIiwiYm9vbCIsImRlZmF1bHRQcm9wcyIsImRlZmF1bHRDb2xvciIsImNyZWF0ZSIsImhlaWdodCIsImp1c3RpZnlDb250ZW50IiwiZmxleERpcmVjdGlvbiIsImZsZXgiLCJib3JkZXJTdHlsZSIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwiYm9yZGVyTGVmdFdpZHRoIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwicGFkZGluZyIsInRleHRBbGlnbiIsIm9wYWNpdHkiLCJib3JkZXJUb3BMZWZ0UmFkaXVzIiwiYm9yZGVyQm90dG9tTGVmdFJhZGl1cyIsImJvcmRlclRvcFJpZ2h0UmFkaXVzIiwiYm9y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QUFnQzdCbkMsV0FBWTtBQUNWb0Msb0JBQXFCLENBRFg7QUFFVkMsdUJBQXdCLENBRmQ7QUFHVlIsaUJBQWtCLENBSFIsQ0FoQ2lCOztBQXFDN0I1QixXQUFZO0FBQ1Y0QixpQkFBa0IsQ0FEUixDQXJDaUI7O0FBd0M3QjFCLFVBQVc7QUFDVG1DLHFCQUFzQixDQURiO0FBRVRDLHdCQUF5QixDQUZoQjtBQUdUVixpQkFBa0IsQ0FIVCxDQXhDa0IsQ0FBbEIsQ0FBYjs7OztBQStDQSxxQkFBTVcsT0FBTixDQUFjL0QsZ0JBQWQ7QUFDQSxnQ0FBU0EsZ0JBQVQ7O0FBRUFBLGlCQUFpQmdFLHNCQUFqQixDQUEwQyxJQUExQyxDOztBQUVlaEUsZ0IiLCJmaWxlIjoiU2VnbWVudGVkQ29udHJvbC53ZWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCBGYWNlYm9vaywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZWdtZW50ZWRDb250cm9sXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFZpZXcgZnJvbSAnUmVhY3RWaWV3JztcbmltcG9ydCBUZXh0IGZyb20gJ1JlYWN0VGV4dCc7XG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICdSZWFjdFN0eWxlU2hlZXQnO1xuaW1wb3J0IHsgTWl4aW4gYXMgTmF0aXZlTWV0aG9kc01peGluIH0gZnJvbSAnTmF0aXZlTWV0aG9kc01peGluJztcbmltcG9ydCBtaXhpbiBmcm9tICdyZWFjdC1taXhpbic7XG5pbXBvcnQgYXV0b2JpbmQgZnJvbSAnYXV0b2JpbmQtZGVjb3JhdG9yJztcblxuY2xhc3MgU2VnbWVudGVkQ29udHJvbCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgbGFiZWxzIGZvciB0aGUgY29udHJvbCdzIHNlZ21lbnQgYnV0dG9ucywgaW4gb3JkZXIuXG4gICAgICovXG4gICAgdmFsdWVzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBpbiBgcHJvcHMudmFsdWVzYCBvZiB0aGUgc2VnbWVudCB0byBiZSBwcmUtc2VsZWN0ZWRcbiAgICAgKi9cbiAgICBzZWxlY3RlZEluZGV4OiBQcm9wVHlwZXMubnVtYmVyLFxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0YXBzIGEgc2VnbWVudDtcbiAgICAgKiBwYXNzZXMgdGhlIHNlZ21lbnQncyB2YWx1ZSBhcyBhbiBhcmd1bWVudFxuICAgICAqL1xuICAgIG9uVmFsdWVDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0YXBzIGEgc2VnbWVudDtcbiAgICAgKiBwYXNzZXMgdGhlIGV2ZW50IGFzIGFuIGFyZ3VtZW50XG4gICAgICovXG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogSWYgZmFsc2UgdGhlIHVzZXIgd29uJ3QgYmUgYWJsZSB0byBpbnRlcmFjdCB3aXRoIHRoZSBjb250cm9sLlxuICAgICAqIERlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cbiAgICAgKi9cbiAgICBlbmFibGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEFjY2VudCBjb2xvciBvZiB0aGUgY29udHJvbC5cbiAgICAgKi9cbiAgICB0aW50Q29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGVuIHNlbGVjdGluZyBhIHNlZ21lbnQgd29uJ3QgcGVyc2lzdCB2aXN1YWxseS5cbiAgICAgKiBUaGUgYG9uVmFsdWVDaGFuZ2VgIGNhbGxiYWNrIHdpbGwgc3RpbGwgd29yayBhcyBleHBlY3RlZC5cbiAgICAgKi9cbiAgICBtb21lbnRhcnk6IFByb3BUeXBlcy5ib29sXG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHZhbHVlczogW10sXG4gICAgZW5hYmxlZDogdHJ1ZVxuICB9XG5cbiAgc3RhdGUgPSB7XG4gICAgc2VsZWN0ZWRJbmRleDogdGhpcy5wcm9wcy5zZWxlY3RlZEluZGV4LFxuICAgIG1vbWVudGFyeTogZmFsc2VcbiAgfVxuXG4gIF9vbkNoYW5nZSh2YWx1ZSwgaW5kZXgsIGV2ZW50OiBFdmVudCkge1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCA9PSBpbmRleCkgcmV0dXJuO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzZWxlY3RlZEluZGV4OiBpbmRleFxuICAgIH0pO1xuXG4gICAgaWYgKCFldmVudCkge1xuICAgICAgZXZlbnQgPSB7XG4gICAgICAgIG5hdGl2ZUV2ZW50OiB7fVxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gc2hpbSB0aGUgdmFsdWVcbiAgICBldmVudC5uYXRpdmVFdmVudC52YWx1ZSA9IHZhbHVlO1xuICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnNlbGVjdGVkU2VnbWVudEluZGV4ID0gaW5kZXg7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSAmJiB0aGlzLnByb3BzLm9uQ2hhbmdlKGV2ZW50KTtcbiAgICB0aGlzLnByb3BzLm9uVmFsdWVDaGFuZ2UgJiYgdGhpcy5wcm9wcy5vblZhbHVlQ2hhbmdlKGV2ZW50Lm5hdGl2ZUV2ZW50XG4gICAgICAudmFsdWUpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMubW9tZW50YXJ5KSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzZWxlY3RlZEluZGV4OiBudWxsXG4gICAgICB9KSwgMzAwKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgIGxldCBpdGVtcyA9IHByb3BzLnZhbHVlcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuICg8VmlldyBrZXk9e2luZGV4fSBzdHlsZT17W1xuICAgICAgICBzdHlsZXMuc2VnbWVudGVkQ29udHJvbEl0ZW0sXG4gICAgICAgIHByb3BzLnRpbnRDb2xvciA/IHsgYm9yZGVyQ29sb3I6IHByb3BzLnRpbnRDb2xvciB9IDogbnVsbCxcbiAgICAgICAgKHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCA9PT0gaW5kZXgpID8gWyBzdHlsZXMuc2VnbWVudGVkQ29udHJvbEl0ZW1TZWxlY3RlZCwgcHJvcHMudGludENvbG9yID8geyBiYWNrZ3JvdW5kQ29sb3I6IHByb3BzLnRpbnRDb2xvciB9IDogbnVsbCBdIDogbnVsbCxcbiAgICAgICAgaW5kZXggPT09IDAgPyBzdHlsZXMuZmlyc3RDaGlsZCA6IHN0eWxlcy5vdGhlckNoaWxkLFxuICAgICAgICBpbmRleCA9PT0gcHJvcHMudmFsdWVzLmxlbmd0aCAtIDEgPyBzdHlsZXMubGFzdENoaWxkIDogbnVsbFxuICAgICAgXX0+XG4gICAgICAgICAgPFRleHQgc3R5bGU9e1tcbiAgICAgICAgICAgIHN0eWxlcy5zZWdtZW50ZWRDb250cm9sVGV4dCxcbiAgICAgICAgICAgIHByb3BzLnRpbnRDb2xvciA/IHtcbiAgICAgICAgICAgICAgY29sb3I6IHByb3BzLnRpbnRDb2xvclxuICAgICAgICAgICAgfSA6IG51bGwsICh0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXggPT09IGluZGV4KSA/IHN0eWxlc1xuICAgICAgICAgICAgLnNlZ21lbnRlZENvbnRyb2xUZXh0U2VsZWN0ZWQgOiBudWxsXG4gICAgICAgICAgXX1cbiAgICAgICAgb25QcmVzcz17cHJvcHMuZW5hYmxlZCA/IHRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcywgdmFsdWUsIGluZGV4KSA6IG51bGx9PiB7dmFsdWV9IDwvVGV4dD48L1ZpZXc+KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoPFZpZXcgey4uLnRoaXMucHJvcHN9IHN0eWxlPXtbc3R5bGVzLnNlZ21lbnRlZENvbnRyb2wsIHByb3BzLmVuYWJsZWQgPyBudWxsIDogc3R5bGVzLmRpc2FibGUsIHRoaXMucHJvcHMuc3R5bGVdfT5cbiAgICAgICAgICB7aXRlbXN9XG4gICAgICAgIDwvVmlldz4pO1xuICB9XG59O1xuXG5jb25zdCBkZWZhdWx0Q29sb3IgPSAnIzAwN0FGRic7XG5cbmxldCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHNlZ21lbnRlZENvbnRyb2w6IHtcbiAgICBoZWlnaHQ6IDI4LFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93J1xuICB9LFxuICBzZWdtZW50ZWRDb250cm9sSXRlbToge1xuICAgIGZsZXg6IDEsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgIGJvcmRlckNvbG9yOiBkZWZhdWx0Q29sb3IsXG4gICAgYm9yZGVyU3R5bGU6ICdzb2xpZCcsXG4gICAgYm9yZGVyVG9wV2lkdGg6IDEsXG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IDEsXG4gICAgYm9yZGVyUmlnaHRXaWR0aDogMSxcbiAgICBib3JkZXJMZWZ0V2lkdGg6IDEsXG4gIH0sXG4gIHNlZ21lbnRlZENvbnRyb2xJdGVtU2VsZWN0ZWQ6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGRlZmF1bHRDb2xvcixcbiAgfSxcbiAgc2VnbWVudGVkQ29udHJvbFRleHQ6IHtcbiAgICBjb2xvcjogZGVmYXVsdENvbG9yLFxuICAgIGZvbnRTaXplOiAxMixcbiAgICBsaW5lSGVpZ2h0OiAxMixcbiAgICBwYWRkaW5nOiAnNyAwJyxcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gIH0sXG4gIHNlZ21lbnRlZENvbnRyb2xUZXh0U2VsZWN0ZWQ6IHtcbiAgICBjb2xvcjogJ3doaXRlJyxcbiAgfSxcbiAgZGlzYWJsZToge1xuICAgIG9wYWNpdHk6IDAuNVxuICB9LFxuICBmaXJzdENoaWxkOiB7XG4gICAgYm9yZGVyVG9wTGVmdFJhZGl1czogMyxcbiAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiAzLFxuICAgIGJvcmRlclJpZ2h0V2lkdGg6IDAsXG4gIH0sXG4gIG90aGVyQ2hpbGQ6IHtcbiAgICBib3JkZXJSaWdodFdpZHRoOiAwLFxuICB9LFxuICBsYXN0Q2hpbGQ6IHtcbiAgICBib3JkZXJUb3BSaWdodFJhZGl1czogMyxcbiAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogMyxcbiAgICBib3JkZXJSaWdodFdpZHRoOiAxLFxuICB9LFxufSk7XG5cbm1peGluLm9uQ2xhc3MoU2VnbWVudGVkQ29udHJvbCwgTmF0aXZlTWV0aG9kc01peGluKTtcbmF1dG9iaW5kKFNlZ21lbnRlZENvbnRyb2wpO1xuXG5TZWdtZW50ZWRDb250cm9sLmlzUmVhY3ROYXRpdmVDb21wb25lbnQgPSB0cnVlO1xuXG5leHBvcnQgZGVmYXVsdCBTZWdtZW50ZWRDb250cm9sO1xuIl19