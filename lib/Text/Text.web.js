







'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};

var _react=require('react');var _react2=_interopRequireDefault(_react);
var _ReactTouchable=require('../Touchable/Touchable');
var _ReactLayoutMixin=require('../Utilties/LayoutMixin');
var _NativeMethodsMixin=require('../Utilties/NativeMethodsMixin.web');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}


































var Text=_react2.default.createClass({displayName:'Text',

mixins:[_ReactLayoutMixin.Mixin,_ReactTouchable.Mixin,_NativeMethodsMixin.Mixin],

propTypes:{





numberOfLines:_react2.default.PropTypes.number,





onLayout:_react2.default.PropTypes.func,



onPress:_react2.default.PropTypes.func,





suppressHighlighting:_react2.default.PropTypes.bool,



testID:_react2.default.PropTypes.string,



allowFontScaling:_react2.default.PropTypes.bool},


getInitialState:function getInitialState(){
return _extends({},this.touchableGetInitialState(),{
isHighlighted:false});

},

getDefaultProps:function getDefaultProps(){
return{
allowFontScaling:true};

},









onStartShouldSetResponder:function onStartShouldSetResponder(){
var shouldSetFromProps=this.props.onStartShouldSetResponder&&
this.props.onStartShouldSetResponder();
return shouldSetFromProps||!!this.props.onPress;
},




handleResponderTerminationRequest:function handleResponderTerminationRequest(){


var allowTermination=this.touchableHandleResponderTerminationRequest();
if(allowTermination&&this.props.onResponderTerminationRequest){
allowTermination=this.props.onResponderTerminationRequest();
}
return allowTermination;
},

handleResponderGrant:function handleResponderGrant(e,dispatchID){
this.touchableHandleResponderGrant(e,dispatchID);
this.props.onResponderGrant&&
this.props.onResponderGrant.apply(this,arguments);
},

handleResponderMove:function handleResponderMove(e){
this.touchableHandleResponderMove(e);
this.props.onResponderMove&&
this.props.onResponderMove.apply(this,arguments);
},

handleResponderRelease:function handleResponderRelease(e){
this.touchableHandleResponderRelease(e);
this.props.onResponderRelease&&
this.props.onResponderRelease.apply(this,arguments);
},

handleResponderTerminate:function handleResponderTerminate(e){
this.touchableHandleResponderTerminate(e);
this.props.onResponderTerminate&&
this.props.onResponderTerminate.apply(this,arguments);
},

touchableHandleActivePressIn:function touchableHandleActivePressIn(){
if(this.props.suppressHighlighting||!this.props.onPress){
return;
}
this.setState({
isHighlighted:true});

},

touchableHandleActivePressOut:function touchableHandleActivePressOut(){
if(this.props.suppressHighlighting||!this.props.onPress){
return;
}
this.setState({
isHighlighted:false});

},

touchableHandlePress:function touchableHandlePress(){
this.props.onPress&&this.props.onPress();
},

touchableGetPressRectOffset:function touchableGetPressRectOffset(){
return PRESS_RECT_OFFSET;
},

getChildContext:function getChildContext(){
return{isInAParentText:true};
},

contextTypes:{
isInAParentText:_react2.default.PropTypes.bool},


childContextTypes:{
isInAParentText:_react2.default.PropTypes.bool},


render:function render(){
var props=_extends({},this.props);

if(props.accessible!==false){
props.accessible=true;
}
props.isHighlighted=this.state.isHighlighted;
props.onStartShouldSetResponder=this.onStartShouldSetResponder;
props.onResponderTerminationRequest=
this.handleResponderTerminationRequest;
props.onResponderGrant=this.handleResponderGrant;
props.onResponderMove=this.handleResponderMove;
props.onResponderRelease=this.handleResponderRelease;
props.onResponderTerminate=this.handleResponderTerminate;var


numberOfLines=

props.numberOfLines;var style=props.style;

style=_extends({},props.style);

if(typeof style.lineHeight=='number'){
style.lineHeight+='px';
}


var lineHeight=style.lineHeight||(style.fontSize||16)*1.2;
if(typeof lineHeight=='number'){
lineHeight+='px';
}
style.lineHeight=lineHeight;

if(style.textDecorationLine){
style.textDecoration=style.textDecorationLine;
}

if(!props.children){

}

return(
_react2.default.createElement('span',_extends({},props,{
style:_extends(
{
display:this.context.isInAParentText?'inline':'inline-block',
margin:0,
padding:0,
wordWrap:'break-word',
fontFamily:'Helvetica Neue, STHeiTi, sans-serif'},

style,
numberOfLines&&{
overflow:'hidden',
textOverflow:'ellipsis',
wordWrap:'break-word',
display:'-webkit-box',
WebkitLineClamp:numberOfLines,
WebkitBoxOrient:'vertical',
maxHeight:parseFloat(lineHeight)*numberOfLines})})));



}});









var PRESS_RECT_OFFSET={top:20,left:20,right:20,bottom:30};

Text.isReactNativeComponent=true;exports.default=

Text;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHQud2ViLmpzIl0sIm5hbWVzIjpbIlRleHQiLCJjcmVhdGVDbGFzcyIsIm1peGlucyIsInByb3BUeXBlcyIsIm51bWJlck9mTGluZXMiLCJQcm9wVHlwZXMiLCJudW1iZXIiLCJvbkxheW91dCIsImZ1bmMiLCJvblByZXNzIiwic3VwcHJlc3NIaWdobGlnaHRpbmciLCJib29sIiwidGVzdElEIiwic3RyaW5nIiwiYWxsb3dGb250U2NhbGluZyIsImdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsImlzSGlnaGxpZ2h0ZWQiLCJnZXREZWZhdWx0UHJvcHMiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwic2hvdWxkU2V0RnJvbVByb3BzIiwicHJvcHMiLCJoYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJhbGxvd1Rlcm1pbmF0aW9uIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0Iiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJoYW5kbGVSZXNwb25kZXJHcmFudCIsImUiLCJkaXNwYXRjaElEIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJvblJlc3BvbmRlckdyYW50IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJoYW5kbGVSZXNwb25kZXJNb3ZlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZSIsIm9uUmVzcG9uZGVyTW92ZSIsImhhbmRsZVJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJSZWxlYXNlIiwiaGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwib25SZXNwb25kZXJUZXJtaW5hdGUiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwic2V0U3RhdGUiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCIsInRvdWNoYWJsZUhhbmRsZVByZXNzIiwidG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0IiwiUFJFU1NfUkVDVF9PRkZTRVQiLCJnZXRDaGlsZENvbnRleHQiLCJpc0luQVBhcmVudFRleHQiLCJjb250ZXh0VHlwZXMiLCJjaGlsZENvbnRleHRUeXBlcyIsInJlbmRlciIsImFjY2Vzc2libGUiLCJzdGF0ZSIsInN0eWxlIiwibGluZUhlaWdodCIsImZvbnRTaXplIiwidGV4dERlY29yYXRpb25MaW5lIiwidGV4dERlY29yYXRpb24iLCJjaGlsZHJlbiIsImRpc3BsYXkiLCJjb250ZXh0IiwibWFyZ2luIiwicGFkZGluZyIsIndvcmRXcmFwIiwiZm9udEZhbWlseSIsIm92ZXJmbG93IiwidGV4dE92ZXJmbG93IiwiV2Via2l0TGluZUNsYW1wIiwiV2Via2l0Qm94T3JpZW50IiwibWF4SGVpZ2h0IiwicGFyc2VGbG9hdCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsImlzUmVhY3ROYXRpdmVDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBUUEsYTs7QUFFQSw0QjtBQUNBO0FBQ0E7QUFDQSxzRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQ0EsR0FBSUEsTUFBTyxnQkFBTUMsV0FBTixDQUFrQjs7QUFFM0JDLE9BQVEseUVBRm1COztBQUkzQkMsVUFBVzs7Ozs7O0FBTVRDLGNBQWUsZ0JBQU1DLFNBQU4sQ0FBZ0JDLE1BTnRCOzs7Ozs7QUFZVEMsU0FBVSxnQkFBTUYsU0FBTixDQUFnQkcsSUFaakI7Ozs7QUFnQlRDLFFBQVMsZ0JBQU1KLFNBQU4sQ0FBZ0JHLElBaEJoQjs7Ozs7O0FBc0JURSxxQkFBc0IsZ0JBQU1MLFNBQU4sQ0FBZ0JNLElBdEI3Qjs7OztBQTBCVEMsT0FBUSxnQkFBTVAsU0FBTixDQUFnQlEsTUExQmY7Ozs7QUE4QlRDLGlCQUFrQixnQkFBTVQsU0FBTixDQUFnQk0sSUE5QnpCLENBSmdCOzs7QUFxQzNCSSxlQXJD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LE1BQU1DLFVBQU4sQ0FBbUJBLFVBQW5COztBQUVBLEdBQUlELE1BQU1HLGtCQUFWLENBQThCO0FBQzVCSCxNQUFNSSxjQUFOLENBQXVCSixNQUFNRyxrQkFBN0I7QUFDRDs7QUFFRCxHQUFJLENBQUNyQyxNQUFNdUMsUUFBWCxDQUFxQjs7QUFFcEI7O0FBRUQ7QUFDRSxpREFBVXZDLEtBQVY7QUFDRTtBQUNLO0FBQ0R3QyxRQUFTLEtBQUtDLE9BQUwsQ0FBYWIsZUFBYixDQUErQixRQUEvQixDQUEwQyxjQURsRDtBQUVEYyxPQUFRLENBRlA7QUFHREMsUUFBUyxDQUhSO0FBSURDLFNBQVUsWUFKVDtBQUtEQyxXQUFZLHFDQUxYLENBREw7O0FBUUtYLEtBUkw7QUFTTW5ELGVBQWlCO0FBQ25CK0QsU0FBVSxRQURTO0FBRW5CQyxhQUFjLFVBRks7QUFHbkJILFNBQVUsWUFIUztBQUluQkosUUFBUyxhQUpVO0FBS25CUSxnQkFBaUJqRSxhQUxFO0FBTW5Ca0UsZ0JBQWlCLFVBTkU7QUFPbkJDLFVBQVdDLFdBQVdoQixVQUFYLEVBQXlCcEQsYUFQakIsQ0FUdkIsQ0FERixHQURGOzs7O0FBc0JELENBek0wQixDQUFsQixDQUFYOzs7Ozs7Ozs7O0FBbU5BLEdBQUkyQyxtQkFBb0IsQ0FBQzBCLElBQUssRUFBTixDQUFVQyxLQUFNLEVBQWhCLENBQW9CQyxNQUFPLEVBQTNCLENBQStCQyxPQUFRLEVBQXZDLENBQXhCOztBQUVBNUUsS0FBSzZFLHNCQUFMLENBQThCLElBQTlCLEM7O0FBRWU3RSxJIiwiZmlsZSI6IlRleHQud2ViLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNSwgRmFjZWJvb2ssIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0VGV4dFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNaXhpbiBhcyBUb3VjaGFibGVNaXhpbiB9IGZyb20gJ1JlYWN0VG91Y2hhYmxlJztcbmltcG9ydCB7IE1peGluIGFzIExheW91dE1peGluIH0gZnJvbSAnUmVhY3RMYXlvdXRNaXhpbic7XG5pbXBvcnQgeyBNaXhpbiBhcyBOYXRpdmVNZXRob2RzTWl4aW4gfSBmcm9tICdOYXRpdmVNZXRob2RzTWl4aW4nO1xuXG4vKipcbiAqIEEgUmVhY3QgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHRleHQgd2hpY2ggc3VwcG9ydHMgbmVzdGluZyxcbiAqIHN0eWxpbmcsIGFuZCB0b3VjaCBoYW5kbGluZy4gIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgdGhlIG5lc3RlZCB0aXRsZSBhbmRcbiAqIGJvZHkgdGV4dCB3aWxsIGluaGVyaXQgdGhlIGBmb250RmFtaWx5YCBmcm9tIGBzdHlsZXMuYmFzZVRleHRgLCBidXQgdGhlIHRpdGxlXG4gKiBwcm92aWRlcyBpdHMgb3duIGFkZGl0aW9uYWwgc3R5bGVzLiAgVGhlIHRpdGxlIGFuZCBib2R5IHdpbGwgc3RhY2sgb24gdG9wIG9mXG4gKiBlYWNoIG90aGVyIG9uIGFjY291bnQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZXM6XG4gKlxuICogYGBgXG4gKiByZW5kZXJUZXh0KCkge1xuICogICByZXR1cm4gKFxuICogICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMuYmFzZVRleHR9PlxuICogICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50aXRsZVRleHR9IG9uUHJlc3M9e3RoaXMub25QcmVzc1RpdGxlfT5cbiAqICAgICAgICAge3RoaXMuc3RhdGUudGl0bGVUZXh0ICsgJ1xcblxcbid9XG4gKiAgICAgICA8L1RleHQ+XG4gKiAgICAgICA8VGV4dCBudW1iZXJPZkxpbmVzPXs1fT5cbiAqICAgICAgICAge3RoaXMuc3RhdGUuYm9keVRleHR9XG4gKiAgICAgICA8L1RleHQ+XG4gKiAgICAgPC9UZXh0PlxuICogICApO1xuICogfSxcbiAqIC4uLlxuICogbGV0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAqICAgYmFzZVRleHQ6IHtcbiAqICAgICBmb250RmFtaWx5OiAnQ29jaGluJyxcbiAqICAgfSxcbiAqICAgdGl0bGVUZXh0OiB7XG4gKiAgICAgZm9udFNpemU6IDIwLFxuICogICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAqICAgfSxcbiAqIH07XG4gKiBgYGBcbiAqL1xuXG5sZXQgVGV4dCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICBtaXhpbnM6IFtMYXlvdXRNaXhpbiwgVG91Y2hhYmxlTWl4aW4sIE5hdGl2ZU1ldGhvZHNNaXhpbl0sXG5cbiAgcHJvcFR5cGVzOiB7XG4gICAgLyoqXG4gICAgICogVXNlZCB0byB0cnVuY2F0ZSB0aGUgdGV4dCB3aXRoIGFuIGVsaXBzaXMgYWZ0ZXIgY29tcHV0aW5nIHRoZSB0ZXh0XG4gICAgICogbGF5b3V0LCBpbmNsdWRpbmcgbGluZSB3cmFwcGluZywgc3VjaCB0aGF0IHRoZSB0b3RhbCBudW1iZXIgb2YgbGluZXNcbiAgICAgKiBkb2VzIG5vdCBleGNlZWQgdGhpcyBudW1iZXIuXG4gICAgICovXG4gICAgbnVtYmVyT2ZMaW5lczogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIG1vdW50IGFuZCBsYXlvdXQgY2hhbmdlcyB3aXRoXG4gICAgICpcbiAgICAgKiAgIGB7bmF0aXZlRXZlbnQ6IHtsYXlvdXQ6IHt4LCB5LCB3aWR0aCwgaGVpZ2h0fX19YFxuICAgICAqL1xuICAgIG9uTGF5b3V0OiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBwcmVzcy5cbiAgICAgKi9cbiAgICBvblByZXNzOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIG5vIHZpc3VhbCBjaGFuZ2UgaXMgbWFkZSB3aGVuIHRleHQgaXMgcHJlc3NlZCBkb3duLiBCeVxuICAgICAqIGRlZmF1bHQsIGEgZ3JheSBvdmFsIGhpZ2hsaWdodHMgdGhlIHRleHQgb24gcHJlc3MgZG93bi5cbiAgICAgKiBAcGxhdGZvcm0gaW9zXG4gICAgICovXG4gICAgc3VwcHJlc3NIaWdobGlnaHRpbmc6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gbG9jYXRlIHRoaXMgdmlldyBpbiBlbmQtdG8tZW5kIHRlc3RzLlxuICAgICAqL1xuICAgIHRlc3RJRDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgc2hvdWxkIGZvbnRzIHNjYWxlIHRvIHJlc3BlY3QgVGV4dCBTaXplIGFjY2Vzc2liaWxpdHkgc2V0dGluZyBvbiBpT1MuXG4gICAgICovXG4gICAgYWxsb3dGb250U2NhbGluZzogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gIH0sXG5cbiAgZ2V0SW5pdGlhbFN0YXRlKCk6IE9iamVjdCB7XG4gICAgcmV0dXJuIHsuLi50aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLCAuLi57XG4gICAgICBpc0hpZ2hsaWdodGVkOiBmYWxzZSxcbiAgICB9fTtcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHMoKTogT2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgYWxsb3dGb250U2NhbGluZzogdHJ1ZSxcbiAgICB9O1xuICB9LFxuXG4gIC8vIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAvLyAgIGNvbnNvbGUubG9nKCdtb3VudCcpXG4gIC8vIH0sXG4gIC8vXG4gIC8vIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgLy8gICBjb25zb2xlLmxvZygndXBkYXRlJylcbiAgLy8gfSxcblxuICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyKCk6IGJvb2wge1xuICAgIGxldCBzaG91bGRTZXRGcm9tUHJvcHMgPSB0aGlzLnByb3BzLm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIgJiZcbiAgICAgIHRoaXMucHJvcHMub25TdGFydFNob3VsZFNldFJlc3BvbmRlcigpO1xuICAgIHJldHVybiBzaG91bGRTZXRGcm9tUHJvcHMgfHwgISF0aGlzLnByb3BzLm9uUHJlc3M7XG4gIH0sXG5cbiAgLypcbiAgICogUmV0dXJucyB0cnVlIHRvIGFsbG93IHJlc3BvbmRlciB0ZXJtaW5hdGlvblxuICAgKi9cbiAgaGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KCk6IGJvb2wge1xuICAgIC8vIEFsbG93IHRvdWNoYWJsZSBvciBwcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCB0byBkZW55XG4gICAgLy8gdGhlIHJlcXVlc3RcbiAgICBsZXQgYWxsb3dUZXJtaW5hdGlvbiA9IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KCk7XG4gICAgaWYgKGFsbG93VGVybWluYXRpb24gJiYgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCkge1xuICAgICAgYWxsb3dUZXJtaW5hdGlvbiA9IHRoaXMucHJvcHMub25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbG93VGVybWluYXRpb247XG4gIH0sXG5cbiAgaGFuZGxlUmVzcG9uZGVyR3JhbnQoZTogU3ludGhldGljRXZlbnQsIGRpc3BhdGNoSUQ6IHN0cmluZykge1xuICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQoZSwgZGlzcGF0Y2hJRCk7XG4gICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlckdyYW50ICYmXG4gICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyR3JhbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuICBoYW5kbGVSZXNwb25kZXJNb3ZlKGU6IFN5bnRoZXRpY0V2ZW50KSB7XG4gICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlKGUpO1xuICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJNb3ZlICYmXG4gICAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyTW92ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG4gIGhhbmRsZVJlc3BvbmRlclJlbGVhc2UoZTogU3ludGhldGljRXZlbnQpIHtcbiAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2UoZSk7XG4gICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclJlbGVhc2UgJiZcbiAgICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJSZWxlYXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cbiAgaGFuZGxlUmVzcG9uZGVyVGVybWluYXRlKGU6IFN5bnRoZXRpY0V2ZW50KSB7XG4gICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUoZSk7XG4gICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0ZSAmJlxuICAgICAgdGhpcy5wcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4oKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuc3VwcHJlc3NIaWdobGlnaHRpbmcgfHwgIXRoaXMucHJvcHMub25QcmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzSGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgfSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuc3VwcHJlc3NIaWdobGlnaHRpbmcgfHwgIXRoaXMucHJvcHMub25QcmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzSGlnaGxpZ2h0ZWQ6IGZhbHNlLFxuICAgIH0pO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzKCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoKTtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQoKTogUmVjdE9mZnNldCB7XG4gICAgcmV0dXJuIFBSRVNTX1JFQ1RfT0ZGU0VUO1xuICB9LFxuXG4gIGdldENoaWxkQ29udGV4dCgpOiBPYmplY3Qge1xuICAgIHJldHVybiB7aXNJbkFQYXJlbnRUZXh0OiB0cnVlfTtcbiAgfSxcblxuICBjb250ZXh0VHlwZXM6IHtcbiAgICBpc0luQVBhcmVudFRleHQ6IFJlYWN0LlByb3BUeXBlcy5ib29sXG4gIH0sXG5cbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBpc0luQVBhcmVudFRleHQ6IFJlYWN0LlByb3BUeXBlcy5ib29sXG4gIH0sXG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBwcm9wcyA9IHsuLi50aGlzLnByb3BzfTtcbiAgICAvLyBUZXh0IGlzIGFjY2Vzc2libGUgYnkgZGVmYXVsdFxuICAgIGlmIChwcm9wcy5hY2Nlc3NpYmxlICE9PSBmYWxzZSkge1xuICAgICAgcHJvcHMuYWNjZXNzaWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHByb3BzLmlzSGlnaGxpZ2h0ZWQgPSB0aGlzLnN0YXRlLmlzSGlnaGxpZ2h0ZWQ7XG4gICAgcHJvcHMub25TdGFydFNob3VsZFNldFJlc3BvbmRlciA9IHRoaXMub25TdGFydFNob3VsZFNldFJlc3BvbmRlcjtcbiAgICBwcm9wcy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCA9XG4gICAgICB0aGlzLmhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDtcbiAgICBwcm9wcy5vblJlc3BvbmRlckdyYW50ID0gdGhpcy5oYW5kbGVSZXNwb25kZXJHcmFudDtcbiAgICBwcm9wcy5vblJlc3BvbmRlck1vdmUgPSB0aGlzLmhhbmRsZVJlc3BvbmRlck1vdmU7XG4gICAgcHJvcHMub25SZXNwb25kZXJSZWxlYXNlID0gdGhpcy5oYW5kbGVSZXNwb25kZXJSZWxlYXNlO1xuICAgIHByb3BzLm9uUmVzcG9uZGVyVGVybWluYXRlID0gdGhpcy5oYW5kbGVSZXNwb25kZXJUZXJtaW5hdGU7XG5cbiAgICBsZXQge1xuICAgICAgbnVtYmVyT2ZMaW5lcyxcbiAgICAgIHN0eWxlXG4gICAgfSA9IHByb3BzO1xuXG4gICAgc3R5bGUgPSB7Li4ucHJvcHMuc3R5bGV9O1xuXG4gICAgaWYgKHR5cGVvZiBzdHlsZS5saW5lSGVpZ2h0ID09ICdudW1iZXInKSB7XG4gICAgICBzdHlsZS5saW5lSGVpZ2h0ICs9ICdweCc7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCBsaW5lSGVpZ2h0IGlzIDEuMiB4IGZvbnRTaXplXG4gICAgbGV0IGxpbmVIZWlnaHQgPSBzdHlsZS5saW5lSGVpZ2h0IHx8IChzdHlsZS5mb250U2l6ZSB8fCAxNikgKiAxLjI7IC8vIEZJWE1FOiAgbm90IHN1cmUgMTZweCBpcyB0aGUgZGVmYXVsdCBsaW5lIGhlaWdodFxuICAgIGlmICh0eXBlb2YgbGluZUhlaWdodCA9PSAnbnVtYmVyJykge1xuICAgICAgbGluZUhlaWdodCArPSAncHgnO1xuICAgIH1cbiAgICBzdHlsZS5saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcblxuICAgIGlmIChzdHlsZS50ZXh0RGVjb3JhdGlvbkxpbmUpIHtcbiAgICAgIHN0eWxlLnRleHREZWNvcmF0aW9uID0gc3R5bGUudGV4dERlY29yYXRpb25MaW5lO1xuICAgIH1cblxuICAgIGlmICghcHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIC8vIFRPRE8gc2V0IGEgbGluZWJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuIHsuLi5wcm9wc31cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAuLi57XG4gICAgICAgICAgICBkaXNwbGF5OiB0aGlzLmNvbnRleHQuaXNJbkFQYXJlbnRUZXh0ID8gJ2lubGluZScgOiAnaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgICB3b3JkV3JhcDogJ2JyZWFrLXdvcmQnLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ0hlbHZldGljYSBOZXVlLCBTVEhlaVRpLCBzYW5zLXNlcmlmJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgLi4uKG51bWJlck9mTGluZXMgJiYge1xuICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgdGV4dE92ZXJmbG93OiAnZWxsaXBzaXMnLFxuICAgICAgICAgICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICctd2Via2l0LWJveCcsXG4gICAgICAgICAgICBXZWJraXRMaW5lQ2xhbXA6IG51bWJlck9mTGluZXMsXG4gICAgICAgICAgICBXZWJraXRCb3hPcmllbnQ6ICd2ZXJ0aWNhbCcsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IHBhcnNlRmxvYXQobGluZUhlaWdodCkgKiBudW1iZXJPZkxpbmVzLFxuICAgICAgICAgIH0pXG4gICAgICAgIH19IC8+XG4gICAgKTtcbiAgfSxcbn0pO1xuXG50eXBlIFJlY3RPZmZzZXQgPSB7XG4gIHRvcDogbnVtYmVyO1xuICBsZWZ0OiBudW1iZXI7XG4gIHJpZ2h0OiBudW1iZXI7XG4gIGJvdHRvbTogbnVtYmVyO1xufVxuXG5sZXQgUFJFU1NfUkVDVF9PRkZTRVQgPSB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMH07XG5cblRleHQuaXNSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHRydWU7XG5cbmV4cG9ydCBkZWZhdWx0IFRleHQ7XG4iXX0=