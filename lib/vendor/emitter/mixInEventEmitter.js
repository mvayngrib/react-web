
















var _EventEmitter=require('./EventEmitter');var _EventEmitter2=_interopRequireDefault(_EventEmitter);
var _ReactEventEmitterWithHolding=require('ReactEventEmitterWithHolding');var _ReactEventEmitterWithHolding2=_interopRequireDefault(_ReactEventEmitterWithHolding);
var _ReactEventHolder=require('./EventHolder');var _ReactEventHolder2=_interopRequireDefault(_ReactEventHolder);
var _ReactEventValidator=require('ReactEventValidator');var _ReactEventValidator2=_interopRequireDefault(_ReactEventValidator);
var _copyProperties=require('../core/copyProperties');var _copyProperties2=_interopRequireDefault(_copyProperties);
var _invariant=require('fbjs/lib/invariant');var _invariant2=_interopRequireDefault(_invariant);
var _keyOf=require('fbjs/lib/keyOf');var _keyOf2=_interopRequireDefault(_keyOf);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

var TYPES_KEY=(0,_keyOf2.default)({__types:true});






















function mixInEventEmitter(klass,types){
(0,_invariant2.default)(types,'Must supply set of valid event types');
(0,_invariant2.default)(!this.__eventEmitter,'An active emitter is already mixed in');



var target=klass.prototype||klass;

var ctor=klass.constructor;
if(ctor){
(0,_invariant2.default)(
ctor===Object||ctor===Function,
'Mix EventEmitter into a class, not an instance');

}



if(target.hasOwnProperty(TYPES_KEY)){
(0,_copyProperties2.default)(target.__types,types);
}else if(target.__types){
target.__types=(0,_copyProperties2.default)({},target.__types,types);
}else{
target.__types=types;
}
(0,_copyProperties2.default)(target,EventEmitterMixin);
}

var EventEmitterMixin={
emit:function emit(eventType,a,b,c,d,e,_){
return this.__getEventEmitter().emit(eventType,a,b,c,d,e,_);
},

emitAndHold:function emitAndHold(eventType,a,b,c,d,e,_){
return this.__getEventEmitter().emitAndHold(eventType,a,b,c,d,e,_);
},

addListener:function addListener(eventType,listener,context){
return this.__getEventEmitter().addListener(eventType,listener,context);
},

once:function once(eventType,listener,context){
return this.__getEventEmitter().once(eventType,listener,context);
},

addRetroactiveListener:function addRetroactiveListener(eventType,listener,context){
return this.__getEventEmitter().addRetroactiveListener(
eventType,
listener,
context);

},

addListenerMap:function addListenerMap(listenerMap,context){
return this.__getEventEmitter().addListenerMap(listenerMap,context);
},

addRetroactiveListenerMap:function addRetroactiveListenerMap(listenerMap,context){
return this.__getEventEmitter().addListenerMap(listenerMap,context);
},

removeAllListeners:function removeAllListeners(){
this.__getEventEmitter().removeAllListeners();
},

removeCurrentListener:function removeCurrentListener(){
this.__getEventEmitter().removeCurrentListener();
},

releaseHeldEventType:function releaseHeldEventType(eventType){
this.__getEventEmitter().releaseHeldEventType(eventType);
},

__getEventEmitter:function __getEventEmitter(){
if(!this.__eventEmitter){
var emitter=new _EventEmitter2.default();
emitter=_ReactEventValidator2.default.addValidation(emitter,this.__types);

var holder=new _ReactEventHolder2.default();
this.__eventEmitter=new _ReactEventEmitterWithHolding2.default(emitter,holder);
}
return this.__eventEmitter;
}};


module.exports=mixInEventEmitter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1peEluRXZlbnRFbWl0dGVyLmpzIl0sIm5hbWVzIjpbIlRZUEVTX0tFWSIsIl9fdHlwZXMiLCJtaXhJbkV2ZW50RW1pdHRlciIsImtsYXNzIiwidHlwZXMiLCJfX2V2ZW50RW1pdHRlciIsInRhcmdldCIsInByb3RvdHlwZSIsImN0b3IiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsIkZ1bmN0aW9uIiwiaGFzT3duUHJvcGVydHkiLCJFdmVudEVtaXR0ZXJNaXhpbiIsImVtaXQiLCJldmVudFR5cGUiLCJhIiwiYiIsImMiLCJkIiwiZSIsIl8iLCJfX2dldEV2ZW50RW1pdHRlciIsImVtaXRBbmRIb2xkIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lciIsImNvbnRleHQiLCJvbmNlIiwiYWRkUmV0cm9hY3RpdmVMaXN0ZW5lciIsImFkZExpc3RlbmVyTWFwIiwibGlzdGVuZXJNYXAiLCJhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyTWFwIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicmVtb3ZlQ3VycmVudExpc3RlbmVyIiwicmVsZWFzZUhlbGRFdmVudFR5cGUiLCJlbWl0dGVyIiwiYWRkVmFsaWRhdGlvbiIsImhvbGRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLDRDO0FBQ0EsMEU7QUFDQSwrQztBQUNBLHdEO0FBQ0Esc0Q7QUFDQSw2QztBQUNBLHFDOztBQUVBLEdBQUlBLFdBQVksb0JBQU0sQ0FBQ0MsUUFBUyxJQUFWLENBQU4sQ0FBaEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBLFFBQVNDLGtCQUFULENBQTJCQyxLQUEzQixDQUFrQ0MsS0FBbEMsQ0FBeUM7QUFDdkMsd0JBQVVBLEtBQVYsQ0FBaUIsc0NBQWpCO0FBQ0Esd0JBQVUsQ0FBQyxLQUFLQyxjQUFoQixDQUFnQyx1Q0FBaEM7Ozs7QUFJQSxHQUFJQyxRQUFTSCxNQUFNSSxTQUFOLEVBQW1CSixLQUFoQzs7QUFFQSxHQUFJSyxNQUFPTCxN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QztBQUNELENBM0NxQjs7QUE2Q3RCTyxrQkFBbUIsNEJBQVc7QUFDNUIsR0FBSSxDQUFDLEtBQUtqQixjQUFWLENBQTBCO0FBQ3hCLEdBQUk4QixTQUFVLDRCQUFkO0FBQ0FBLFFBQVUsOEJBQWVDLGFBQWYsQ0FBNkJELE9BQTdCLENBQXNDLEtBQUtsQyxPQUEzQyxDQUFWOztBQUVBLEdBQUlvQyxRQUFTLGdDQUFiO0FBQ0EsS0FBS2hDLGNBQUwsQ0FBc0IsMkNBQTRCOEIsT0FBNUIsQ0FBcUNFLE1BQXJDLENBQXRCO0FBQ0Q7QUFDRCxNQUFPLE1BQUtoQyxjQUFaO0FBQ0QsQ0F0RHFCLENBQXhCOzs7QUF5REFpQyxPQUFPQyxPQUFQLENBQWlCckMsaUJBQWpCIiwiZmlsZSI6Im1peEluRXZlbnRFbWl0dGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZ2VuZXJhdGVkIFNpZ25lZFNvdXJjZTw8YzczNTAzODcyNmFmMmRhZjU4NGIzZTdmYjM5NTBlOGI+PlxuICpcbiAqICEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISFcbiAqICEhIFRoaXMgZmlsZSBpcyBhIGNoZWNrLWluIG9mIGEgc3RhdGljX3Vwc3RyZWFtIHByb2plY3QhICAgICAgISFcbiAqICEhICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISFcbiAqICEhIFlvdSBzaG91bGQgbm90IG1vZGlmeSB0aGlzIGZpbGUgZGlyZWN0bHkuIEluc3RlYWQ6ICAgICAgICAgISFcbiAqICEhIDEpIFVzZSBgZmpzIHVzZS11cHN0cmVhbWAgdG8gdGVtcG9yYXJpbHkgcmVwbGFjZSB0aGlzIHdpdGggISFcbiAqICEhICAgIHRoZSBsYXRlc3QgdmVyc2lvbiBmcm9tIHVwc3RyZWFtLiAgICAgICAgICAgICAgICAgICAgICAgISFcbiAqICEhIDIpIE1ha2UgeW91ciBjaGFuZ2VzLCB0ZXN0IHRoZW0sIGV0Yy4gICAgICAgICAgICAgICAgICAgICAgISFcbiAqICEhIDMpIFVzZSBgZmpzIHB1c2gtdXBzdHJlYW1gIHRvIGNvcHkgeW91ciBjaGFuZ2VzIGJhY2sgdG8gICAgISFcbiAqICEhICAgIHN0YXRpY191cHN0cmVhbS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISFcbiAqICEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISFcbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNaXhJbkV2ZW50RW1pdHRlclxuICovXG5cbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnRXZlbnRFbWl0dGVyJztcbmltcG9ydCBFdmVudEVtaXR0ZXJXaXRoSG9sZGluZyBmcm9tICdSZWFjdEV2ZW50RW1pdHRlcldpdGhIb2xkaW5nJztcbmltcG9ydCBFdmVudEhvbGRlciBmcm9tICdSZWFjdEV2ZW50SG9sZGVyJztcbmltcG9ydCBFdmVudFZhbGlkYXRvciBmcm9tICdSZWFjdEV2ZW50VmFsaWRhdG9yJztcbmltcG9ydCBjb3B5UHJvcGVydGllcyBmcm9tICdjb3B5UHJvcGVydGllcyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ZianMvbGliL2ludmFyaWFudCc7XG5pbXBvcnQga2V5T2YgZnJvbSAnZmJqcy9saWIva2V5T2YnO1xuXG52YXIgVFlQRVNfS0VZID0ga2V5T2Yoe19fdHlwZXM6IHRydWV9KTtcblxuLyoqXG4gKiBBUEkgdG8gc2V0dXAgYW4gb2JqZWN0IG9yIGNvbnN0cnVjdG9yIHRvIGJlIGFibGUgdG8gZW1pdCBkYXRhIGV2ZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogZnVuY3Rpb24gRG9nKCkgeyAuLi5kb2cgc3R1ZmYuLi4gfVxuICogbWl4SW5FdmVudEVtaXR0ZXIoRG9nLCB7YmFyazogdHJ1ZX0pO1xuICpcbiAqIHZhciBwdXBweSA9IG5ldyBEb2coKTtcbiAqIHB1cHB5LmFkZExpc3RlbmVyKCdiYXJrJywgZnVuY3Rpb24gKHZvbHVtZSkge1xuICogICBjb25zb2xlLmxvZygnUHVwcHknLCB0aGlzLCAnYmFya2VkIGF0IHZvbHVtZTonLCB2b2x1bWUpO1xuICogfSk7XG4gKiBwdXBweS5lbWl0KCdiYXJrJywgJ3F1aWV0Jyk7XG4gKiAvLyBQdXBweSA8cHVwcHk+IGJhcmtlZCBhdCB2b2x1bWU6IHF1aWV0XG4gKlxuICpcbiAqIC8vIEEgXCJzaW5nbGV0b25cIiBvYmplY3QgbWF5IGFsc28gYmUgY29tbWlzc2lvbmVkOlxuICpcbiAqIHZhciBTaW5nbGV0b24gPSB7fTtcbiAqIG1peEluRXZlbnRFbWl0dGVyKFNpbmdsZXRvbiwge2xvbmVseTogdHJ1ZX0pO1xuICogU2luZ2xldG9uLmVtaXQoJ2xvbmVseScsIHRydWUpO1xuICovXG5mdW5jdGlvbiBtaXhJbkV2ZW50RW1pdHRlcihrbGFzcywgdHlwZXMpIHtcbiAgaW52YXJpYW50KHR5cGVzLCAnTXVzdCBzdXBwbHkgc2V0IG9mIHZhbGlkIGV2ZW50IHR5cGVzJyk7XG4gIGludmFyaWFudCghdGhpcy5fX2V2ZW50RW1pdHRlciwgJ0FuIGFjdGl2ZSBlbWl0dGVyIGlzIGFscmVhZHkgbWl4ZWQgaW4nKTtcblxuICAvLyBJZiB0aGlzIGlzIGEgY29uc3RydWN0b3IsIHdyaXRlIHRvIHRoZSBwcm90b3R5cGUsIG90aGVyd2lzZSB3cml0ZSB0byB0aGVcbiAgLy8gc2luZ2xldG9uIG9iamVjdC5cbiAgdmFyIHRhcmdldCA9IGtsYXNzLnByb3RvdHlwZSB8fCBrbGFzcztcblxuICB2YXIgY3RvciA9IGtsYXNzLmNvbnN0cnVjdG9yO1xuICBpZiAoY3Rvcikge1xuICAgIGludmFyaWFudChcbiAgICAgIGN0b3IgPT09IE9iamVjdCB8fCBjdG9yID09PSBGdW5jdGlvbixcbiAgICAgICdNaXggRXZlbnRFbWl0dGVyIGludG8gYSBjbGFzcywgbm90IGFuIGluc3RhbmNlJ1xuICAgICk7XG4gIH1cblxuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBwcm92aWRlZCB0eXBlcywgdW5pb24gdGhlIHR5cGVzIGlmIHRoZXkgYWxyZWFkeSBleGlzdCxcbiAgLy8gd2hpY2ggYWxsb3dzIGZvciBwcm90b3R5cGUgc3ViY2xhc3NlcyB0byBwcm92aWRlIG1vcmUgdHlwZXMuXG4gIGlmICh0YXJnZXQuaGFzT3duUHJvcGVydHkoVFlQRVNfS0VZKSkge1xuICAgIGNvcHlQcm9wZXJ0aWVzKHRhcmdldC5fX3R5cGVzLCB0eXBlcyk7XG4gIH0gZWxzZSBpZiAodGFyZ2V0Ll9fdHlwZXMpIHtcbiAgICB0YXJnZXQuX190eXBlcyA9IGNvcHlQcm9wZXJ0aWVzKHt9LCB0YXJnZXQuX190eXBlcywgdHlwZXMpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5fX3R5cGVzID0gdHlwZXM7XG4gIH1cbiAgY29weVByb3BlcnRpZXModGFyZ2V0LCBFdmVudEVtaXR0ZXJNaXhpbik7XG59XG5cbnZhciBFdmVudEVtaXR0ZXJNaXhpbiA9IHtcbiAgZW1pdDogZnVuY3Rpb24oZXZlbnRUeXBlLCBhLCBiLCBjLCBkLCBlLCBfKSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRFdmVudEVtaXR0ZXIoKS5lbWl0KGV2ZW50VHlwZSwgYSwgYiwgYywgZCwgZSwgXyk7XG4gIH0sXG5cbiAgZW1pdEFuZEhvbGQ6IGZ1bmN0aW9uKGV2ZW50VHlwZSwgYSwgYiwgYywgZCwgZSwgXykge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuZW1pdEFuZEhvbGQoZXZlbnRUeXBlLCBhLCBiLCBjLCBkLCBlLCBfKTtcbiAgfSxcblxuICBhZGRMaXN0ZW5lcjogZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuYWRkTGlzdGVuZXIoZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCk7XG4gIH0sXG5cbiAgb25jZTogZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkub25jZShldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KTtcbiAgfSxcblxuICBhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyOiBmdW5jdGlvbihldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRFdmVudEVtaXR0ZXIoKS5hZGRSZXRyb2FjdGl2ZUxpc3RlbmVyKFxuICAgICAgZXZlbnRUeXBlLFxuICAgICAgbGlzdGVuZXIsXG4gICAgICBjb250ZXh0XG4gICAgKTtcbiAgfSxcblxuICBhZGRMaXN0ZW5lck1hcDogZnVuY3Rpb24obGlzdGVuZXJNYXAsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLmFkZExpc3RlbmVyTWFwKGxpc3RlbmVyTWFwLCBjb250ZXh0KTtcbiAgfSxcblxuICBhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyTWFwOiBmdW5jdGlvbihsaXN0ZW5lck1hcCwgY29udGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkuYWRkTGlzdGVuZXJNYXAobGlzdGVuZXJNYXAsIGNvbnRleHQpO1xuICB9LFxuXG4gIHJlbW92ZUFsbExpc3RlbmVyczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9LFxuXG4gIHJlbW92ZUN1cnJlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fX2dldEV2ZW50RW1pdHRlcigpLnJlbW92ZUN1cnJlbnRMaXN0ZW5lcigpO1xuICB9LFxuXG4gIHJlbGVhc2VIZWxkRXZlbnRUeXBlOiBmdW5jdGlvbihldmVudFR5cGUpIHtcbiAgICB0aGlzLl9fZ2V0RXZlbnRFbWl0dGVyKCkucmVsZWFzZUhlbGRFdmVudFR5cGUoZXZlbnRUeXBlKTtcbiAgfSxcblxuICBfX2dldEV2ZW50RW1pdHRlcjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9fZXZlbnRFbWl0dGVyKSB7XG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIgPSBFdmVudFZhbGlkYXRvci5hZGRWYWxpZGF0aW9uKGVtaXR0ZXIsIHRoaXMuX190eXBlcyk7XG5cbiAgICAgIHZhciBob2xkZXIgPSBuZXcgRXZlbnRIb2xkZXIoKTtcbiAgICAgIHRoaXMuX19ldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyV2l0aEhvbGRpbmcoZW1pdHRlciwgaG9sZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX19ldmVudEVtaXR0ZXI7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbWl4SW5FdmVudEVtaXR0ZXI7XG4iXX0=