










'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var logError=console.error;
var invariant=require('fbjs/lib/invariant');var





















































AppState=function(){



function AppState(){var _this=this;_classCallCheck(this,AppState);
this.currentState='active';
this._handlers={
change:[],
memoryWarning:[]};



var hidden,visibilityChange;
if(typeof document.hidden!=="undefined"){
hidden="hidden";
visibilityChange="visibilitychange";
}else if(typeof document.msHidden!=="undefined"){
hidden="msHidden";
visibilityChange="msvisibilitychange";
}else if(typeof document.webkitHidden!=="undefined"){
hidden="webkitHidden";
visibilityChange="webkitvisibilitychange";
}

document.addEventListener(visibilityChange,function(){
_this.currentState=document[hidden]?'background':'active';
_this._handlers.change.forEach(function(handler){return handler(_this.currentState);});
},false);
}_createClass(AppState,[{key:'addEventListener',value:function addEventListener(






type,
handler)
{var _this2=this;
invariant(
['change','memoryWarning'].indexOf(type)!==-1,
'Trying to subscribe to unknown event: "%s"',type);


if(type!=='change')return;

this._handlers[type].push(handler);
return function(){return _this2.removeEventListener(type,handler);};
}},{key:'removeEventListener',value:function removeEventListener(





type,
handler)
{
invariant(
['change','memoryWarning'].indexOf(type)!==-1,
'Trying to remove listener for unknown event: "%s"',type);


var idx=this._handlers[type];
if(idx!==-1){
this._handlers[type].splice(idx,1);
}
}}]);return AppState;}();


module.exports=new AppState();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcFN0YXRlLndlYi5qcyJdLCJuYW1lcyI6WyJsb2dFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsImludmFyaWFudCIsInJlcXVpcmUiLCJBcHBTdGF0ZSIsImN1cnJlbnRTdGF0ZSIsIl9oYW5kbGVycyIsImNoYW5nZSIsIm1lbW9yeVdhcm5pbmciLCJoaWRkZW4iLCJ2aXNpYmlsaXR5Q2hhbmdlIiwiZG9jdW1lbnQiLCJtc0hpZGRlbiIsIndlYmtpdEhpZGRlbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JFYWNoIiwiaGFuZGxlciIsInR5cGUiLCJpbmRleE9mIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpZHgiLCJzcGxpY2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVdBLGE7O0FBRUEsR0FBTUEsVUFBV0MsUUFBUUMsS0FBekI7QUFDQSxHQUFNQyxXQUFZQyw2QkFBbEIsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0RNQyxROzs7O0FBSUosbUJBQWM7QUFDWixLQUFLQyxZQUFMLENBQW9CLFFBQXBCO0FBQ0EsS0FBS0MsU0FBTCxDQUFpQjtBQUNmQyxPQUFRLEVBRE87QUFFZkMsY0FBZSxFQUZBLENBQWpCOzs7O0FBTUEsR0FBSUMsT0FBSixDQUFZQyxnQkFBWjtBQUNBLEdBQUksTUFBT0MsVUFBU0YsTUFBaEIsR0FBMkIsV0FBL0IsQ0FBNEM7QUFDMUNBLE9BQVMsUUFBVDtBQUNBQyxpQkFBbUIsa0JBQW5CO0FBQ0QsQ0FIRCxJQUdPLElBQUksTUFBT0MsVUFBU0MsUUFBaEIsR0FBNkIsV0FBakMsQ0FBOEM7QUFDbkRILE9BQVMsVUFBVDtBQUNBQyxpQkFBbUIsb0JBQW5CO0FBQ0QsQ0FITSxJQUdBLElBQUksTUFBT0MsVUFBU0UsWUFBaEIsR0FBaUMsV0FBckMsQ0FBa0Q7QUFDdkRKLE9BQVMsY0FBVDtBQUNBQyxpQkFBbUIsd0JBQW5CO0FBQ0Q7O0FBRURDLFNBQVNHLGdCQUFULENBQTBCSixnQkFBMUIsQ0FBNEMsVUFBTTtBQUNoRCxNQUFLTCxZQUFMLENBQW9CTSxTQUFTRixNQUFULEVBQW1CLFlBQW5CLENBQWtDLFFBQXREO0FBQ0EsTUFBS0gsU0FBTCxDQUFlQyxNQUFmLENBQXNCUSxPQUF0QixDQUE4Qix3QkFBV0MsU0FBUSxNQUFLWCxZQUFiLENBQVgsRUFBOUI7QUFDRCxDQUhELENBR0csS0FISDtBQUlELEM7Ozs7Ozs7QUFPQ1ksSTtBQUNBRCxPO0FBQ0E7QUFDQWQ7QUFDRSxDQUFDLFFBQUQsQ0FBVyxlQUFYLEVBQTRCZ0IsT0FBNUIsQ0FBb0NELElBQXBDLElBQThDLENBQUMsQ0FEakQ7QUFFRSw0Q0FGRixDQUVnREEsSUFGaEQ7OztBQUtBLEdBQUlBLE9BQVMsUUFBYixDQUF1Qjs7QUFFdkIsS0FBS1gsU0FBTCxDQUFlVyxJQUFmLEVBQXFCRSxJQUFyQixDQUEwQkgsT0FBMUI7QUFDQSxNQUFPLGtCQUFNLFFBQUtJLG1CQUFMLENBQXlCSCxJQUF6QixDQUErQkQsT0FBL0IsQ0FBTixFQUFQO0FBQ0QsQzs7Ozs7O0FBTUNDLEk7QUFDQUQsTztBQUNBO0FBQ0FkO0FBQ0UsQ0FBQyxRQUFELENBQVcsZUFBWCxFQUE0QmdCLE9BQTVCLENBQW9DRCxJQUFwQyxJQUE4QyxDQUFDLENBRGpEO0FBRUUsbURBRkYsQ0FFdURBLElBRnZEOzs7QUFLQSxHQUFNSSxLQUFNLEtBQUtmLFNBQUwsQ0FBZVcsSUFBZixDQUFaO0FBQ0EsR0FBSUksTUFBUSxDQUFDLENBQWIsQ0FBZ0I7QUFDZCxLQUFLZixTQUFMLENBQWVXLElBQWYsRUFBcUJLLE1BQXJCLENBQTRCRCxHQUE1QixDQUFpQyxDQUFqQztBQUNEO0FBQ0YsQzs7O0FBR0hFLE9BQU9DLE9BQVAsQ0FBaUIsR0FBSXBCLFNBQUosRUFBakIiLCJmaWxlIjoiQXBwU3RhdGUud2ViLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEFwcFN0YXRlXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IGxvZ0Vycm9yID0gY29uc29sZS5lcnJvcjtcbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIGBBcHBTdGF0ZWAgY2FuIHRlbGwgeW91IGlmIHRoZSBhcHAgaXMgaW4gdGhlIGZvcmVncm91bmQgb3IgYmFja2dyb3VuZCxcbiAqIGFuZCBub3RpZnkgeW91IHdoZW4gdGhlIHN0YXRlIGNoYW5nZXMuXG4gKlxuICogQXBwU3RhdGUgaXMgZnJlcXVlbnRseSB1c2VkIHRvIGRldGVybWluZSB0aGUgaW50ZW50IGFuZCBwcm9wZXIgYmVoYXZpb3Igd2hlblxuICogaGFuZGxpbmcgcHVzaCBub3RpZmljYXRpb25zLlxuICpcbiAqICMjIyBBcHAgU3RhdGVzXG4gKlxuICogIC0gYGFjdGl2ZWAgLSBUaGUgYXBwIGlzIHJ1bm5pbmcgaW4gdGhlIGZvcmVncm91bmRcbiAqICAtIGBiYWNrZ3JvdW5kYCAtIFRoZSBhcHAgaXMgcnVubmluZyBpbiB0aGUgYmFja2dyb3VuZC4gVGhlIHVzZXIgaXMgZWl0aGVyXG4gKiAgICAgaW4gYW5vdGhlciBhcHAgb3Igb24gdGhlIGhvbWUgc2NyZWVuXG4gKiAgLSBgaW5hY3RpdmVgIC0gVGhpcyBpcyBhIHN0YXRlIHRoYXQgb2NjdXJzIHdoZW4gdHJhbnNpdGlvbmluZyBiZXR3ZWVuXG4gKiAgICAgZm9yZWdyb3VuZCAmIGJhY2tncm91bmQsIGFuZCBkdXJpbmcgcGVyaW9kcyBvZiBpbmFjdGl2aXR5IHN1Y2ggYXNcbiAqICAgICBlbnRlcmluZyB0aGUgTXVsdGl0YXNraW5nIHZpZXcgb3IgaW4gdGhlIGV2ZW50IG9mIGFuIGluY29taW5nIGNhbGxcbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4gKiBbQXBwbGUncyBkb2N1bWVudGF0aW9uXShodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vbGlicmFyeS9pb3MvZG9jdW1lbnRhdGlvbi9pUGhvbmUvQ29uY2VwdHVhbC9pUGhvbmVPU1Byb2dyYW1taW5nR3VpZGUvVGhlQXBwTGlmZUN5Y2xlL1RoZUFwcExpZmVDeWNsZS5odG1sKVxuICpcbiAqICMjIyBCYXNpYyBVc2FnZVxuICpcbiAqIFRvIHNlZSB0aGUgY3VycmVudCBzdGF0ZSwgeW91IGNhbiBjaGVjayBgQXBwU3RhdGUuY3VycmVudFN0YXRlYCwgd2hpY2hcbiAqIHdpbGwgYmUga2VwdCB1cC10by1kYXRlLiBIb3dldmVyLCBgY3VycmVudFN0YXRlYCB3aWxsIGJlIG51bGwgYXQgbGF1bmNoXG4gKiB3aGlsZSBgQXBwU3RhdGVgIHJldHJpZXZlcyBpdCBvdmVyIHRoZSBicmlkZ2UuXG4gKlxuICogYGBgXG4gKiBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICogICByZXR1cm4ge1xuICogICAgIGN1cnJlbnRBcHBTdGF0ZTogQXBwU3RhdGUuY3VycmVudFN0YXRlLFxuICogICB9O1xuICogfSxcbiAqIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgQXBwU3RhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlQXBwU3RhdGVDaGFuZ2UpO1xuICogfSxcbiAqIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgQXBwU3RhdGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlQXBwU3RhdGVDaGFuZ2UpO1xuICogfSxcbiAqIF9oYW5kbGVBcHBTdGF0ZUNoYW5nZTogZnVuY3Rpb24oY3VycmVudEFwcFN0YXRlKSB7XG4gKiAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyZW50QXBwU3RhdGUsIH0pO1xuICogfSxcbiAqIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgIHJldHVybiAoXG4gKiAgICAgPFRleHQ+Q3VycmVudCBzdGF0ZSBpczoge3RoaXMuc3RhdGUuY3VycmVudEFwcFN0YXRlfTwvVGV4dD5cbiAqICAgKTtcbiAqIH0sXG4gKiBgYGBcbiAqXG4gKiBUaGlzIGV4YW1wbGUgd2lsbCBvbmx5IGV2ZXIgYXBwZWFyIHRvIHNheSBcIkN1cnJlbnQgc3RhdGUgaXM6IGFjdGl2ZVwiIGJlY2F1c2VcbiAqIHRoZSBhcHAgaXMgb25seSB2aXNpYmxlIHRvIHRoZSB1c2VyIHdoZW4gaW4gdGhlIGBhY3RpdmVgIHN0YXRlLCBhbmQgdGhlIG51bGxcbiAqIHN0YXRlIHdpbGwgaGFwcGVuIG9ubHkgbW9tZW50YXJpbHkuXG4gKi9cblxuY2xhc3MgQXBwU3RhdGUge1xuICBfaGFuZGxlcnM6IE9iamVjdDtcbiAgY3VycmVudFN0YXRlOiA/c3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY3VycmVudFN0YXRlID0gJ2FjdGl2ZSdcbiAgICB0aGlzLl9oYW5kbGVycyA9IHtcbiAgICAgIGNoYW5nZTogW10sXG4gICAgICBtZW1vcnlXYXJuaW5nOiBbXVxuICAgIH1cblxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QYWdlX1Zpc2liaWxpdHlfQVBJXG4gICAgdmFyIGhpZGRlbiwgdmlzaWJpbGl0eUNoYW5nZVxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuaGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7IC8vIE9wZXJhIDEyLjEwIGFuZCBGaXJlZm94IDE4IGFuZCBsYXRlciBzdXBwb3J0XG4gICAgICBoaWRkZW4gPSBcImhpZGRlblwiO1xuICAgICAgdmlzaWJpbGl0eUNoYW5nZSA9IFwidmlzaWJpbGl0eWNoYW5nZVwiO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Lm1zSGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBoaWRkZW4gPSBcIm1zSGlkZGVuXCI7XG4gICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gXCJtc3Zpc2liaWxpdHljaGFuZ2VcIjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC53ZWJraXRIaWRkZW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGhpZGRlbiA9IFwid2Via2l0SGlkZGVuXCI7XG4gICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gXCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCI7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih2aXNpYmlsaXR5Q2hhbmdlLCAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGRvY3VtZW50W2hpZGRlbl0gPyAnYmFja2dyb3VuZCcgOiAnYWN0aXZlJ1xuICAgICAgdGhpcy5faGFuZGxlcnMuY2hhbmdlLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKHRoaXMuY3VycmVudFN0YXRlKSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBoYW5kbGVyIHRvIEFwcFN0YXRlIGNoYW5nZXMgYnkgbGlzdGVuaW5nIHRvIHRoZSBgY2hhbmdlYCBldmVudCB0eXBlXG4gICAqIGFuZCBwcm92aWRpbmcgdGhlIGhhbmRsZXJcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGhhbmRsZXI6IEZ1bmN0aW9uXG4gICkge1xuICAgIGludmFyaWFudChcbiAgICAgIFsnY2hhbmdlJywgJ21lbW9yeVdhcm5pbmcnXS5pbmRleE9mKHR5cGUpICE9PSAtMSxcbiAgICAgICdUcnlpbmcgdG8gc3Vic2NyaWJlIHRvIHVua25vd24gZXZlbnQ6IFwiJXNcIicsIHR5cGVcbiAgICApO1xuXG4gICAgaWYgKHR5cGUgIT09ICdjaGFuZ2UnKSByZXR1cm5cblxuICAgIHRoaXMuX2hhbmRsZXJzW3R5cGVdLnB1c2goaGFuZGxlcilcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpXG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgaGFuZGxlciBieSBwYXNzaW5nIHRoZSBgY2hhbmdlYCBldmVudCB0eXBlIGFuZCB0aGUgaGFuZGxlclxuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRnVuY3Rpb25cbiAgKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgWydjaGFuZ2UnLCAnbWVtb3J5V2FybmluZyddLmluZGV4T2YodHlwZSkgIT09IC0xLFxuICAgICAgJ1RyeWluZyB0byByZW1vdmUgbGlzdGVuZXIgZm9yIHVua25vd24gZXZlbnQ6IFwiJXNcIicsIHR5cGVcbiAgICApO1xuXG4gICAgY29uc3QgaWR4ID0gdGhpcy5faGFuZGxlcnNbdHlwZV1cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5faGFuZGxlcnNbdHlwZV0uc3BsaWNlKGlkeCwgMSlcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQXBwU3RhdGUoKTtcbiJdfQ==